{
    "sha": "loc-2026-01-25-01:43:44",
    "files": [
        {
            "path": "lua/air-rework-t4.lua",
            "data": "-- NuttyB T4 Air rework\r\n-- Authors: BackBash\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\ndo\r\n    local unitDefs = UnitDefs or {}\r\n    local merge = table.mergeInPlace or table.merge\r\n\r\n    local payload = {\r\n        customparams = {\r\n            i18n_en_humanname = 'Experimental Tyrannus',\r\n            i18n_en_tooltip = 'In dedication to our commander Tyrannus',\r\n        },\r\n        weapondefs = {\r\n            machinegun = {\r\n                accuracy = 400,\r\n                areaofeffect = 64,\r\n                avoidfriendly = false,\r\n                avoidfeature = false,\r\n                collidefriendly = false,\r\n                collidefeature = true,\r\n                beamtime = 0.09,\r\n                corethickness = 0.55,\r\n                duration = 0.09,\r\n                burst = 1,\r\n                burstrate = 0.1,\r\n                explosiongenerator = 'custom:genericshellexplosion-tiny-aa',\r\n                energypershot = 0,\r\n                falloffrate = 0,\r\n                firestarter = 50,\r\n                interceptedbyshieldtype = 4,\r\n                intensity = 2,\r\n                name = 'scav rapid fire plasma gun',\r\n                range = 1000,\r\n                reloadtime = 0.1,\r\n                weapontype = 'LaserCannon',\r\n                rgbcolor = '1 0 0',\r\n                rgbcolor2 = '1 1 1',\r\n                soundtrigger = true,\r\n                soundstart = 'tgunshipfire',\r\n                texture1 = 'shot',\r\n                texture2 = 'explo2',\r\n                thickness = 8.5,\r\n                tolerance = 1000,\r\n                turret = true,\r\n                weaponvelocity = 1000,\r\n                damage = {\r\n                    default = 60,\r\n                },\r\n            },\r\n            heatray1 = {\r\n                allowNonBlockingAim = true,\r\n                avoidfriendly = true,\r\n                areaofeffect = 64,\r\n                avoidfeature = false,\r\n                beamtime = 0.033,\r\n                camerashake = 0.1,\r\n                collidefriendly = false,\r\n                corethickness = 0.45,\r\n                craterareaofeffect = 12,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                edgeeffectiveness = 1,\r\n                energypershot = 0,\r\n                explosiongenerator = 'custom:heatray-large',\r\n                firestarter = 90,\r\n                firetolerance = 300,\r\n                impulsefactor = 0,\r\n                intensity = 9,\r\n                laserflaresize = 8,\r\n                name = 'Experimental Thermal Ordnance Generators',\r\n                noselfdamage = true,\r\n                proximitypriority = -1,\r\n                range = 850,\r\n                reloadtime = 0.033,\r\n                rgbcolor = '1 0.55 0',\r\n                rgbcolor2 = '0.9 1.0 0.5',\r\n                scrollspeed = 5,\r\n                soundhitdry = 'heatray3start',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'heatray3lp',\r\n                soundstartvolume = 6,\r\n                soundtrigger = 1,\r\n                thickness = 6,\r\n                turret = true,\r\n                weapontype = 'BeamLaser',\r\n                weaponvelocity = 1500,\r\n                damage = {\r\n                    default = 150,\r\n                },\r\n            },\r\n            ata = {\r\n                areaofeffect = 34,\r\n                avoidfeature = false,\r\n                beamtime = 2,\r\n                collidefriendly = false,\r\n                corethickness = 0.5,\r\n                craterareaofeffect = 0,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                edgeeffectiveness = 0.30,\r\n                energypershot = 7000,\r\n                explosiongenerator = 'custom:laserhit-large-blue',\r\n                firestarter = 90,\r\n                impulsefactor = 0,\r\n                largebeamlaser = true,\r\n                laserflaresize = 7,\r\n                name = 'Heavy long-range g2g tachyon accelerator beam',\r\n                noselfdamage = true,\r\n                range = 1300,\r\n                reloadtime = 15,\r\n                rgbcolor = '0 1 1',\r\n                scrollspeed = 5,\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'raptorlaser',\r\n                soundtrigger = 1,\r\n                soundstartvolume = 4,\r\n                texture3 = 'largebeam',\r\n                thickness = 10,\r\n                tilelength = 150,\r\n                tolerance = 10000,\r\n                turret = true,\r\n                weapontype = 'BeamLaser',\r\n                weaponvelocity = 3100,\r\n                damage = {\r\n                    commanders = 480,\r\n                    default = 48000,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                badtargetcategory = 'NOTLAND',\r\n                def = 'heatray1',\r\n                maindir = '-1 0 0',\r\n                maxangledif = 210,\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n            [2] = {\r\n                badtargetcategory = 'NOTLAND',\r\n                def = 'heatray1',\r\n                maindir = '1 0 0',\r\n                maxangledif = 210,\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n            [3] = {\r\n                def = 'ata',\r\n                maindir = '1 0 0',\r\n                maxangledif = 190,\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n            [4] = {\r\n                def = 'machinegun',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n            [5] = {\r\n                def = 'machinegun',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n        },\r\n    }\r\n\r\n    if unitDefs.legfortt4 then\r\n        merge(unitDefs.legfortt4, payload)\r\n    else\r\n        unitDefs.legfortt4 = payload\r\n    end\r\nend\r\n"
        },
        {
            "path": "lua/builders-upgrades.lua",
            "data": "-- Builder & Storage Upgrades (T3 & T4)\r\n-- Authors: NineLEL, Nervensaege, TetrisCo\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\ndo\r\n    local unitDefs, tableMerge, tableContains =\r\n        UnitDefs or {}, table.merge, table.contains\r\n    local factions = { 'arm', 'cor', 'leg' }\r\n    local factionPrefix = { arm = 'Armada ', cor = 'Cortex ', leg = 'Legion ' }\r\n\r\n    local function addNewMergedUnitDef(baseUnit, newUnit, mergeProps)\r\n        if unitDefs[baseUnit] and not unitDefs[newUnit] then\r\n            unitDefs[newUnit] = tableMerge(unitDefs[baseUnit], mergeProps)\r\n        end\r\n    end\r\n\r\n    for _, faction in ipairs(factions) do\r\n        local isArm, isCor, isLeg =\r\n            faction == 'arm', faction == 'cor', faction == 'leg'\r\n\r\n        -----------------------------------------------------------------------\r\n        -- Construction Turrets (T3 & T4)\r\n        -----------------------------------------------------------------------\r\n\r\n        -- T3 Construction Turret\r\n        addNewMergedUnitDef(faction .. 'nanotct2', faction .. 'nanotct3', {\r\n            metalcost = 3700,\r\n            energycost = 62000,\r\n            builddistance = 550,\r\n            buildtime = 108000,\r\n            collisionvolumescales = '61 128 61',\r\n            footprintx = 6,\r\n            footprintz = 6,\r\n            health = 8800,\r\n            mass = 37200,\r\n            sightdistance = 575,\r\n            workertime = 1900,\r\n            icontype = 'armnanotct2',\r\n            canrepeat = true,\r\n            objectname = isLeg and 'Units/legnanotcbase.s3o'\r\n                or isCor and 'Units/CORRESPAWN.s3o'\r\n                or 'Units/ARMRESPAWN.s3o',\r\n            customparams = {\r\n                i18n_en_humanname = 'T3 Construction Turret',\r\n                i18n_en_tooltip = 'More BUILDPOWER! For the connoisseur',\r\n            },\r\n        })\r\n\r\n        -- T4 Construction Turret\r\n        addNewMergedUnitDef(faction .. 'nanotct3', faction .. 'nanotct4', {\r\n            metalcost = 11000,\r\n            energycost = 186000,\r\n            builddistance = 500,\r\n            buildtime = 320000,\r\n            health = 26400,\r\n            workertime = 3800,\r\n            customparams = {\r\n                i18n_en_humanname = 'T4 Construction Turret',\r\n                i18n_en_tooltip = 'Ultimate BUILDPOWER! For the legendary commander',\r\n            },\r\n        })\r\n\r\n        -----------------------------------------------------------------------\r\n        -- Storage Units (T3 & T4)\r\n        -----------------------------------------------------------------------\r\n\r\n        -- Metal Storage\r\n        local mStorBase = isLeg and 'legamstor' or faction .. 'uwadvms'\r\n\r\n        -- T3 Metal Storage\r\n        addNewMergedUnitDef(\r\n            mStorBase,\r\n            isLeg and 'legamstort3' or faction .. 'uwadvmst3',\r\n            {\r\n                metalstorage = 30000,\r\n                metalcost = 4200,\r\n                energycost = 231150,\r\n                buildtime = 142800,\r\n                health = 53560,\r\n                maxthisunit = 20,\r\n                icontype = 'armuwadves',\r\n                name = factionPrefix[faction] .. 'T3 Metal Storage',\r\n                customparams = {\r\n                    i18n_en_humanname = 'T3 Hardened Metal Storage',\r\n                    i18n_en_tooltip = 'The big metal storage tank for your most precious resources. Chopped chicken!',\r\n                },\r\n            }\r\n        )\r\n\r\n        -- T4 Metal Storage\r\n        addNewMergedUnitDef(\r\n            isLeg and 'legamstort3' or faction .. 'uwadvmst3',\r\n            isLeg and 'legamstort4' or faction .. 'uwadvmst4',\r\n            {\r\n                metalstorage = 100000,\r\n                metalcost = 15000,\r\n                energycost = 800000,\r\n                buildtime = 500000,\r\n                health = 150000,\r\n                name = factionPrefix[faction] .. 'Legendary Metal Storage',\r\n                customparams = {\r\n                    i18n_en_humanname = 'Legendary Hardened Metal Storage',\r\n                    i18n_en_tooltip = 'Pinnacle of resource containment. The gold standard!',\r\n                },\r\n            }\r\n        )\r\n\r\n        -- Energy Storage\r\n        local eStorBase = isLeg and 'legadvestore' or faction .. 'uwadves'\r\n\r\n        -- T3 Energy Storage\r\n        addNewMergedUnitDef(\r\n            eStorBase,\r\n            isLeg and 'legadvestoret3' or faction .. 'advestoret3',\r\n            {\r\n                energystorage = 272000,\r\n                metalcost = 2100,\r\n                energycost = 59000,\r\n                buildtime = 93380,\r\n                health = 49140,\r\n                icontype = 'armuwadves',\r\n                maxthisunit = 20,\r\n                name = factionPrefix[faction] .. 'T3 Energy Storage',\r\n                customparams = {\r\n                    i18n_en_humanname = 'T3 Hardened Energy Storage',\r\n                    i18n_en_tooltip = 'Power! Power! We need power!1!',\r\n                },\r\n            }\r\n        )\r\n\r\n        -- T4 Energy Storage\r\n        addNewMergedUnitDef(\r\n            isLeg and 'legadvestoret3' or faction .. 'advestoret3',\r\n            isLeg and 'legadvestoret4' or faction .. 'advestoret4',\r\n            {\r\n                energystorage = 1000000,\r\n                metalcost = 8000,\r\n                energycost = 250000,\r\n                buildtime = 350000,\r\n                health = 120000,\r\n                name = factionPrefix[faction] .. 'Legendary Energy Storage',\r\n                customparams = {\r\n                    i18n_en_humanname = 'Legendary Hardened Energy Storage',\r\n                    i18n_en_tooltip = 'Vast amounts of energy contained for your legendary projects.',\r\n                },\r\n            }\r\n        )\r\n\r\n        -----------------------------------------------------------------------\r\n        -- Construction Aides (Builders)\r\n        -----------------------------------------------------------------------\r\n\r\n        -- Helper to collect build options\r\n        local function getBuildOptions(builderName)\r\n            local options = {}\r\n            if unitDefs[builderName] and unitDefs[builderName].buildoptions then\r\n                for _, opt in ipairs(unitDefs[builderName].buildoptions) do\r\n                    table.insert(options, opt)\r\n                end\r\n            end\r\n            return options\r\n        end\r\n\r\n        local t3AideOptions = {\r\n            faction .. 'afust3',\r\n            faction .. 'nanotct2',\r\n            faction .. 'nanotct3',\r\n            faction .. 'nanotct4',\r\n            faction .. 'alab',\r\n            faction .. 'avp',\r\n            faction .. 'aap',\r\n            faction .. 'gatet3',\r\n            faction .. 'flak',\r\n            isLeg and 'legadveconvt3' or faction .. 'mmkrt3',\r\n            isLeg and 'legamstort3' or faction .. 'uwadvmst3',\r\n            isLeg and 'legamstort4' or faction .. 'uwadvmst4',\r\n            isLeg and 'legadvestoret3' or faction .. 'advestoret3',\r\n            isLeg and 'legadvestoret4' or faction .. 'advestoret4',\r\n            isLeg and 'legdeflector' or faction .. 'gate',\r\n            isLeg and 'legforti' or faction .. 'fort',\r\n            isArm and 'armshltx' or faction .. 'gant',\r\n            faction .. 'mohot3',\r\n            faction .. 'mohot4',\r\n        }\r\n\r\n        -- Faction exclusive options\r\n        local exclusives = {\r\n            arm = {\r\n                'armamd',\r\n                'armmercury',\r\n                'armbrtha',\r\n                'armminivulc',\r\n                'armvulc',\r\n                'armanni',\r\n                'armannit3',\r\n                'armlwall',\r\n                'armannit4',\r\n            },\r\n            cor = {\r\n                'corfmd',\r\n                'corscreamer',\r\n                'cordoomt3',\r\n                'corbuzz',\r\n                'corminibuzz',\r\n                'corint',\r\n                'cordoom',\r\n                'corhllllt',\r\n                'cormwall',\r\n                'cordoomt4',\r\n            },\r\n            leg = {\r\n                'legabm',\r\n                'legstarfall',\r\n                'legministarfall',\r\n                'leglraa',\r\n                'legbastion',\r\n                'legrwall',\r\n                'leglrpc',\r\n                'legbastiont4',\r\n                'legapopupdef',\r\n                'legdtf',\r\n            },\r\n        }\r\n        for _, opt in ipairs(exclusives[faction] or {}) do\r\n            table.insert(t3AideOptions, opt)\r\n        end\r\n\r\n        -- Taxed Gantries\r\n        local taxedMap = {\r\n            arm = { 'corgant', 'leggant' },\r\n            cor = { 'armshltx', 'leggant' },\r\n            leg = { 'armshltx', 'corgant' },\r\n        }\r\n        for _, g in ipairs(taxedMap[faction] or {}) do\r\n            table.insert(t3AideOptions, g .. '_taxed')\r\n        end\r\n\r\n        -- Ground Aide T3\r\n        addNewMergedUnitDef(faction .. 'decom', faction .. 't3aide', {\r\n            builddistance = 350,\r\n            buildtime = 140000,\r\n            energycost = 200000,\r\n            energyupkeep = 2000,\r\n            health = 10000,\r\n            metalcost = 12600,\r\n            speed = 85,\r\n            workertime = 6000,\r\n            name = factionPrefix[faction] .. 'Epic Aide',\r\n            customparams = {\r\n                techlevel = 3,\r\n                unitgroup = 'buildert3',\r\n                i18n_en_humanname = 'Epic Ground Construction Aide',\r\n            },\r\n            buildoptions = t3AideOptions,\r\n        })\r\n\r\n        -- Ground Aide T4\r\n        local t4AideOptions = tableMerge({}, t3AideOptions)\r\n        table.insert(t4AideOptions, faction .. 'afust4')\r\n        local baseConv = isLeg and 'legadveconv' or (faction .. 'mmkr')\r\n        table.insert(t4AideOptions, baseConv .. 't4')\r\n\r\n        addNewMergedUnitDef(faction .. 't3aide', faction .. 't4aide', {\r\n            buildtime = 420000,\r\n            energycost = 600000,\r\n            energyupkeep = 6000,\r\n            health = 25000,\r\n            metalcost = 38000,\r\n            speed = 95,\r\n            workertime = 8000,\r\n            name = factionPrefix[faction] .. 'Legendary Aide',\r\n            customparams = {\r\n                techlevel = 4,\r\n                unitgroup = 'buildert4',\r\n                i18n_en_humanname = 'Legendary Ground Construction Aide',\r\n            },\r\n            buildoptions = t4AideOptions,\r\n        })\r\n\r\n        -- Air Aide T3\r\n        addNewMergedUnitDef('armfify', faction .. 't3airaide', {\r\n            cruisealtitude = 3000,\r\n            builddistance = 1750,\r\n            buildtime = 140000,\r\n            energycost = 200000,\r\n            health = 1100,\r\n            metalcost = 13400,\r\n            speed = 25,\r\n            workertime = 1600,\r\n            name = factionPrefix[faction] .. 'Epic Aide',\r\n            customparams = {\r\n                techlevel = 3,\r\n                unitgroup = 'buildert3',\r\n                i18n_en_humanname = 'Epic Air Construction Aide',\r\n            },\r\n            buildoptions = t3AideOptions,\r\n        })\r\n\r\n        -- Air Aide T4\r\n        addNewMergedUnitDef(faction .. 't3airaide', faction .. 't4airaide', {\r\n            buildtime = 420000,\r\n            energycost = 600000,\r\n            energyupkeep = 6000,\r\n            health = 2750,\r\n            metalcost = 40000,\r\n            speed = 30,\r\n            workertime = 3200,\r\n            name = factionPrefix[faction] .. 'Legendary Aide',\r\n            customparams = {\r\n                techlevel = 4,\r\n                unitgroup = 'buildert4',\r\n                i18n_en_humanname = 'Legendary Air Construction Aide',\r\n            },\r\n            buildoptions = t4AideOptions,\r\n        })\r\n\r\n        -----------------------------------------------------------------------\r\n        -- Faction Gantry & Taxed Gantry Logic\r\n        -----------------------------------------------------------------------\r\n        local gantryBase = isArm and 'armshltx'\r\n            or isCor and 'corgant'\r\n            or 'leggant'\r\n        unitDefs[gantryBase].maxthisunit = 1\r\n        unitDefs[faction .. 'apt3'].maxthisunit = 1\r\n\r\n        -- Add Taxed versions\r\n        local baseDef = unitDefs[gantryBase]\r\n        addNewMergedUnitDef(gantryBase, gantryBase .. '_taxed', {\r\n            energycost = baseDef.energycost * 1.5,\r\n            metalcost = baseDef.metalcost * 1.5,\r\n            name = factionPrefix[faction] .. 'Experimental Gantry Taxed',\r\n            customparams = {\r\n                i18n_en_humanname = factionPrefix[faction]\r\n                    .. 'Experimental Gantry Taxed',\r\n            },\r\n        })\r\n\r\n        -- Ensure aides are in gantry build options\r\n        for _, f in pairs({ gantryBase, faction .. 'apt3' }) do\r\n            if unitDefs[f] then\r\n                unitDefs[f].buildoptions = unitDefs[f].buildoptions or {}\r\n                local suffix = (f == gantryBase) and 'aide' or 'airaide'\r\n                for _, tier in ipairs({ 't3', 't4' }) do\r\n                    local aideName = faction .. tier .. suffix\r\n                    if\r\n                        not tableContains(unitDefs[f].buildoptions, aideName)\r\n                    then\r\n                        table.insert(unitDefs[f].buildoptions, aideName)\r\n                    end\r\n                end\r\n            end\r\n        end\r\n    end\r\nend\r\n"
        },
        {
            "path": "lua/cross-faction-t2.lua",
            "data": "-- Cross Faction Tax 70%\r\n-- Authors: TetrisCo\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\ndo\r\n    local unitDefs, tax, t2Factories, taxedT2Factories, unitI18N, _taxed, taxedTitlePostfix =\r\n        UnitDefs or {},\r\n        1.7,\r\n        {},\r\n        {},\r\n        Json.decode(VFS.LoadFile('language/en/units.json')),\r\n        '_taxed',\r\n        ' (Taxed)'\r\n\r\n    for name, def in pairs(unitDefs) do\r\n        if\r\n            def.customparams\r\n            and def.customparams.subfolder\r\n            and (def.customparams.subfolder:match 'Fact' or def.customparams.subfolder:match 'Lab')\r\n            and def.customparams.techlevel == 2\r\n        then\r\n            local unitTitle = unitI18N and unitI18N.units.names[name] or name\r\n            t2Factories[name] = 1\r\n            taxedT2Factories[name .. _taxed] = table.merge(def, {\r\n                energycost = def.energycost * tax,\r\n                icontype = name,\r\n                metalcost = def.metalcost * tax,\r\n                name = unitTitle .. taxedTitlePostfix,\r\n                customparams = {\r\n                    i18n_en_humanname = unitTitle .. taxedTitlePostfix,\r\n                    i18n_en_tooltip = unitI18N\r\n                            and unitI18N.units.descriptions[name]\r\n                        or name,\r\n                },\r\n            })\r\n        end\r\n    end\r\n\r\n    for builderName, T1T2BuilderDef in pairs(unitDefs) do\r\n        if T1T2BuilderDef.buildoptions then\r\n            for _, buildoption in pairs(T1T2BuilderDef.buildoptions) do\r\n                if t2Factories[buildoption] then -- has non-cross-faction T2 factory\r\n                    for _, faction in pairs { 'arm', 'cor', 'leg' } do\r\n                        local crossfactionTaxedOption = faction\r\n                            .. buildoption:sub(4)\r\n                            .. _taxed\r\n                        if\r\n                            buildoption:sub(1, 3) ~= faction\r\n                            and taxedT2Factories[crossfactionTaxedOption]\r\n                        then\r\n                            unitDefs[builderName].buildoptions[#unitDefs[builderName].buildoptions + 1] =\r\n                                crossfactionTaxedOption\r\n                        end\r\n                    end\r\n                end\r\n            end\r\n        end\r\n    end\r\n\r\n    table.mergeInPlace(unitDefs, taxedT2Factories)\r\nend\r\n"
        },
        {
            "path": "lua/defences-t4.lua",
            "data": "-- T4 Defences NuttyB version\r\n-- Authors: Hedgehogzs\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\ndo\r\n    local unitDefs, tableMerge = UnitDefs or {}, table.merge\r\n\r\n    local function ensureBuildOption(builderName, optionName)\r\n        local builder = unitDefs[builderName]\r\n        local optionDef = optionName and unitDefs[optionName]\r\n        if not builder or not optionDef then\r\n            return\r\n        end\r\n\r\n        builder.buildoptions = builder.buildoptions or {}\r\n        for i = 1, #builder.buildoptions do\r\n            if builder.buildoptions[i] == optionName then\r\n                return\r\n            end\r\n        end\r\n\r\n        builder.buildoptions[#builder.buildoptions + 1] = optionName\r\n    end\r\n\r\n    -- Legendary Pulsar\r\n    local legPulsarName = 'armannit4'\r\n    unitDefs[legPulsarName] = tableMerge(unitDefs['armannit3'], {\r\n        name = 'Legendary Pulsar',\r\n        description = 'A pinnacle of Armada engineering that fires devastating, rapid-fire tachyon bolts.',\r\n        buildtime = 300000,\r\n        health = 30000,\r\n        metalcost = 43840,\r\n        energycost = 1096000,\r\n        icontype = 'armannit3',\r\n        customparams = {\r\n            i18n_en_humanname = 'Legendary Pulsar',\r\n            i18n_en_tooltip = 'Fires devastating, rapid-fire tachyon bolts.',\r\n            techlevel = 4,\r\n        },\r\n        weapondefs = {\r\n            tachyon_burst_cannon = {\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                name = 'Tachyon Burst Cannon',\r\n                weapontype = 'LaserCannon',\r\n                rgbcolor = '1 0 1',\r\n                burst = 3,\r\n                burstrate = 0.40,\r\n                reloadtime = 5,\r\n                accuracy = 400,\r\n                areaofeffect = 12,\r\n                range = 1800,\r\n                energypershot = 12000,\r\n                turret = true,\r\n                soundstart = 'annigun1',\r\n                soundhit = 'xplolrg3',\r\n                size = 6,\r\n                impulsefactor = 0,\r\n                weaponvelocity = 3100,\r\n                thickness = 10,\r\n                laserflaresize = 8,\r\n                texture3 = 'largebeam',\r\n                tilelength = 150,\r\n                tolerance = 10000,\r\n                beamtime = 3,\r\n                explosiongenerator = 'custom:tachyonshot',\r\n                damage = {\r\n                    default = 8000,\r\n                },\r\n                allowNonBlockingAim = true,\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                badtargetcategory = 'VTOL GROUNDSCOUT',\r\n                def = 'tachyon_burst_cannon',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n        },\r\n    })\r\n\r\n    -- Add to build options\r\n    local builders_arm = {\r\n        'armaca',\r\n        'armack',\r\n        'armacsub',\r\n        'armacv',\r\n        'armt3airaide',\r\n        'armt3aide',\r\n    }\r\n\r\n    for i = 3, 10 do\r\n        builders_arm[#builders_arm + 1] = 'armcomlvl' .. i\r\n    end\r\n    for _, builder_name in pairs(builders_arm) do\r\n        ensureBuildOption(builder_name, legPulsarName)\r\n    end\r\n\r\n    -- Legendary Bastion\r\n    local legBastionName = 'legbastiont4'\r\n    unitDefs[legBastionName] = tableMerge(unitDefs['legbastion'], {\r\n        name = 'Legendary Bastion',\r\n        description = 'The ultimate defensive emplacement. Projects a devastating, pulsating heatray.',\r\n        health = 22000,\r\n        metalcost = 65760,\r\n        energycost = 1986500,\r\n        buildtime = 180000,\r\n        footprintx = 6,\r\n        footprintz = 6,\r\n        icontype = 'legbastion',\r\n        objectname = 'scavs/scavbeacon_t4.s3o',\r\n        script = 'scavs/scavbeacon.cob',\r\n        buildpic = 'scavengers/SCAVBEACON.DDS',\r\n        damagemodifier = 0.20,\r\n        customparams = {\r\n            i18n_en_humanname = 'Legendary Bastion',\r\n            i18n_en_tooltip = 'Projects a devastating, pulsating purple heatray.',\r\n            maxrange = 1450,\r\n            techlevel = 4,\r\n        },\r\n        weapondefs = {\r\n            legendary_bastion_ray = {\r\n                areaofeffect = 24,\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                beamtime = 0.3,\r\n                camerashake = 0,\r\n                corethickness = 0.3,\r\n                craterareaofeffect = 120,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                edgeeffectiveness = 0.45,\r\n                energypershot = 3000,\r\n                explosiongenerator = 'custom:laserhit-medium-purple',\r\n                firestarter = 90,\r\n                firetolerance = 300,\r\n                impulsefactor = 0,\r\n                laserflaresize = 2,\r\n                name = 'Legendary Heat Ray',\r\n                noselfdamage = true,\r\n                predictboost = 0.3,\r\n                proximitypriority = 1,\r\n                range = 1450,\r\n                reloadtime = 0.3,\r\n                rgbcolor = '1.0 0.2 1.0',\r\n                rgbcolor2 = '0.9 1.0 0.5',\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'banthie2',\r\n                soundstartvolume = 25,\r\n                soundtrigger = 1,\r\n                thickness = 5.5,\r\n                turret = true,\r\n                weapontype = 'BeamLaser',\r\n                weaponvelocity = 1500,\r\n                allowNonBlockingAim = true,\r\n                damage = {\r\n                    default = 2500,\r\n                    vtol = 15,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                badtargetcategory = 'VTOL GROUNDSCOUT',\r\n                def = 'legendary_bastion_ray',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n        },\r\n    })\r\n\r\n    -- Add to build options\r\n    local builders_leg = {\r\n        'legaca',\r\n        'legack',\r\n        'legacsub',\r\n        'legacv',\r\n        'legt3airaide',\r\n        'legt3aide',\r\n    }\r\n\r\n    for i = 3, 10 do\r\n        builders_leg[#builders_leg + 1] = 'legcomlvl' .. i\r\n    end\r\n    for _, builder_name in pairs(builders_leg) do\r\n        ensureBuildOption(builder_name, legBastionName)\r\n    end\r\n\r\n    -- Legendary Bulwark\r\n    local legBulwarkName = 'cordoomt4'\r\n    unitDefs[legBulwarkName] = tableMerge(unitDefs['cordoomt3'], {\r\n        name = 'Legendary Bulwark',\r\n        description = 'A pinnacle of defensive technology, the Legendary Bulwark annihilates all who approach.',\r\n        buildtime = 250000,\r\n        health = 42000,\r\n        metalcost = 61650,\r\n        energycost = 1712500,\r\n        damagemodifier = 0.15,\r\n        energystorage = 5000,\r\n        radardistance = 1400,\r\n        sightdistance = 1100,\r\n        icontype = 'cordoomt3',\r\n        customparams = {\r\n            i18n_en_humanname = 'Legendary Bulwark',\r\n            i18n_en_tooltip = 'The ultimate defensive structure.',\r\n            paralyzemultiplier = 0.2,\r\n            techlevel = 4,\r\n        },\r\n        weapondefs = {\r\n            legendary_overload_scatter = {\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                name = 'Overload Scatter Beamer',\r\n                weapontype = 'BeamLaser',\r\n                range = 1000,\r\n                reloadtime = 0.1,\r\n                sprayangle = 2000,\r\n                projectiles = 12,\r\n                rgbcolor = '0.8 0.1 1.0',\r\n                accuracy = 50,\r\n                areaofeffect = 8,\r\n                beamdecay = 0.05,\r\n                beamtime = 0.1,\r\n                beamttl = 1,\r\n                corethickness = 0.05,\r\n                burnblow = true,\r\n                cylindertargeting = 1,\r\n                edgeeffectiveness = 0.15,\r\n                explosiongenerator = 'custom:laserhit-medium-purple',\r\n                firestarter = 100,\r\n                impulsefactor = 0.123,\r\n                intensity = 0.3,\r\n                laserflaresize = 11.35,\r\n                noselfdamage = true,\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'beamershot2',\r\n                tolerance = 5000,\r\n                thickness = 2,\r\n                turret = true,\r\n                weaponvelocity = 1000,\r\n                damage = {\r\n                    default = 600,\r\n                },\r\n            },\r\n            legendary_heat_ray = {\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                name = 'Armageddon Heat Ray',\r\n                weapontype = 'BeamLaser',\r\n                range = 1300,\r\n                reloadtime = 4.0,\r\n                areaofeffect = 72,\r\n                beamtime = 0.6,\r\n                cameraShake = 350,\r\n                corethickness = 0.40,\r\n                craterareaofeffect = 72,\r\n                energypershot = 1200,\r\n                explosiongenerator = 'custom:genericshellexplosion-medium-beam',\r\n                impulsefactor = 0,\r\n                largebeamlaser = true,\r\n                laserflaresize = 8.8,\r\n                noselfdamage = true,\r\n                rgbcolor = '0.9 1.0 0.5',\r\n                rgbcolor2 = '0.8 0 0',\r\n                scrollspeed = 5,\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'heatray2xl',\r\n                soundtrigger = 1,\r\n                thickness = 7,\r\n                tolerance = 10000,\r\n                turret = true,\r\n                weaponvelocity = 1800,\r\n                damage = {\r\n                    default = 9000,\r\n                    commanders = 1350,\r\n                },\r\n            },\r\n            legendary_point_defense = {\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                name = 'Point Defense Laser',\r\n                weapontype = 'BeamLaser',\r\n                range = 750,\r\n                reloadtime = 0.5,\r\n                areaofeffect = 12,\r\n                beamtime = 0.3,\r\n                corethickness = 0.32,\r\n                energypershot = 500,\r\n                explosiongenerator = 'custom:laserhit-large-blue',\r\n                firestarter = 90,\r\n                impactonly = 1,\r\n                impulsefactor = 0,\r\n                largebeamlaser = true,\r\n                laserflaresize = 8.8,\r\n                noselfdamage = true,\r\n                proximitypriority = 0,\r\n                rgbcolor = '0 0 1',\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'annigun1',\r\n                soundtrigger = 1,\r\n                texture3 = 'largebeam',\r\n                thickness = 5.5,\r\n                tilelength = 150,\r\n                tolerance = 10000,\r\n                turret = true,\r\n                weaponvelocity = 1500,\r\n                damage = {\r\n                    default = 450,\r\n                    commanders = 999,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                def = 'legendary_overload_scatter',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n            [2] = {\r\n                def = 'legendary_heat_ray',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n            [3] = {\r\n                def = 'legendary_point_defense',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n        },\r\n    })\r\n\r\n    -- Add to build options\r\n    local builders_cor = {\r\n        'coraca',\r\n        'corack',\r\n        'coracsub',\r\n        'coracv',\r\n        'cort3airaide',\r\n        'cort3aide',\r\n    }\r\n\r\n    for i = 3, 10 do\r\n        builders_cor[#builders_cor + 1] = 'corcomlvl' .. i\r\n    end\r\n    for _, builder_name in pairs(builders_cor) do\r\n        ensureBuildOption(builder_name, legBulwarkName)\r\n    end\r\nend\r\n"
        },
        {
            "path": "lua/eco-mex-upgrades.lua",
            "data": "-- Metal Extractor Upgrades (T3 & T4)\r\n-- Authors: NineLEL\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\ndo\r\n    local unitDefs, tableMerge = UnitDefs or {}, table.merge\r\n\r\n    local FACTION_DATA = {\r\n        arm = { prefix = 'Armada ', base = 'armshockwave' },\r\n        cor = { prefix = 'Cortex ', base = 'cormexp' },\r\n        leg = { prefix = 'Legion ', base = 'legmohocon' },\r\n    }\r\n\r\n    local WEAPON_DEFS = {\r\n        arm = {\r\n            armmohot3_emp = {\r\n                areaofeffect = 200,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                edgeeffectiveness = 0.15,\r\n                energypershot = 80,\r\n                explosiongenerator = 'custom:EMP_FLASH',\r\n                firestarter = 0,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                intensity = 0.5,\r\n                name = 'Epic EMP Cannon',\r\n                noselfdamage = true,\r\n                paralyzer = true,\r\n                paralyzetime = 6,\r\n                range = 600,\r\n                reloadtime = 1,\r\n                rgbcolor = '0.9 0.9 0',\r\n                soundhit = 'empxplp2',\r\n                soundstart = 'hackshot',\r\n                turret = true,\r\n                weapontype = 'Cannon',\r\n                weaponvelocity = 540,\r\n                damage = {\r\n                    default = 1200,\r\n                },\r\n            },\r\n            armmohot4_emp = {\r\n                areaofeffect = 320,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                edgeeffectiveness = 0.25,\r\n                energypershot = 250,\r\n                explosiongenerator = 'custom:EMP_FLASH',\r\n                firestarter = 0,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                intensity = 0.8,\r\n                name = 'Legendary EMP Blast',\r\n                noselfdamage = true,\r\n                paralyzer = true,\r\n                paralyzetime = 10,\r\n                range = 850,\r\n                reloadtime = 0.8,\r\n                rgbcolor = '1 1 0',\r\n                soundhit = 'empxplp2',\r\n                soundstart = 'hackshot',\r\n                turret = true,\r\n                weapontype = 'Cannon',\r\n                weaponvelocity = 650,\r\n                damage = {\r\n                    default = 2500,\r\n                },\r\n            },\r\n        },\r\n        cor = {\r\n            cormoho_rocket = {\r\n                areaofeffect = 128,\r\n                avoidfeature = false,\r\n                burst = 5,\r\n                burstrate = 0.3,\r\n                cegtag = 'missiletrailsmall-red',\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                edgeeffectiveness = 0.15,\r\n                explosiongenerator = 'custom:FLASH96',\r\n                firestarter = 70,\r\n                flighttime = 1.3,\r\n                impulseboost = 0.123,\r\n                impulsefactor = 0.123,\r\n                impactonly = true,\r\n                model = 'missile.s3o',\r\n                name = 'Epic Barrage Rocket',\r\n                noselfdamage = true,\r\n                range = 750,\r\n                reloadtime = 5,\r\n                rgbcolor = '1 0.5 0.2',\r\n                smoketrail = true,\r\n                soundhit = 'xplomed2',\r\n                soundstart = 'rocklit3',\r\n                startvelocity = 450,\r\n                texture1 = 'null',\r\n                texture2 = 'smoketrailbar',\r\n                tolerance = 6000,\r\n                tracks = true,\r\n                turnrate = 12000,\r\n                turret = true,\r\n                weaponacceleration = 150,\r\n                weapontype = 'MissileLauncher',\r\n                weaponvelocity = 750,\r\n                damage = {\r\n                    default = 400,\r\n                },\r\n            },\r\n            corsumo_weapon = {\r\n                areaofeffect = 12,\r\n                avoidfeature = false,\r\n                beamtime = 0.15,\r\n                corethickness = 0.2,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                edgeeffectiveness = 0.15,\r\n                energypershot = 100,\r\n                explosiongenerator = 'custom:laserhit-medium-red',\r\n                firestarter = 90,\r\n                impactonly = true,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                name = 'Epic High Energy Laser',\r\n                noselfdamage = true,\r\n                range = 750,\r\n                reloadtime = 0.4,\r\n                rgbcolor = '1 0 0',\r\n                soundhit = 'xplomed2',\r\n                soundstart = 'lasrhvy3',\r\n                targetmoveerror = 0.2,\r\n                thickness = 3,\r\n                turret = true,\r\n                weapontype = 'BeamLaser',\r\n                weaponvelocity = 1000,\r\n                damage = {\r\n                    default = 350,\r\n                },\r\n            },\r\n            cormoho_rocket_t4 = {\r\n                areaofeffect = 160,\r\n                avoidfeature = false,\r\n                burst = 8,\r\n                burstrate = 0.2,\r\n                cegtag = 'missiletrailsmall-red',\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                edgeeffectiveness = 0.2,\r\n                explosiongenerator = 'custom:FLASH96',\r\n                firestarter = 80,\r\n                flighttime = 1.5,\r\n                impulseboost = 0.15,\r\n                impulsefactor = 0.15,\r\n                impactonly = true,\r\n                model = 'missile.s3o',\r\n                name = 'Legendary Barrage Rocket',\r\n                noselfdamage = true,\r\n                range = 1000,\r\n                reloadtime = 4,\r\n                rgbcolor = '1 0.4 0.1',\r\n                smoketrail = true,\r\n                soundhit = 'xplomed2',\r\n                soundstart = 'rocklit3',\r\n                startvelocity = 500,\r\n                texture1 = 'null',\r\n                texture2 = 'smoketrailbar',\r\n                tolerance = 6000,\r\n                tracks = true,\r\n                turnrate = 15000,\r\n                turret = true,\r\n                weaponacceleration = 200,\r\n                weapontype = 'MissileLauncher',\r\n                weaponvelocity = 900,\r\n                damage = {\r\n                    default = 750,\r\n                },\r\n            },\r\n            corsumo_weapon_t4 = {\r\n                areaofeffect = 16,\r\n                avoidfeature = false,\r\n                beamtime = 0.2,\r\n                corethickness = 0.3,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                edgeeffectiveness = 0.2,\r\n                energypershot = 250,\r\n                explosiongenerator = 'custom:laserhit-medium-red',\r\n                firestarter = 100,\r\n                impactonly = true,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                name = 'Legendary Overclocked Laser',\r\n                noselfdamage = true,\r\n                range = 950,\r\n                reloadtime = 0.3,\r\n                rgbcolor = '1 0.1 0',\r\n                soundhit = 'xplomed2',\r\n                soundstart = 'lasrhvy3',\r\n                targetmoveerror = 0.1,\r\n                thickness = 4.5,\r\n                turret = true,\r\n                weapontype = 'BeamLaser',\r\n                weaponvelocity = 1200,\r\n                damage = {\r\n                    default = 650,\r\n                },\r\n            },\r\n        },\r\n    }\r\n\r\n    local WEAPONS = {\r\n        arm = {\r\n            t3 = {\r\n                [1] = {\r\n                    def = 'armmohot3_emp',\r\n                    onlytargetcategory = 'NOTSUB',\r\n                },\r\n            },\r\n            t4 = {\r\n                [1] = {\r\n                    def = 'armmohot4_emp',\r\n                    onlytargetcategory = 'NOTSUB',\r\n                },\r\n            },\r\n        },\r\n        cor = {\r\n            t3 = {\r\n                [1] = {\r\n                    def = 'cormoho_rocket',\r\n                    onlytargetcategory = 'NOTSUB',\r\n                },\r\n                [2] = {\r\n                    def = 'corsumo_weapon',\r\n                    onlytargetcategory = 'NOTSUB',\r\n                },\r\n            },\r\n            t4 = {\r\n                [1] = {\r\n                    def = 'cormoho_rocket_t4',\r\n                    onlytargetcategory = 'NOTSUB',\r\n                },\r\n                [2] = {\r\n                    def = 'corsumo_weapon_t4',\r\n                    onlytargetcategory = 'NOTSUB',\r\n                },\r\n            },\r\n        },\r\n    }\r\n\r\n    local function addNewMergedUnitDef(baseUnit, newUnit, mergeProps)\r\n        if unitDefs[baseUnit] and not unitDefs[newUnit] then\r\n            unitDefs[newUnit] = tableMerge(unitDefs[baseUnit], mergeProps)\r\n        end\r\n    end\r\n\r\n    local factions = { 'arm', 'cor', 'leg' }\r\n    for _, faction in ipairs(factions) do\r\n        local data = FACTION_DATA[faction]\r\n\r\n        -- Tier 3 (Epic)\r\n        local t3MexName = faction .. 'mohot3'\r\n        local t3MergeProps = {\r\n            metalcost = 4000,\r\n            energycost = 32000,\r\n            buildtime = 80000,\r\n            health = 3600,\r\n            extractsmetal = 0.008,\r\n            canattack = true,\r\n            canstop = true,\r\n            name = data.prefix .. 'Epic Metal Extractor',\r\n            customparams = {\r\n                techlevel = 3,\r\n                unitgroup = 'eco',\r\n                i18n_en_humanname = 'Epic Metal Extractor',\r\n                i18n_en_tooltip = 'Extreme efficiency metal extraction. Chopped chicken!',\r\n            },\r\n            weapondefs = WEAPON_DEFS[faction],\r\n            weapons = WEAPONS[faction] and WEAPONS[faction].t3 or nil,\r\n        }\r\n\r\n        if faction == 'arm' then\r\n            t3MergeProps.cancloak = true\r\n            t3MergeProps.cloakcost = 20\r\n            t3MergeProps.mincloakdistance = 150\r\n            t3MergeProps.initCloaked = true\r\n        end\r\n        addNewMergedUnitDef(data.base, t3MexName, t3MergeProps)\r\n\r\n        -- Tier 4 (Legendary)\r\n        local t4MexName = faction .. 'mohot4'\r\n        local t4MergeProps = {\r\n            metalcost = 25000,\r\n            energycost = 250000,\r\n            buildtime = 500000,\r\n            health = 9500,\r\n            extractsmetal = 0.024,\r\n            canattack = true,\r\n            canstop = true,\r\n            name = data.prefix .. 'Legendary Metal Extractor',\r\n            customparams = {\r\n                techlevel = 4,\r\n                unitgroup = 'eco',\r\n                i18n_en_humanname = 'Legendary Metal Extractor',\r\n                i18n_en_tooltip = 'Pinnacle of metal extraction technology. The gold standard!',\r\n            },\r\n            weapondefs = WEAPON_DEFS[faction],\r\n            weapons = WEAPONS[faction] and WEAPONS[faction].t4 or nil,\r\n        }\r\n\r\n        if faction == 'arm' then\r\n            t4MergeProps.cancloak = true\r\n            t4MergeProps.cloakcost = 50\r\n            t4MergeProps.mincloakdistance = 120\r\n            t4MergeProps.initCloaked = true\r\n        end\r\n        addNewMergedUnitDef(t3MexName, t4MexName, t4MergeProps)\r\n    end\r\nend\r\n"
        },
        {
            "path": "lua/eco-t3.lua",
            "data": "-- T3 Eco builtin v6\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\ndo\r\n    local unitDefs, cons =\r\n        UnitDefs or {}, {\r\n            'armack',\r\n            'armaca',\r\n            'armacv',\r\n            'corack',\r\n            'coraca',\r\n            'coracv',\r\n            'legack',\r\n            'legaca',\r\n            'legacv',\r\n        }\r\n\r\n    for _, factionMM in pairs({ 'armmmkrt3', 'cormmkrt3', 'legadveconvt3' }) do\r\n        table.mergeInPlace(\r\n            unitDefs[factionMM],\r\n            { footprintx = 6, footprintz = 6 }\r\n        )\r\n    end\r\n\r\n    for _, builderName in pairs(cons) do\r\n        local faction, nBuildOptions =\r\n            builderName:sub(1, 3), #unitDefs[builderName].buildoptions\r\n        unitDefs[builderName].buildoptions[nBuildOptions + 1] = faction\r\n            .. 'afust3'\r\n        unitDefs[builderName].buildoptions[nBuildOptions + 2] = faction == 'leg'\r\n                and 'legadveconvt3'\r\n            or faction .. 'mmkrt3'\r\n    end\r\n\r\n    do\r\n        local builderName = 'legck'\r\n        local nBuildOptions = #unitDefs[builderName].buildoptions\r\n        unitDefs[builderName].buildoptions[nBuildOptions + 1] = 'legdtf'\r\n    end\r\n\r\n    for _, unitName in pairs({ 'coruwadves', 'legadvestore' }) do\r\n        table.mergeInPlace(\r\n            unitDefs[unitName],\r\n            { footprintx = 4, footprintz = 4 }\r\n        )\r\n    end\r\nend\r\n"
        },
        {
            "path": "lua/eco-t4.lua",
            "data": "-- T4 Eco (Legendary Fusion & Metal Converters)\r\n-- Authors: jackie188, Insider\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\ndo\r\n    local unitDefs, tableMerge = UnitDefs or {}, table.merge\r\n\r\n    local function ensureBuildOption(builderName, optionName)\r\n        local builder = unitDefs[builderName]\r\n        local optionDef = optionName and unitDefs[optionName]\r\n        if not builder or not optionDef then\r\n            return\r\n        end\r\n\r\n        builder.buildoptions = builder.buildoptions or {}\r\n        for i = 1, #builder.buildoptions do\r\n            if builder.buildoptions[i] == optionName then\r\n                return\r\n            end\r\n        end\r\n\r\n        builder.buildoptions[#builder.buildoptions + 1] = optionName\r\n    end\r\n\r\n    local factions = { 'arm', 'cor', 'leg' }\r\n    local factionNames = {\r\n        arm = 'Armada ',\r\n        cor = 'Cortex ',\r\n        leg = 'Legion ',\r\n    }\r\n\r\n    local function cloneUnit(sourceUnit, targetUnit, overrides)\r\n        if unitDefs[sourceUnit] and not unitDefs[targetUnit] then\r\n            unitDefs[targetUnit] = tableMerge(unitDefs[sourceUnit], overrides)\r\n        end\r\n    end\r\n\r\n    local newUnitNames = {}\r\n\r\n    -- Create Legendary metal converters and fusion reactors for each faction\r\n    for _, faction in ipairs(factions) do\r\n        local isLegion = (faction == 'leg')\r\n\r\n        -- Metal Maker base unit name differs for Legion\r\n        local baseConverterName = isLegion and 'legadveconv'\r\n            or (faction .. 'mmkr')\r\n        local templateConverterName = baseConverterName .. 't3'\r\n        local newConverterName = baseConverterName .. 't4'\r\n        local metalMakerDef = unitDefs[templateConverterName]\r\n\r\n        -- T4 Legendary Energy Converter\r\n        if metalMakerDef then\r\n            local t4Multiplier = 2.0\r\n            cloneUnit(templateConverterName, newConverterName, {\r\n                metalcost = math.ceil(metalMakerDef.metalcost * t4Multiplier),\r\n                energycost = math.ceil(metalMakerDef.energycost * t4Multiplier),\r\n                buildtime = math.ceil(metalMakerDef.buildtime * t4Multiplier),\r\n                health = math.ceil(metalMakerDef.health * t4Multiplier * 6),\r\n                customparams = {\r\n                    energyconv_capacity = math.ceil(\r\n                        metalMakerDef.customparams.energyconv_capacity * 2\r\n                    ),\r\n                    energyconv_efficiency = 0.022,\r\n                    buildinggrounddecaldecayspeed = metalMakerDef.customparams.buildinggrounddecaldecayspeed,\r\n                    buildinggrounddecalsizex = metalMakerDef.customparams.buildinggrounddecalsizex,\r\n                    buildinggrounddecalsizey = metalMakerDef.customparams.buildinggrounddecalsizey,\r\n                    buildinggrounddecaltype = metalMakerDef.customparams.buildinggrounddecaltype,\r\n                    model_author = metalMakerDef.customparams.model_author,\r\n                    normaltex = metalMakerDef.customparams.normaltex,\r\n                    removestop = metalMakerDef.customparams.removestop,\r\n                    removewait = metalMakerDef.customparams.removewait,\r\n                    subfolder = metalMakerDef.customparams.subfolder,\r\n                    techlevel = metalMakerDef.customparams.techlevel,\r\n                    unitgroup = metalMakerDef.customparams.unitgroup,\r\n                    usebuildinggrounddecal = metalMakerDef.customparams.usebuildinggrounddecal,\r\n                    i18n_en_humanname = 'Legendary Energy Converter',\r\n                    i18n_en_tooltip = 'Converts 12000 energy into 264 metal per sec (non-explosive)',\r\n                },\r\n                name = 'Legendary Energy Converter',\r\n                buildpic = metalMakerDef.buildpic,\r\n                objectname = metalMakerDef.objectname,\r\n                footprintx = 6,\r\n                footprintz = 6,\r\n                yardmap = metalMakerDef.yardmap,\r\n                script = metalMakerDef.script,\r\n                activatewhenbuilt = metalMakerDef.activatewhenbuilt,\r\n                explodeas = 'largeBuildingexplosiongeneric',\r\n                selfdestructas = 'largeBuildingExplosionGenericSelfd',\r\n                sightdistance = metalMakerDef.sightdistance,\r\n                seismicsignature = metalMakerDef.seismicsignature,\r\n                idleautoheal = metalMakerDef.idleautoheal,\r\n                idletime = metalMakerDef.idletime,\r\n                maxslope = metalMakerDef.maxslope,\r\n                maxwaterdepth = metalMakerDef.maxwaterdepth,\r\n                maxacc = metalMakerDef.maxacc,\r\n                maxdec = metalMakerDef.maxdec,\r\n                corpse = metalMakerDef.corpse,\r\n                canrepeat = metalMakerDef.canrepeat,\r\n            })\r\n\r\n            table.insert(newUnitNames, newConverterName)\r\n        end\r\n\r\n        -- Fusion Reactor base unit\r\n        local baseFusionName = faction .. 'afus'\r\n        local templateFusionName = baseFusionName .. 't3'\r\n        local newFusionName = baseFusionName .. 't4'\r\n        local fusionDef = unitDefs[templateFusionName]\r\n\r\n        -- Legendary Fusion Reactor (200% version)\r\n        if fusionDef then\r\n            cloneUnit(templateFusionName, newFusionName, {\r\n                buildtime = math.ceil(fusionDef.buildtime * 1.8),\r\n                name = 'Legendary Fusion Reactor',\r\n                metalcost = math.ceil(fusionDef.metalcost * 2.0),\r\n                energycost = math.ceil(fusionDef.energycost * 2.0),\r\n                energymake = math.ceil(fusionDef.energymake * 2.4),\r\n                energystorage = math.ceil(fusionDef.energystorage * 6.0),\r\n                health = math.ceil(fusionDef.health * 2.0 * 3),\r\n                buildpic = fusionDef.buildpic,\r\n                collisionvolumeoffsets = fusionDef.collisionvolumeoffsets,\r\n                collisionvolumescales = fusionDef.collisionvolumescales,\r\n                collisionvolumetype = fusionDef.collisionvolumetype,\r\n                damagemodifier = 0.95,\r\n                buildangle = fusionDef.buildangle,\r\n                objectname = fusionDef.objectname,\r\n                footprintx = 12,\r\n                footprintz = 12,\r\n                yardmap = fusionDef.yardmap,\r\n                script = fusionDef.script,\r\n                activatewhenbuilt = fusionDef.activatewhenbuilt,\r\n                explodeas = 'largeBuildingexplosiongeneric',\r\n                selfdestructas = 'largeBuildingExplosionGenericSelfd',\r\n                sightdistance = fusionDef.sightdistance,\r\n                seismicsignature = fusionDef.seismicsignature,\r\n                idleautoheal = math.ceil(fusionDef.idleautoheal * 6),\r\n                idletime = fusionDef.idletime,\r\n                maxslope = fusionDef.maxslope,\r\n                maxwaterdepth = fusionDef.maxwaterdepth,\r\n                maxacc = fusionDef.maxacc,\r\n                maxdec = fusionDef.maxdec,\r\n                corpse = fusionDef.corpse,\r\n                canrepeat = fusionDef.canrepeat,\r\n                customparams = {\r\n                    buildinggrounddecaldecayspeed = 30,\r\n                    buildinggrounddecalsizex = 18,\r\n                    buildinggrounddecalsizey = 18,\r\n                    buildinggrounddecaltype = fusionDef.customparams.buildinggrounddecaltype,\r\n                    model_author = fusionDef.customparams.model_author,\r\n                    normaltex = fusionDef.customparams.normaltex,\r\n                    subfolder = fusionDef.customparams.subfolder,\r\n                    removestop = true,\r\n                    removewait = true,\r\n                    techlevel = 3,\r\n                    unitgroup = 'energy',\r\n                    usebuildinggrounddecal = true,\r\n                    i18n_en_humanname = 'Legendary Fusion Reactor',\r\n                    i18n_en_tooltip = 'Produces 72000 Energy (non-explosive)',\r\n                },\r\n                sfxtypes = {\r\n                    pieceexplosiongenerators = {\r\n                        [1] = 'deathceg2',\r\n                        [2] = 'deathceg3',\r\n                        [3] = 'deathceg4',\r\n                    },\r\n                },\r\n                sounds = {\r\n                    canceldestruct = 'cancel2',\r\n                    underattack = 'warning1',\r\n                    count = {\r\n                        'count6',\r\n                        'count5',\r\n                        'count4',\r\n                        'count3',\r\n                        'count2',\r\n                        'count1',\r\n                    },\r\n                    select = {\r\n                        'fusion2',\r\n                    },\r\n                },\r\n            })\r\n\r\n            table.insert(newUnitNames, newFusionName)\r\n        end\r\n    end\r\n\r\n    -- Add new units to T3 constructor build options\r\n    local builders = {\r\n        'armack',\r\n        'armaca',\r\n        'armacv',\r\n        'armt3airaide',\r\n        'armt3aide',\r\n        'armt4airaide',\r\n        'armt4aide',\r\n        'armnanotct4',\r\n        'corack',\r\n        'coraca',\r\n        'coracv',\r\n        'cort3airaide',\r\n        'cort3aide',\r\n        'cort4airaide',\r\n        'cort4aide',\r\n        'cornanotct4',\r\n        'legack',\r\n        'legaca',\r\n        'legacv',\r\n        'legt3airaide',\r\n        'legt3aide',\r\n        'legt4airaide',\r\n        'legt4aide',\r\n        'legnanotct4',\r\n    }\r\n\r\n    for _, builderName in pairs(builders) do\r\n        local faction = builderName:sub(1, 3)\r\n\r\n        for _, newUnitName in ipairs(newUnitNames) do\r\n            if (newUnitName:sub(1, 3)) == faction then\r\n                ensureBuildOption(builderName, newUnitName)\r\n            end\r\n        end\r\n    end\r\nend\r\n"
        },
        {
            "path": "lua/evocom-arm.lua",
            "data": "-- NuttyB v1.52c Armada Com\r\n-- Authors: ChrispyNut, BackBash\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\n{\r\n    armcom = {\r\n        customparams = {\r\n            evolution_target = 'armcomlvl2',\r\n            evolution_condition = 'timer_global',\r\n            evolution_timer = 420,\r\n            inheritxpratemultiplier = 0.5,\r\n            childreninheritxp = 'TURRET MOBILEBUILT',\r\n            parentsinheritxp = 'TURRET MOBILEBUILT',\r\n        },\r\n        energymake = 100,\r\n        metalmake = 10,\r\n        autoheal = 55,\r\n        health = 4500,\r\n        speed = 41,\r\n        canresurrect = true,\r\n        buildoptions = {\r\n            'armsolar',\r\n            'armwin',\r\n            'armmstor',\r\n            'armestor',\r\n            'armmex',\r\n            'armmakr',\r\n            'armlab',\r\n            'armvp',\r\n            'armap',\r\n            'armeyes',\r\n            'armrad',\r\n            'armdrag',\r\n            'armllt',\r\n            'armrl',\r\n            'armdl',\r\n            'armtide',\r\n            'armuwms',\r\n            'armuwes',\r\n            'armuwmex',\r\n            'armfmkr',\r\n            'armsy',\r\n            'armfdrag',\r\n            'armtl',\r\n            'armfrt',\r\n            'armfrad',\r\n            'armhp',\r\n            'armfhp',\r\n            'armgeo',\r\n            'armamex',\r\n            'armhp',\r\n            'armbeamer',\r\n            'armjamt',\r\n            'armsy',\r\n            'armrectr',\r\n            'armclaw',\r\n        },\r\n        weapondefs = {\r\n            armcomlaser = {\r\n                range = 330,\r\n                rgbcolor = '0.7 1 1',\r\n                soundstart = 'lasrfir1',\r\n                damage = {\r\n                    default = 175,\r\n                },\r\n            },\r\n            old_armsnipe_weapon = {\r\n                areaofeffect = 32,\r\n                avoidfeature = true,\r\n                avoidfriendly = true,\r\n                collidefeature = true,\r\n                collidefriendly = false,\r\n                corethickness = 0.75,\r\n                craterareaofeffect = 0,\r\n                craterboost = 0,\r\n                commandfire = true,\r\n                cratermult = 0,\r\n                cegtag = 'railgun',\r\n                duration = 0.12,\r\n                edgeeffectiveness = 0.85,\r\n                energypershot = 400,\r\n                explosiongenerator = 'custom:laserhit-large-blue',\r\n                firestarter = 100,\r\n                impulseboost = 0.4,\r\n                impulsefactor = 1,\r\n                intensity = 0.8,\r\n                name = 'Long-range g2g armor-piercing rifle',\r\n                range = 550,\r\n                reloadtime = 1,\r\n                rgbcolor = '0 1 1',\r\n                rgbcolor2 = '0 1 1',\r\n                soundhit = 'sniperhit',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'sniper3',\r\n                soundtrigger = true,\r\n                stockpile = true,\r\n                stockpiletime = 7,\r\n                customparams = {\r\n                    stockpilelimit = 10,\r\n                },\r\n                texture1 = 'shot',\r\n                texture2 = 'empty',\r\n                thickness = 4,\r\n                tolerance = 1000,\r\n                turret = true,\r\n                weapontype = 'LaserCannon',\r\n                weaponvelocity = 3000,\r\n                damage = {\r\n                    commanders = 100,\r\n                    default = 4900,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [3] = {\r\n                def = 'old_armsnipe_weapon',\r\n                onlytargetcategory = 'NOTSUB',\r\n            },\r\n        },\r\n    },\r\n    armcomlvl2 = {\r\n        autoheal = 90,\r\n        builddistance = 175,\r\n        canresurrect = true,\r\n        energymake = 315,\r\n        health = 7000,\r\n        speed = 57.5,\r\n        metalmake = 20,\r\n        workertime = 900,\r\n        buildoptions = {\r\n            'armsolar',\r\n            'armwin',\r\n            'armmstor',\r\n            'armestor',\r\n            'armmex',\r\n            'armmakr',\r\n            'armlab',\r\n            'armvp',\r\n            'armap',\r\n            'armeyes',\r\n            'armrad',\r\n            'armdrag',\r\n            'armllt',\r\n            'armrl',\r\n            'armdl',\r\n            'armtide',\r\n            'armuwms',\r\n            'armuwes',\r\n            'armuwmex',\r\n            'armfmkr',\r\n            'armsy',\r\n            'armfdrag',\r\n            'armtl',\r\n            'armfrt',\r\n            'armfrad',\r\n            'armhp',\r\n            'armfhp',\r\n            'armadvsol',\r\n            'armgeo',\r\n            'armamex',\r\n            'armnanotcplat',\r\n            'armhp',\r\n            'armnanotc',\r\n            'armclaw',\r\n            'armbeamer',\r\n            'armhlt',\r\n            'armguard',\r\n            'armferret',\r\n            'armcir',\r\n            'armjamt',\r\n            'armjuno',\r\n            'armsy',\r\n            'armrectr',\r\n        },\r\n        customparams = {\r\n            evolution_target = 'armcomlvl3',\r\n            evolution_condition = 'timer_global',\r\n            evolution_timer = 1320,\r\n        },\r\n        weapondefs = {\r\n            armcomlaser = {\r\n                areaofeffect = 16,\r\n                avoidfeature = false,\r\n                beamtime = 0.1,\r\n                corethickness = 0.1,\r\n                craterareaofeffect = 0,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                cylindertargeting = 1,\r\n                edgeeffectiveness = 1,\r\n                explosiongenerator = 'custom:laserhit-small-red',\r\n                firestarter = 70,\r\n                impactonly = 1,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                laserflaresize = 7.7,\r\n                name = 'Light close-quarters g2g/g2a laser',\r\n                noselfdamage = true,\r\n                range = 425,\r\n                reloadtime = 0.7,\r\n                rgbcolor = '0 1 1',\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'lasrfir1',\r\n                soundtrigger = 1,\r\n                targetmoveerror = 0.05,\r\n                thickness = 4,\r\n                tolerance = 10000,\r\n                turret = true,\r\n                weapontype = 'BeamLaser',\r\n                weaponvelocity = 900,\r\n                damage = {\r\n                    default = 950,\r\n                    VTOL = 150,\r\n                },\r\n            },\r\n            old_armsnipe_weapon = {\r\n                areaofeffect = 42,\r\n                avoidfeature = true,\r\n                avoidfriendly = true,\r\n                collidefeature = true,\r\n                collidefriendly = false,\r\n                corethickness = 0.75,\r\n                craterareaofeffect = 0,\r\n                craterboost = 0,\r\n                commandfire = true,\r\n                cratermult = 0,\r\n                cegtag = 'railgun',\r\n                duration = 0.12,\r\n                edgeeffectiveness = 0.85,\r\n                energypershot = 700,\r\n                explosiongenerator = 'custom:laserhit-large-blue',\r\n                firestarter = 100,\r\n                impulseboost = 0.4,\r\n                impulsefactor = 1,\r\n                intensity = 1,\r\n                name = 'Long-range g2g armor-piercing rifle',\r\n                range = 700,\r\n                reloadtime = 1,\r\n                rgbcolor = '0.2 0.1 1',\r\n                rgbcolor2 = '0.2 0.1 1',\r\n                soundhit = 'sniperhit',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'sniper3',\r\n                soundtrigger = true,\r\n                stockpile = true,\r\n                stockpiletime = 6,\r\n                customparams = {\r\n                    stockpilelimit = 20,\r\n                },\r\n                texture1 = 'shot',\r\n                texture2 = 'empty',\r\n                thickness = 4,\r\n                tolerance = 1000,\r\n                turret = true,\r\n                weapontype = 'LaserCannon',\r\n                weaponvelocity = 3000,\r\n                damage = {\r\n                    commanders = 10,\r\n                    default = 11000,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                def = 'armcomlaser',\r\n                onlytargetcategory = 'NOTSUB',\r\n                fastautoretargeting = true,\r\n            },\r\n            [3] = {\r\n                def = 'old_armsnipe_weapon',\r\n                onlytargetcategory = 'NOTSUB',\r\n            },\r\n        },\r\n    },\r\n    armcomlvl3 = {\r\n        autoheal = 50,\r\n        builddistance = 250,\r\n        canresurrect = true,\r\n        energymake = 2712,\r\n        health = 10000,\r\n        speed = 71.5,\r\n        metalmake = 62,\r\n        workertime = 1500,\r\n        buildoptions = {\r\n            'armanni',\r\n            'armpb',\r\n            'armamb',\r\n            'armmoho',\r\n            'armuwmme',\r\n            'armflak',\r\n            'armmercury',\r\n            'armgate',\r\n            'armsd',\r\n            'armfort',\r\n            'armtarg',\r\n            'armarad',\r\n            'armamd',\r\n            'armveil',\r\n            'armuwadvms',\r\n            'armuwadves',\r\n            'armmmkr',\r\n            'armclaw',\r\n            'armjuno',\r\n            'armuwmex',\r\n            'armhp',\r\n            'armsy',\r\n            'armfdrag',\r\n            'armtl',\r\n            'armfrt',\r\n            'armfrad',\r\n            'armhp',\r\n            'armlab',\r\n            'armvp',\r\n            'armap',\r\n            'armsy',\r\n            'armuwmmm',\r\n            'armuwfus',\r\n            'armplat',\r\n            'armfdrag',\r\n            'armfhlt',\r\n            'armfflak',\r\n            'armatl',\r\n            'armkraken',\r\n            'armnanotcplat',\r\n            'armbrtha',\r\n            'armannit3',\r\n            'armlwall',\r\n            'armnanotct2',\r\n            'armafus',\r\n            'armfus',\r\n            'armckfus',\r\n            'armraz',\r\n            'armzeus',\r\n            'armsnipe',\r\n            'armvang',\r\n            'armrectr',\r\n            'armgatet3',\r\n            'armannit4',\r\n            'armnanotct3',\r\n            'epic_ragnarok',\r\n        },\r\n        customparams = {\r\n            evolution_target = 'armcomlvl4',\r\n            evolution_condition = 'timer_global',\r\n            evolution_timer = 1740,\r\n        },\r\n        weapondefs = {\r\n            old_armsnipe_weapon = {\r\n                areaofeffect = 64,\r\n                avoidfeature = true,\r\n                avoidfriendly = true,\r\n                collidefeature = true,\r\n                collidefriendly = false,\r\n                corethickness = 0.75,\r\n                craterareaofeffect = 0,\r\n                craterboost = 0,\r\n                commandfire = true,\r\n                cratermult = 0,\r\n                cegtag = 'railgun',\r\n                duration = 0.12,\r\n                edgeeffectiveness = 1,\r\n                energypershot = 2000,\r\n                explosiongenerator = 'custom:laserhit-large-blue',\r\n                firestarter = 100,\r\n                impulseboost = 0.4,\r\n                impulsefactor = 1,\r\n                intensity = 1.4,\r\n                name = 'Long-range g2g armor-piercing rifle',\r\n                range = 1250,\r\n                reloadtime = 0.5,\r\n                rgbcolor = '0.4 0.1 0.7',\r\n                rgbcolor2 = '0.4 0.1 0.7',\r\n                soundhit = 'sniperhit',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'sniper3',\r\n                soundtrigger = true,\r\n                stockpile = true,\r\n                stockpiletime = 3,\r\n                customparams = {\r\n                    stockpilelimit = 20,\r\n                },\r\n                texture1 = 'shot',\r\n                texture2 = 'empty',\r\n                thickness = 6,\r\n                tolerance = 1000,\r\n                turret = true,\r\n                weapontype = 'LaserCannon',\r\n                weaponvelocity = 3000,\r\n                damage = {\r\n                    commanders = 10,\r\n                    default = 35000,\r\n                },\r\n            },\r\n            armcomlaser = {\r\n                areaofeffect = 12,\r\n                avoidfeature = false,\r\n                beamtime = 0.1,\r\n                corethickness = 0.1,\r\n                craterareaofeffect = 0,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                cylindertargeting = 1,\r\n                edgeeffectiveness = 1,\r\n                explosiongenerator = 'custom:laserhit-small-red',\r\n                firestarter = 70,\r\n                impactonly = 1,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                laserflaresize = 7.7,\r\n                name = 'Light close-quarters g2g/g2a laser',\r\n                noselfdamage = true,\r\n                range = 500,\r\n                reloadtime = 0.6,\r\n                rgbcolor = '0.1 0 1',\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'lasrcrw2',\r\n                soundtrigger = 1,\r\n                targetmoveerror = 0.05,\r\n                thickness = 6,\r\n                tolerance = 10000,\r\n                turret = true,\r\n                weapontype = 'BeamLaser',\r\n                weaponvelocity = 900,\r\n                damage = {\r\n                    default = 1450,\r\n                    VTOL = 180,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [5] = {\r\n                badtargetcategory = 'MOBILE',\r\n                def = 'armcomlaser',\r\n                onlytargetcategory = 'NOTSUB',\r\n                fastautoretargeting = true,\r\n            },\r\n            [3] = {\r\n                def = 'old_armsnipe_weapon',\r\n                onlytargetcategory = 'NOTSUB',\r\n            },\r\n            [4] = {\r\n                def = '',\r\n            },\r\n            [1] = {\r\n                def = '',\r\n            },\r\n            [6] = {\r\n                def = '',\r\n            },\r\n        },\r\n    },\r\n    armcomlvl4 = {\r\n        autoheal = 150,\r\n        builddistance = 300,\r\n        canresurrect = true,\r\n        energymake = 3112,\r\n        health = 20000,\r\n        speed = 82,\r\n        metalmake = 86,\r\n        workertime = 2000,\r\n        buildoptions = {\r\n            'armanni',\r\n            'armpb',\r\n            'armamb',\r\n            'armmoho',\r\n            'armuwmme',\r\n            'armflak',\r\n            'armmercury',\r\n            'armgate',\r\n            'armsd',\r\n            'armfort',\r\n            'armtarg',\r\n            'armarad',\r\n            'armamd',\r\n            'armveil',\r\n            'armuwadvms',\r\n            'armuwadves',\r\n            'armmmkr',\r\n            'armclaw',\r\n            'armjuno',\r\n            'armuwmex',\r\n            'armhp',\r\n            'armsy',\r\n            'armfdrag',\r\n            'armtl',\r\n            'armfrt',\r\n            'armfrad',\r\n            'armhp',\r\n            'armlab',\r\n            'armvp',\r\n            'armap',\r\n            'armsy',\r\n            'armuwmmm',\r\n            'armuwfus',\r\n            'armplat',\r\n            'armfdrag',\r\n            'armfhlt',\r\n            'armfflak',\r\n            'armatl',\r\n            'armkraken',\r\n            'armnanotcplat',\r\n            'armbrtha',\r\n            'armannit3',\r\n            'armlwall',\r\n            'armnanotct2',\r\n            'armafus',\r\n            'armfus',\r\n            'armckfus',\r\n            'armraz',\r\n            'armzeus',\r\n            'armsnipe',\r\n            'armvang',\r\n            'armrectr',\r\n            'armgatet3',\r\n            'armannit4',\r\n            'armnanotct3',\r\n            'epic_ragnarok',\r\n        },\r\n        weapondefs = {\r\n            old_armsnipe_weapon = {\r\n                areaofeffect = 72,\r\n                avoidfeature = true,\r\n                avoidfriendly = true,\r\n                collidefeature = true,\r\n                collidefriendly = false,\r\n                corethickness = 0.75,\r\n                craterareaofeffect = 0,\r\n                craterboost = 0,\r\n                commandfire = true,\r\n                cratermult = 0,\r\n                cegtag = 'railgun',\r\n                duration = 0.12,\r\n                edgeeffectiveness = 1,\r\n                energypershot = 2000,\r\n                explosiongenerator = 'custom:laserhit-large-blue',\r\n                firestarter = 100,\r\n                impulseboost = 0.4,\r\n                impulsefactor = 1,\r\n                intensity = 1.4,\r\n                name = 'Long-range g2g armor-piercing rifle',\r\n                range = 1250,\r\n                reloadtime = 0.5,\r\n                rgbcolor = '0.4 0.1 0.7',\r\n                rgbcolor2 = '0.4 0.1 0.7',\r\n                soundhit = 'sniperhit',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'sniper3',\r\n                soundtrigger = true,\r\n                stockpile = true,\r\n                stockpiletime = 2,\r\n                customparams = {\r\n                    stockpilelimit = 30,\r\n                },\r\n                texture1 = 'shot',\r\n                texture2 = 'empty',\r\n                thickness = 6,\r\n                tolerance = 1000,\r\n                turret = true,\r\n                weapontype = 'LaserCannon',\r\n                weaponvelocity = 3000,\r\n                damage = {\r\n                    commanders = 10,\r\n                    default = 45000,\r\n                },\r\n            },\r\n            ata = {\r\n                areaofeffect = 16,\r\n                avoidfeature = false,\r\n                beamtime = 1.25,\r\n                collidefriendly = false,\r\n                corethickness = 0.5,\r\n                craterareaofeffect = 0,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                edgeeffectiveness = 0.30,\r\n                energypershot = 7000,\r\n                explosiongenerator = 'custom:laserhit-large-blue',\r\n                firestarter = 90,\r\n                impulsefactor = 0,\r\n                largebeamlaser = true,\r\n                laserflaresize = 7,\r\n                name = 'Heavy long-range g2g tachyon accelerator beam',\r\n                noselfdamage = true,\r\n                range = 1100,\r\n                reloadtime = 15,\r\n                rgbcolor = '1 0 1',\r\n                scrollspeed = 5,\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'annigun1',\r\n                soundtrigger = 1,\r\n                texture3 = 'largebeam',\r\n                thickness = 10,\r\n                tilelength = 150,\r\n                tolerance = 10000,\r\n                turret = true,\r\n                weapontype = 'BeamLaser',\r\n                weaponvelocity = 3100,\r\n                damage = {\r\n                    commanders = 480,\r\n                    default = 48000,\r\n                },\r\n            },\r\n            armcomlaser = {\r\n                areaofeffect = 12,\r\n                avoidfeature = false,\r\n                beamtime = 0.1,\r\n                corethickness = 0.1,\r\n                craterareaofeffect = 0,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                cylindertargeting = 1,\r\n                edgeeffectiveness = 1,\r\n                explosiongenerator = 'custom:laserhit-small-red',\r\n                firestarter = 70,\r\n                impactonly = 1,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                laserflaresize = 7.7,\r\n                name = 'Light close-quarters g2g/g2a laser',\r\n                noselfdamage = true,\r\n                range = 550,\r\n                reloadtime = 0.5,\r\n                rgbcolor = '0.659 0 1',\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'lasrcrw2',\r\n                soundtrigger = 1,\r\n                targetmoveerror = 0.05,\r\n                thickness = 6,\r\n                tolerance = 10000,\r\n                turret = true,\r\n                weapontype = 'BeamLaser',\r\n                weaponvelocity = 900,\r\n                damage = {\r\n                    default = 1750,\r\n                    VTOL = 200,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                def = 'armcomlaser',\r\n                onlytargetcategory = 'NOTSUB',\r\n                fastautoretargeting = true,\r\n            },\r\n            [3] = {\r\n                def = 'old_armsnipe_weapon',\r\n                onlytargetcategory = 'NOTSUB',\r\n            },\r\n            [4] = {\r\n                badtargetcategory = 'VTOL GROUNDSCOUT',\r\n                def = 'ATA',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n            [5] = {\r\n                def = '',\r\n            },\r\n            [6] = {\r\n                def = '',\r\n            },\r\n        },\r\n    },\r\n}\r\n"
        },
        {
            "path": "lua/evocom-cor.lua",
            "data": "-- NuttyB v1.52c Cortex Com\r\n-- Authors: ChrispyNut, BackBash\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\n{\r\n    corcom = {\r\n        customparams = {\r\n            evolution_target = 'corcomlvl2',\r\n            evolution_condition = 'timer_global',\r\n            evolution_timer = 420,\r\n            inheritxpratemultiplier = 0.5,\r\n            childreninheritxp = 'TURRET MOBILEBUILT',\r\n            parentsinheritxp = 'TURRET MOBILEBUILT',\r\n        },\r\n        autoheal = 80,\r\n        speed = 45,\r\n        energymake = 75,\r\n        metalmake = 6,\r\n        health = 5500,\r\n        buildoptions = {\r\n            [28] = 'corhllt',\r\n            [29] = 'cornecro',\r\n            [30] = 'corlevlr',\r\n            [31] = 'corak',\r\n            [32] = 'cormaw',\r\n        },\r\n        weapondefs = {\r\n            corcomlaser = {\r\n                range = 370,\r\n                damage = {\r\n                    bombers = 180,\r\n                    default = 260,\r\n                    fighters = 110,\r\n                    subs = 5,\r\n                },\r\n            },\r\n            disintegrator = {\r\n                energypershot = 1000,\r\n                reloadtime = 8,\r\n            },\r\n        },\r\n    },\r\n    corcomlvl2 = {\r\n        speed = 62,\r\n        health = 8500,\r\n        energymake = 255,\r\n        metalmake = 16,\r\n        autoheal = 300,\r\n        builddistance = 200,\r\n        workertime = 600,\r\n        buildoptions = {\r\n            [1] = 'corsolar',\r\n            [2] = 'coradvsol',\r\n            [3] = 'corwin',\r\n            [4] = 'corgeo',\r\n            [5] = 'cormstor',\r\n            [6] = 'corestor',\r\n            [7] = 'cormex',\r\n            [8] = 'corexp',\r\n            [9] = 'cormakr',\r\n            [10] = 'corcan',\r\n            [11] = 'correap',\r\n            [12] = 'corlab',\r\n            [13] = 'corvp',\r\n            [14] = 'corap',\r\n            [15] = 'corhp',\r\n            [16] = 'cornanotc',\r\n            [17] = 'coreyes',\r\n            [18] = 'corrad',\r\n            [19] = 'cordrag',\r\n            [20] = 'cormaw',\r\n            [21] = 'corllt',\r\n            [22] = 'corhllt',\r\n            [23] = 'corhlt',\r\n            [24] = 'corpun',\r\n            [25] = 'corrl',\r\n            [26] = 'cormadsam',\r\n            [27] = 'corerad',\r\n            [28] = 'cordl',\r\n            [29] = 'corjamt',\r\n            [30] = 'corjuno',\r\n            [31] = 'corsy',\r\n            [32] = 'coruwgeo',\r\n            [33] = 'corfasp',\r\n            [34] = 'cornerco',\r\n            [35] = 'coruwes',\r\n            [36] = 'corplat',\r\n            [37] = 'corfhp',\r\n            [38] = 'coruwms',\r\n            [39] = 'corfhlt',\r\n            [40] = 'cornanotcplat',\r\n            [41] = 'corfmkr',\r\n            [42] = 'cortide',\r\n            [43] = 'corfrad',\r\n            [44] = 'corfrt',\r\n            [45] = 'corfdrag',\r\n            [46] = 'cortl',\r\n            [47] = 'cornecro',\r\n        },\r\n        customparams = {\r\n            evolution_target = 'corcomlvl3',\r\n            evolution_condition = 'timer_global',\r\n            evolution_timer = 1320,\r\n            shield_power = 500,\r\n            shield_radius = 100,\r\n            inheritxpratemultiplier = 0.5,\r\n            childreninheritxp = 'TURRET MOBILEBUILT',\r\n            parentsinheritxp = 'TURRET MOBILEBUILT',\r\n        },\r\n        weapondefs = {\r\n            armcomlaser = {\r\n                areaofeffect = 16,\r\n                avoidfeature = false,\r\n                beamtime = 0.1,\r\n                corethickness = 0.1,\r\n                craterareaofeffect = 0,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                cylindertargeting = 1,\r\n                edgeeffectiveness = 1,\r\n                explosiongenerator = 'custom:laserhit-small-red',\r\n                firestarter = 70,\r\n                impactonly = 1,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                laserflaresize = 7.7,\r\n                name = 'Light close-quarters g2g/g2a laser',\r\n                noselfdamage = true,\r\n                range = 500,\r\n                reloadtime = 0.4,\r\n                rgbcolor = '0.6 0.3 0.8',\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'lasrfir1',\r\n                soundtrigger = 1,\r\n                targetmoveerror = 0.05,\r\n                thickness = 4,\r\n                tolerance = 10000,\r\n                turret = true,\r\n                weapontype = 'BeamLaser',\r\n                weaponvelocity = 900,\r\n                damage = {\r\n                    bombers = 180,\r\n                    default = 1500,\r\n                    fighters = 110,\r\n                    subs = 5,\r\n                },\r\n            },\r\n            disintegrator = {\r\n                areaofeffect = 36,\r\n                avoidfeature = false,\r\n                avoidfriendly = false,\r\n                avoidground = false,\r\n                bouncerebound = 0,\r\n                cegtag = 'dgunprojectile',\r\n                commandfire = true,\r\n                craterboost = 0,\r\n                cratermult = 0.15,\r\n                edgeeffectiveness = 0.15,\r\n                energypershot = 500,\r\n                explosiongenerator = 'custom:expldgun',\r\n                firestarter = 100,\r\n                firesubmersed = false,\r\n                groundbounce = true,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                name = 'Disintegrator',\r\n                noexplode = true,\r\n                noselfdamage = true,\r\n                range = 250,\r\n                reloadtime = 6,\r\n                paralyzer = {},\r\n                soundhit = 'xplomas2s',\r\n                soundhitwet = 'sizzlexs',\r\n                soundstart = 'disigun1',\r\n                soundhitvolume = 36,\r\n                soundstartvolume = 96,\r\n                soundtrigger = true,\r\n                tolerance = 10000,\r\n                turret = true,\r\n                waterweapon = true,\r\n                weapontimer = 4.2,\r\n                weapontype = 'DGun',\r\n                weaponvelocity = 300,\r\n                damage = {\r\n                    commanders = 0,\r\n                    default = 20000,\r\n                    raptors = 10000,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                def = 'armcomlaser',\r\n                onlytargetcategory = 'NOTSUB',\r\n                fastautoretargeting = true,\r\n            },\r\n            [3] = {\r\n                def = 'DISINTEGRATOR',\r\n                onlytargetcategory = 'NOTSUB',\r\n            },\r\n        },\r\n    },\r\n    corcomlvl3 = {\r\n        speed = 80,\r\n        health = 30000,\r\n        energymake = 2180,\r\n        metalmake = 49,\r\n        autoheal = 1500,\r\n        workertime = 1200,\r\n        builddistance = 250,\r\n        buildoptions = {\r\n            [1] = 'corfus',\r\n            [2] = 'corafus',\r\n            [3] = 'corageo',\r\n            [4] = 'cormoho',\r\n            [5] = 'cormexp',\r\n            [6] = 'cormmkr',\r\n            [7] = 'coruwadves',\r\n            [8] = 'coruwadvms',\r\n            [9] = 'corarad',\r\n            [10] = 'corshroud',\r\n            [11] = 'corfort',\r\n            [12] = 'corlab',\r\n            [13] = 'cortarg',\r\n            [14] = 'corsd',\r\n            [15] = 'corgate',\r\n            [16] = 'cortoast',\r\n            [17] = 'corvipe',\r\n            [18] = 'cordoom',\r\n            [19] = 'corflak',\r\n            [20] = 'corscreamer',\r\n            [21] = 'corvp',\r\n            [22] = 'corfmd',\r\n            [23] = 'corap',\r\n            [24] = 'corint',\r\n            [25] = 'corplat',\r\n            [26] = 'corsy',\r\n            [27] = 'coruwmme',\r\n            [28] = 'coruwmmm',\r\n            [29] = 'corenaa',\r\n            [30] = 'corfdoom',\r\n            [31] = 'coratl',\r\n            [32] = 'coruwfus',\r\n            [33] = 'corjugg',\r\n            [34] = 'corshiva',\r\n            [35] = 'corsumo',\r\n            [36] = 'corgol',\r\n            [37] = 'corkorg',\r\n            [38] = 'cornanotc2plat',\r\n            [39] = 'cornanotct2',\r\n            [40] = 'cornecro',\r\n            [41] = 'cordoomt3',\r\n            [42] = 'corhllllt',\r\n            [43] = 'cormaw',\r\n            [44] = 'cormwall',\r\n            [45] = 'corgatet3',\r\n            [46] = 'cordoomt4',\r\n            [47] = 'cornanotct3',\r\n            [48] = 'epic_calamity',\r\n        },\r\n        customparams = {\r\n            evolution_target = 'corcomlvl4',\r\n            evolution_condition = 'timer_global',\r\n            evolution_timer = 1740,\r\n            inheritxpratemultiplier = 0.5,\r\n            childreninheritxp = 'TURRET MOBILEBUILT',\r\n            parentsinheritxp = 'TURRET MOBILEBUILT',\r\n        },\r\n        weapondefs = {\r\n            corcomlaser = {\r\n                areaofeffect = 12,\r\n                avoidfeature = false,\r\n                beamtime = 0.1,\r\n                corethickness = 0.1,\r\n                craterareaofeffect = 0,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                cylindertargeting = 1,\r\n                edgeeffectiveness = 1,\r\n                explosiongenerator = 'custom:laserhit-small-red',\r\n                firestarter = 70,\r\n                impactonly = 1,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                laserflaresize = 5.5,\r\n                name = 'J7Laser',\r\n                noselfdamage = true,\r\n                range = 900,\r\n                reloadtime = 0.4,\r\n                rgbcolor = '0.7 0 1',\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'lasrfir1',\r\n                soundtrigger = 1,\r\n                targetmoveerror = 0.05,\r\n                thickness = 3,\r\n                tolerance = 10000,\r\n                turret = true,\r\n                weapontype = 'BeamLaser',\r\n                weaponvelocity = 900,\r\n                damage = {\r\n                    default = 2000,\r\n                    subs = 5,\r\n                },\r\n            },\r\n            disintegrator = {\r\n                areaofeffect = 36,\r\n                avoidfeature = false,\r\n                avoidfriendly = false,\r\n                avoidground = false,\r\n                bouncerebound = 0,\r\n                cegtag = 'dgunprojectile',\r\n                commandfire = true,\r\n                craterboost = 0,\r\n                cratermult = 0.15,\r\n                edgeeffectiveness = 0.15,\r\n                energypershot = 500,\r\n                explosiongenerator = 'custom:expldgun',\r\n                firestarter = 100,\r\n                firesubmersed = false,\r\n                groundbounce = true,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                name = 'Disintegrator',\r\n                noexplode = true,\r\n                noselfdamage = true,\r\n                range = 250,\r\n                reloadtime = 3,\r\n                paralyzer = {},\r\n                soundhit = 'xplomas2s',\r\n                soundhitwet = 'sizzlexs',\r\n                soundstart = 'disigun1',\r\n                soundhitvolume = 36,\r\n                soundstartvolume = 96,\r\n                soundtrigger = true,\r\n                size = 4,\r\n                tolerance = 10000,\r\n                turret = true,\r\n                waterweapon = true,\r\n                weapontimer = 4.2,\r\n                weapontype = 'DGun',\r\n                weaponvelocity = 300,\r\n                damage = {\r\n                    commanders = 0,\r\n                    default = 20000,\r\n                    scavboss = 1000,\r\n                    raptors = 10000,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                def = 'CORCOMLASER',\r\n                onlytargetcategory = 'NOTSUB',\r\n                fastautoretargeting = true,\r\n            },\r\n            [5] = {\r\n                def = '',\r\n            },\r\n        },\r\n    },\r\n    corcomlvl4 = {\r\n        speed = 80,\r\n        health = 50000,\r\n        energymake = 2380,\r\n        metalmake = 56,\r\n        autoheal = 3550,\r\n        workertime = 1800,\r\n        builddistance = 300,\r\n        buildoptions = {\r\n            'corfus',\r\n            'corafus',\r\n            'corageo',\r\n            'corbhmth',\r\n            'cormoho',\r\n            'cormexp',\r\n            'cormmkr',\r\n            'coruwadves',\r\n            'coruwadvms',\r\n            'corarad',\r\n            'corshroud',\r\n            'corfort',\r\n            'corlab',\r\n            'cortarg',\r\n            'corsd',\r\n            'corgate',\r\n            'cortoast',\r\n            'corvipe',\r\n            'cordoom',\r\n            'corflak',\r\n            'corscreamer',\r\n            'corvp',\r\n            'corfmd',\r\n            'corap',\r\n            'corint',\r\n            'corplat',\r\n            'corsy',\r\n            'coruwmme',\r\n            'coruwmmm',\r\n            'corenaa',\r\n            'corfdoom',\r\n            'coratl',\r\n            'coruwfus',\r\n            'corjugg',\r\n            'corshiva',\r\n            'corsumo',\r\n            'corgol',\r\n            'corkorg',\r\n            'cornanotc2plat',\r\n            'cornanotct2',\r\n            'cornecro',\r\n            'cordoomt3',\r\n            'corhllllt',\r\n            'cormaw',\r\n            'cormwall',\r\n            'corgatet3',\r\n            'cordoomt4',\r\n            'cornanotct3',\r\n            'epic_calamity',\r\n        },\r\n        customparams = {\r\n            shield_power = 500,\r\n            shield_radius = 100,\r\n            inheritxpratemultiplier = 0.5,\r\n            childreninheritxp = 'TURRET MOBILEBUILT',\r\n            parentsinheritxp = 'TURRET MOBILEBUILT',\r\n        },\r\n        weapondefs = {\r\n            CORCOMLASER = {\r\n                areaofeffect = 12,\r\n                avoidfeature = false,\r\n                beamtime = 0.1,\r\n                corethickness = 0.1,\r\n                craterareaofeffect = 0,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                cylindertargeting = 1,\r\n                edgeeffectiveness = 1,\r\n                explosiongenerator = 'custom:laserhit-small-red',\r\n                firestarter = 70,\r\n                impactonly = 1,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                laserflaresize = 5.5,\r\n                name = 'J7Laser',\r\n                noselfdamage = true,\r\n                range = 1000,\r\n                reloadtime = 0.4,\r\n                rgbcolor = '0.7 0 1',\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'lasrfir1',\r\n                soundtrigger = 1,\r\n                targetmoveerror = 0.05,\r\n                thickness = 3,\r\n                tolerance = 10000,\r\n                turret = true,\r\n                weapontype = 'BeamLaser',\r\n                weaponvelocity = 900,\r\n                damage = {\r\n                    default = 2500,\r\n                    subs = 5,\r\n                },\r\n            },\r\n            disintegratorxl = {\r\n                areaofeffect = 105,\r\n                avoidfeature = false,\r\n                avoidfriendly = true,\r\n                avoidground = false,\r\n                burst = 1,\r\n                burstrate = 0,\r\n                bouncerebound = 0,\r\n                cegtag = 'gausscannonprojectilexl',\r\n                craterareaofeffect = 0,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                commandfire = true,\r\n                cameraShake = 0,\r\n                edgeeffectiveness = 1,\r\n                energypershot = 0,\r\n                explosiongenerator = 'custom:burnblackbiggest',\r\n                firestarter = 100,\r\n                firesubmersed = false,\r\n                gravityaffected = true,\r\n                impulsefactor = 0,\r\n                intensity = 4,\r\n                name = 'Darkmatter Photon-Disruptor',\r\n                noexplode = true,\r\n                noselfdamage = true,\r\n                range = 500,\r\n                reloadtime = 1,\r\n                rgbcolor = '0.7 0.3 1.0',\r\n                size = 5.5,\r\n                soundhit = 'xplomas2',\r\n                soundhitwet = 'sizzlexs',\r\n                soundstart = 'disigun1',\r\n                soundtrigger = true,\r\n                tolerance = 10000,\r\n                turret = true,\r\n                weapontimer = 4.2,\r\n                weapontype = 'DGun',\r\n                weaponvelocity = 505,\r\n                damage = {\r\n                    commanders = 0,\r\n                    default = 20000,\r\n                    scavboss = 1000,\r\n                    raptors = 10000,\r\n                },\r\n            },\r\n            corcomeyelaser = {\r\n                allowNonBlockingAim = true,\r\n                avoidfriendly = true,\r\n                areaofeffect = 6,\r\n                avoidfeature = false,\r\n                beamtime = 0.033,\r\n                camerashake = 0.1,\r\n                collidefriendly = false,\r\n                corethickness = 0.35,\r\n                craterareaofeffect = 12,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                edgeeffectiveness = 1,\r\n                energypershot = 0,\r\n                explosiongenerator = 'custom:laserhit-small-red',\r\n                firestarter = 90,\r\n                firetolerance = 300,\r\n                impulsefactor = 0,\r\n                laserflaresize = 2,\r\n                name = 'EyeLaser',\r\n                noselfdamage = true,\r\n                proximitypriority = 1,\r\n                range = 870,\r\n                reloadtime = 0.033,\r\n                rgbcolor = '0 1 0',\r\n                rgbcolor2 = '0.8 0 0',\r\n                scrollspeed = 5,\r\n                soundhitdry = 'flamhit1',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'heatray3burn',\r\n                soundstartvolume = 6,\r\n                soundtrigger = 1,\r\n                thickness = 2.5,\r\n                turret = true,\r\n                weapontype = 'BeamLaser',\r\n                weaponvelocity = 1500,\r\n                damage = {\r\n                    default = 185,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                def = 'CORCOMLASER',\r\n                onlytargetcategory = 'NOTSUB',\r\n                fastautoretargeting = true,\r\n            },\r\n            [3] = {\r\n                badtargetcategory = 'VTOL',\r\n                def = 'disintegratorxl',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n            [6] = {\r\n                def = '',\r\n            },\r\n            [5] = {\r\n                badtargetcategory = 'VTOL GROUNDSCOUT',\r\n                def = 'corcomeyelaser',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n        },\r\n    },\r\n}\r\n"
        },
        {
            "path": "lua/evocom-leg.lua",
            "data": "-- NuttyB v1.52c Legion Com\r\n-- Authors: ChrispyNut, BackBash\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\n{\r\n    legcom = {\r\n\t\t\t\tfootprintx = 2,\r\n        footprintz = 2,\r\n        energymake = 50,\r\n        metalmake = 5,\r\n        health = 6000,\r\n        autoheal = 40,\r\n        buildoptions = {\r\n            'legrezbot',\r\n            'legdtl',\r\n            'legdtf',\r\n            'legdtr',\r\n            'legjam',\r\n            'legwin',\r\n            'leglab',\r\n            'legeconv',\r\n        },\r\n        customparams = {\r\n            evolution_target = 'legcomlvl2',\r\n            evolution_condition = 'timer_global',\r\n            evolution_timer = 420,\r\n            inheritxpratemultiplier = 0.5,\r\n            childreninheritxp = 'TURRET MOBILEBUILT',\r\n            parentsinheritxp = 'TURRET MOBILEBUILT',\r\n        },\r\n        weapondefs = {\r\n            legcomlaser = {\r\n                corethickness = 0.25,\r\n                duration = 0.09,\r\n                name = 'Light close-quarters g2g/g2a laser',\r\n                range = 360,\r\n                reloadtime = 0.20,\r\n                rgbcolor = '0 2 1',\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'lasrcrw1',\r\n                soundtrigger = true,\r\n                sprayangle = 700,\r\n                thickness = 6,\r\n                texture1 = 'shot',\r\n                texture2 = 'empty',\r\n                weapontype = 'LaserCannon',\r\n                weaponvelocity = 2100,\r\n                damage = {\r\n                    default = 250,\r\n                },\r\n            },\r\n            shotgun = {\r\n                areaofeffect = 60,\r\n                energypershot = 0,\r\n                avoidfeature = false,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                cameraShake = 0,\r\n                edgeeffectiveness = 0.65,\r\n                explosiongenerator = 'custom:genericshellexplosion-small',\r\n                impulseboost = 0.2,\r\n                impulsefactor = 0.2,\r\n                intensity = 3,\r\n                name = '6 Gauge Shotgun',\r\n                noselfdamage = true,\r\n                predictboost = 1,\r\n                projectiles = 6,\r\n                range = 320,\r\n                reloadtime = 2,\r\n                rgbcolor = '1 0.75 0.25',\r\n                size = 2,\r\n                soundhit = 'xplomed2xs',\r\n                soundhitwet = 'splsmed',\r\n                soundstart = 'kroggie2xs',\r\n                soundstartvolume = 12,\r\n                sprayangle = 2000,\r\n                turret = true,\r\n                commandfire = true,\r\n                weapontimer = 1,\r\n                weapontype = 'Cannon',\r\n                weaponvelocity = 600,\r\n                stockpile = true,\r\n                stockpiletime = 5,\r\n                customparams = {\r\n                    stockpilelimit = 10,\r\n                },\r\n                damage = {\r\n                    default = 1800,\r\n                    commanders = 0,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [3] = {\r\n                def = 'shotgun',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n        },\r\n    },\r\n    legcomlvl2 = {\r\n\t\t\t\tfootprintx = 2,\r\n        footprintz = 2,\r\n        energymake = 150,\r\n        metalmake = 15,\r\n        speed = 57.5,\r\n        autoheal = 100,\r\n        health = 6700,\r\n        customparams = {\r\n            evolution_condition = 'timer_global',\r\n            evolution_timer = 1020,\r\n            inheritxpratemultiplier = 0.5,\r\n            childreninheritxp = 'TURRET MOBILEBUILT',\r\n            parentsinheritxp = 'TURRET MOBILEBUILT',\r\n        },\r\n        buildoptions = {\r\n            'legrezbot',\r\n            'legadvsol',\r\n            'corhllt',\r\n            'leggeo',\r\n            'legnanotc',\r\n            'legjam',\r\n            'legdtf',\r\n            'legmg',\r\n            'legrad',\r\n            'legdtl',\r\n            'legdtr',\r\n            'legrhapsis',\r\n            'legwin',\r\n            'legeconv',\r\n        },\r\n        weapondefs = {\r\n            legcomlaser = {\r\n                accuracy = 50,\r\n                areaofeffect = 12,\r\n                avoidfriendly = false,\r\n                avoidfeature = false,\r\n                collidefriendly = false,\r\n                collidefeature = true,\r\n                beamtime = 0.09,\r\n                corethickness = 0.3,\r\n                duration = 0.09,\r\n                explosiongenerator = 'custom:laserhit-small-red',\r\n                firestarter = 70,\r\n                impactonly = 1,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                name = 'Light close-quarters g2g/g2a laser',\r\n                noselfdamage = true,\r\n                range = 500,\r\n                reloadtime = 0.2,\r\n                rgbcolor = '0 0.95 0.05',\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'lasrcrw1',\r\n                soundtrigger = true,\r\n                sprayangle = 500,\r\n                targetmoveerror = 0.05,\r\n                thickness = 7,\r\n                tolerance = 1000,\r\n                texture1 = 'shot',\r\n                texture2 = 'empty',\r\n                turret = true,\r\n                weapontype = 'LaserCannon',\r\n                weaponvelocity = 2200,\r\n                damage = {\r\n                    bombers = 180,\r\n                    default = 450,\r\n                    fighters = 110,\r\n                    subs = 5,\r\n                },\r\n            },\r\n            shotgun = {\r\n                areaofeffect = 65,\r\n                energypershot = 0,\r\n                avoidfeature = false,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                cameraShake = 0,\r\n                edgeeffectiveness = 0.65,\r\n                explosiongenerator = 'custom:genericshellexplosion-small',\r\n                impulseboost = 0.2,\r\n                impulsefactor = 0.2,\r\n                intensity = 3,\r\n                name = '12 Gauge Shotgun',\r\n                noselfdamage = true,\r\n                predictboost = 1,\r\n                projectiles = 7,\r\n                range = 440,\r\n                reloadtime = 2,\r\n                rgbcolor = '1 0.75 0.25',\r\n                size = 2.5,\r\n                soundhit = 'xplomed2xs',\r\n                soundhitwet = 'splsmed',\r\n                soundstart = 'kroggie2xs',\r\n                soundstartvolume = 12,\r\n                sprayangle = 2250,\r\n                turret = true,\r\n                commandfire = true,\r\n                weapontimer = 1,\r\n                weapontype = 'Cannon',\r\n                weaponvelocity = 600,\r\n                stockpile = true,\r\n                stockpiletime = 5,\r\n                customparams = {\r\n                    stockpilelimit = 15,\r\n                },\r\n                damage = {\r\n                    default = 2200,\r\n                    commanders = 0,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                def = 'legcomlaser',\r\n                onlytargetcategory = 'NOTSUB',\r\n                fastautoretargeting = true,\r\n            },\r\n            [3] = {\r\n                def = 'shotgun',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n        },\r\n    },\r\n    legcomlvl3 = {\r\n\t\t\t\tfootprintx = 2,\r\n        footprintz = 2,\r\n        energymake = 1280,\r\n        metalmake = 40,\r\n        speed = 70.5,\r\n        workertime = 700,\r\n        autoheal = 150,\r\n        health = 7500,\r\n        customparams = {\r\n            evolution_condition = 'timer_global',\r\n            evolution_timer = 1440,\r\n            inheritxpratemultiplier = 0.5,\r\n            childreninheritxp = 'TURRET MOBILEBUILT',\r\n            parentsinheritxp = 'TURRET MOBILEBUILT',\r\n        },\r\n        buildoptions = {\r\n            'legdeflector',\r\n            'legfus',\r\n            'legbombard',\r\n            'legadvestore',\r\n            'legmoho',\r\n            'legadveconv',\r\n            'legarad',\r\n            'legajam',\r\n            'legforti',\r\n            'legacluster',\r\n            'legamstor',\r\n            'legflak',\r\n            'legabm',\r\n            'legbastion',\r\n            'legdtr',\r\n            'legdtf',\r\n            'legrezbot',\r\n            'legdtl',\r\n            'leglab',\r\n            'legbastiont4',\r\n            'legnanotct3',\r\n            'legapopupdef',\r\n            'epic_starfall',\r\n            'epic_bastion',\r\n            'epic_sentinel',\r\n        },\r\n        weapondefs = {\r\n            legcomlaser = {\r\n                accuracy = 50,\r\n                areaofeffect = 12,\r\n                avoidfriendly = true,\r\n                avoidfeature = true,\r\n                collidefriendly = false,\r\n                collidefeature = true,\r\n                beamtime = 0.09,\r\n                corethickness = 0.55,\r\n                duration = 0.09,\r\n                explosiongenerator = 'custom:laserhit-small-red',\r\n                firestarter = 70,\r\n                impactonly = 0,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                name = 'Light close-quarters g2g/g2a laser',\r\n                noselfdamage = true,\r\n                range = 640,\r\n                reloadtime = 0.2,\r\n                rgbcolor = '0 0.2 0.8',\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'lasrcrw1',\r\n                soundtrigger = true,\r\n                sprayangle = 500,\r\n                targetmoveerror = 0.05,\r\n                thickness = 7,\r\n                tolerance = 1000,\r\n                texture1 = 'shot',\r\n                texture2 = 'empty',\r\n                turret = true,\r\n                weapontype = 'LaserCannon',\r\n                weaponvelocity = 2500,\r\n                damage = {\r\n                    bombers = 180,\r\n                    default = 650,\r\n                    fighters = 110,\r\n                    subs = 5,\r\n                },\r\n            },\r\n            shotgun = {\r\n                areaofeffect = 90,\r\n                energypershot = 0,\r\n                avoidfeature = false,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                cameraShake = 0,\r\n                edgeeffectiveness = 0.65,\r\n                explosiongenerator = 'custom:genericshellexplosion-small',\r\n                impulseboost = 0.2,\r\n                impulsefactor = 0.2,\r\n                intensity = 3,\r\n                name = '12 Gauge Shotgun',\r\n                noselfdamage = true,\r\n                predictboost = 1,\r\n                projectiles = 7,\r\n                range = 540,\r\n                reloadtime = 2,\r\n                rgbcolor = '1 0.75 0.25',\r\n                size = 2.5,\r\n                soundhit = 'xplomed2xs',\r\n                soundhitwet = 'splsmed',\r\n                soundstart = 'kroggie2xs',\r\n                soundstartvolume = 12,\r\n                sprayangle = 2500,\r\n                turret = true,\r\n                commandfire = true,\r\n                weapontimer = 1,\r\n                weapontype = 'Cannon',\r\n                weaponvelocity = 600,\r\n                stockpile = true,\r\n                stockpiletime = 5,\r\n                customparams = {\r\n                    stockpilelimit = 20,\r\n                },\r\n                damage = {\r\n                    default = 3200,\r\n                    commanders = 0,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                def = 'legcomlaser',\r\n                onlytargetcategory = 'NOTSUB',\r\n                fastautoretargeting = true,\r\n            },\r\n            [3] = {\r\n                def = 'shotgun',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n            [5] = {\r\n                def = '',\r\n            },\r\n        },\r\n    },\r\n    legcomlvl4 = {\r\n\t\t\t\tfootprintx = 2,\r\n        footprintz = 2,\r\n        energymake = 1980,\r\n        metalmake = 46,\r\n        speed = 88.5,\r\n        workertime = 1000,\r\n        autoheal = 180,\r\n        health = 24500,\r\n        customparams = {\r\n            evolution_condition = 'timer_global',\r\n            evolution_timer = 1740,\r\n            inheritxpratemultiplier = 0.5,\r\n            childreninheritxp = 'TURRET MOBILEBUILT',\r\n            parentsinheritxp = 'TURRET MOBILEBUILT',\r\n        },\r\n        buildoptions = {\r\n            'legdeflector',\r\n            'legfus',\r\n            'legbombard',\r\n            'legadvestore',\r\n            'legmoho',\r\n            'legadveconv',\r\n            'legeshotgunmech',\r\n            'legarad',\r\n            'legajam',\r\n            'legkeres',\r\n            'legacluster',\r\n            'legamstor',\r\n            'legflak',\r\n            'legabm',\r\n            'legbastion',\r\n            'legbastiont4',\r\n            'legnanotct2',\r\n            'legnanotct2plat',\r\n            'legrwall',\r\n            'leglab',\r\n            'legtarg',\r\n            'legsd',\r\n            'legpede',\r\n            'legerailtank',\r\n            'legeheatraymech',\r\n            'legrezbot',\r\n            'legafus',\r\n            'leglraa',\r\n            'legdtl',\r\n            'legdtf',\r\n            'legministarfall',\r\n            'legstarfall',\r\n            'leggatet3',\r\n            'legperdition',\r\n            'legsilo',\r\n            'legsrailt4',\r\n            'legelrpcmech',\r\n            'legdtr',\r\n            'legnanotct3',\r\n            'legapopupdef',\r\n            'leglrpc',\r\n            'epic_starfall',\r\n            'epic_bastion',\r\n            'epic_sentinel',\r\n        },\r\n        weapondefs = {\r\n            legcomlaser = {\r\n                accuracy = 50,\r\n                areaofeffect = 12,\r\n                avoidfriendly = true,\r\n                avoidfeature = true,\r\n                collidefriendly = false,\r\n                collidefeature = true,\r\n                beamtime = 0.1,\r\n                corethickness = 0.5,\r\n                duration = 0.09,\r\n                explosiongenerator = 'custom:laserhit-small-red',\r\n                firestarter = 70,\r\n                impactonly = 0,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                name = 'Light close-quarters g2g/g2a laser',\r\n                noselfdamage = true,\r\n                range = 900,\r\n                reloadtime = 0.1,\r\n                rgbcolor = '0.45 0 1',\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'lasrcrw1',\r\n                soundtrigger = 1,\r\n                sprayangle = 400,\r\n                targetmoveerror = 0.05,\r\n                thickness = 6,\r\n                tolerance = 1000,\r\n                texture1 = 'shot',\r\n                texture2 = 'empty',\r\n                turret = true,\r\n                weapontype = 'LaserCannon',\r\n                weaponvelocity = 3000,\r\n                damage = {\r\n                    bombers = 180,\r\n                    default = 1750,\r\n                    fighters = 110,\r\n                    subs = 5,\r\n                },\r\n            },\r\n            shotgun = {\r\n                areaofeffect = 75,\r\n                energypershot = 0,\r\n                avoidfeature = false,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                cameraShake = 0,\r\n                edgeeffectiveness = 0.65,\r\n                explosiongenerator = 'custom:genericshellexplosion-small',\r\n                impulseboost = 0.2,\r\n                impulsefactor = 0.2,\r\n                intensity = 3,\r\n                name = '60 Gauge Raptor Popper',\r\n                noselfdamage = true,\r\n                predictboost = 1,\r\n                projectiles = 9,\r\n                range = 550,\r\n                reloadtime = 1,\r\n                rgbcolor = '1 0.75 0.25',\r\n                size = 5,\r\n                soundhit = 'xplomed2xs',\r\n                soundhitwet = 'splsmed',\r\n                soundstart = 'kroggie2xs',\r\n                soundstartvolume = 12,\r\n                sprayangle = 3000,\r\n                turret = true,\r\n                commandfire = true,\r\n                weapontimer = 1,\r\n                weapontype = 'Cannon',\r\n                weaponvelocity = 600,\r\n                stockpile = true,\r\n                stockpiletime = 4,\r\n                customparams = {\r\n                    stockpilelimit = 20,\r\n                },\r\n                damage = {\r\n                    default = 4400,\r\n                    commanders = 0,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                def = 'legcomlaser',\r\n                onlytargetcategory = 'NOTSUB',\r\n                fastautoretargeting = true,\r\n            },\r\n            [3] = {\r\n                def = 'shotgun',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n            [5] = {\r\n                def = '',\r\n            },\r\n        },\r\n    },\r\n    legcomlvl5 = {\r\n\t\t\t\tfootprintx = 2,\r\n        footprintz = 2,\r\n        energymake = 2280,\r\n        metalmake = 64,\r\n        speed = 100,\r\n        workertime = 1700,\r\n        autoheal = 4500,\r\n        health = 53900,\r\n        customparams = {\r\n            inheritxpratemultiplier = 0.5,\r\n            childreninheritxp = 'TURRET MOBILEBUILT',\r\n            parentsinheritxp = 'TURRET MOBILEBUILT',\r\n        },\r\n        buildoptions = {\r\n            'legdeflector',\r\n            'legfus',\r\n            'legbombard',\r\n            'legadvestore',\r\n            'legmoho',\r\n            'legadveconv',\r\n            'legeshotgunmech',\r\n            'legarad',\r\n            'legajam',\r\n            'legkeres',\r\n            'legacluster',\r\n            'legamstor',\r\n            'legflak',\r\n            'legabm',\r\n            'legbastion',\r\n            'legbastiont4',\r\n            'legnanotct2',\r\n            'legnanotct2plat',\r\n            'legrwall',\r\n            'leglab',\r\n            'legtarg',\r\n            'legsd',\r\n            'legpede',\r\n            'legerailtank',\r\n            'legeheatraymech',\r\n            'legrezbot',\r\n            'legafus',\r\n            'leglraa',\r\n            'legdtl',\r\n            'legdtf',\r\n            'legministarfall',\r\n            'legstarfall',\r\n            'leggatet3',\r\n            'legperdition',\r\n            'legsilo',\r\n            'legsrailt4',\r\n            'legelrpcmech',\r\n            'legdtr',\r\n            'legnanotct3',\r\n            'legapopupdef',\r\n            'leglrpc',\r\n            'epic_starfall',\r\n            'epic_bastion',\r\n            'epic_sentinel',\r\n        },\r\n        weapondefs = {\r\n            machinegun = {\r\n                accuracy = 80,\r\n                areaofeffect = 10,\r\n                avoidfeature = false,\r\n                beamburst = true,\r\n                beamdecay = 1,\r\n                beamtime = 0.07,\r\n                burst = 6,\r\n                burstrate = 0.10667,\r\n                camerashake = 0,\r\n                corethickness = 0.35,\r\n                craterareaofeffect = 0,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                edgeeffectiveness = 1,\r\n                explosiongenerator = 'custom:laserhit-medium-red',\r\n                firestarter = 10,\r\n                impulsefactor = 0,\r\n                largebeamlaser = true,\r\n                laserflaresize = 30,\r\n                name = 'Rapid-fire close quarters g2g armor-piercing laser',\r\n                noselfdamage = true,\r\n                pulsespeed = q8,\r\n                range = 1100,\r\n                reloadtime = 0.50,\r\n                rgbcolor = '0.7 0.3 1.0',\r\n                rgbcolor2 = '0.8 0.6 1.0',\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'lasfirerc',\r\n                soundtrigger = 1,\r\n                sprayangle = 500,\r\n                targetborder = 0.2,\r\n                thickness = 5.5,\r\n                tolerance = 4500,\r\n                turret = true,\r\n                weapontype = 'BeamLaser',\r\n                weaponvelocity = 920,\r\n                damage = {\r\n                    default = 1300,\r\n                    vtol = 180,\r\n                },\r\n            },\r\n            shotgunarm = {\r\n                areaofeffect = 112,\r\n                commandfire = true,\r\n                avoidfeature = false,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                cameraShake = 0,\r\n                edgeeffectiveness = 0.65,\r\n                explosiongenerator = 'custom:genericshellexplosion-medium',\r\n                impulsefactor = 0.8,\r\n                intensity = 0.2,\r\n                mygravity = 1,\r\n                name = 'GaussCannon',\r\n                noselfdamage = true,\r\n                predictboost = 1,\r\n                projectiles = 20,\r\n                range = 650,\r\n                reloadtime = 1,\r\n                rgbcolor = '0.8 0.4 1.0',\r\n                size = 4,\r\n                sizeDecay = 0.044,\r\n                stages = 16,\r\n                alphaDecay = 0.66,\r\n                soundhit = 'xplomed2xs',\r\n                soundhitwet = 'splsmed',\r\n                soundstart = 'kroggie2xs',\r\n                sprayangle = 3500,\r\n                tolerance = 6000,\r\n                turret = true,\r\n                waterweapon = true,\r\n                weapontimer = 2,\r\n                weapontype = 'Cannon',\r\n                weaponvelocity = 900,\r\n                stockpile = true,\r\n                stockpiletime = 2,\r\n                customparams = {\r\n                    stockpilelimit = 50,\r\n                },\r\n                damage = {\r\n                    default = 10000,\r\n                    commanders = 0,\r\n                },\r\n            },\r\n            exp_heavyrocket = {\r\n                areaofeffect = 70,\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                cameraShake = 0,\r\n                energypershot = 125,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                burst = 4,\r\n                burstrate = 0.3,\r\n                cegtag = 'missiletrailsmall-red',\r\n                colormap = '0.75 0.73 0.67 0.024   0.37 0.4 0.30 0.021   0.22 0.21 0.14 0.018  0.024 0.014 0.009 0.03   0.0 0.0 0.0 0.008',\r\n                craterboost = 0,\r\n                craterareaofeffect = 0,\r\n                cratermult = 0,\r\n                dance = 24,\r\n                edgeeffectiveness = 0.65,\r\n                explosiongenerator = 'custom:burnblack',\r\n                firestarter = 70,\r\n                flighttime = 1.05,\r\n                flamegfxtime = 1,\r\n                impulsefactor = 0.123,\r\n                impactonly = 1,\r\n                model = 'catapultmissile.s3o',\r\n                movingaccuracy = 600,\r\n                name = 'Raptor Boomer',\r\n                noselfdamage = true,\r\n                proximitypriority = nil,\r\n                range = 700,\r\n                reloadtime = 1,\r\n                smoketrail = true,\r\n                smokePeriod = 4,\r\n                smoketime = 16,\r\n                smokesize = 8.5,\r\n                smokecolor = 0.5,\r\n                size = 2,\r\n                smokeTrailCastShadow = false,\r\n                soundhit = 'rockhit',\r\n                soundhitwet = 'splsmed',\r\n                soundstart = 'rapidrocket3',\r\n                startvelocity = 165,\r\n                rgbcolor = '1 0.25 0.1',\r\n                texture1 = 'null',\r\n                texture2 = 'smoketrailbar',\r\n                trajectoryheight = 1,\r\n                targetmoveerror = 0.2,\r\n                turnrate = 5000,\r\n                tracks = true,\r\n                turret = true,\r\n                allowNonBlockingAim = true,\r\n                weaponacceleration = 660,\r\n                weapontimer = 6,\r\n                weapontype = 'MissileLauncher',\r\n                weaponvelocity = 950,\r\n                wobble = 2000,\r\n                damage = {\r\n                    default = 1300,\r\n                },\r\n                customparams = {\r\n                    exclude_preaim = true,\r\n                    overrange_distance = 777,\r\n                    projectile_destruction_method = 'descend',\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                def = 'machinegun',\r\n                onlytargetcategory = 'NOTSUB',\r\n                fastautoretargeting = true,\r\n            },\r\n            [3] = {\r\n                def = 'shotgunarm',\r\n                onlytargetcategory = 'WEAPON',\r\n            },\r\n            [5] = {\r\n                def = 'exp_heavyrocket',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n        },\r\n    },\r\n}\r\n"
        },
        {
            "path": "lua/lrpc-rebalance.lua",
            "data": "-- NuttyB lrpc rebalance v2\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\ndo\r\n    local unitDefs = UnitDefs or {}\r\n\r\n    if unitDefs.armbrtha then\r\n        table.mergeInPlace(unitDefs.armbrtha, {\r\n            health = 13000,\r\n            weapondefs = {\r\n                ARMBRTHA_MAIN = {\r\n                    damage = {\r\n                        commanders = 480,\r\n                        default = 33000,\r\n                    },\r\n                    areaofeffect = 60,\r\n                    energypershot = 8000,\r\n                    range = 2400,\r\n                    reloadtime = 9,\r\n                    turnrate = 20000,\r\n                },\r\n            },\r\n        })\r\n    end\r\n\r\n    if unitDefs.corint then\r\n        table.mergeInPlace(unitDefs.corint, {\r\n            health = 13000,\r\n            weapondefs = {\r\n                CORINT_MAIN = {\r\n                    damage = {\r\n                        commanders = 480,\r\n                        default = 85000,\r\n                    },\r\n                    areaofeffect = 230,\r\n                    edgeeffectiveness = 0.6,\r\n                    energypershot = 15000,\r\n                    range = 2700,\r\n                    reloadtime = 18,\r\n                },\r\n            },\r\n        })\r\n    end\r\n\r\n    if unitDefs.leglrpc then\r\n        table.mergeInPlace(unitDefs.leglrpc, {\r\n            health = 13000,\r\n            weapondefs = {\r\n                LEGLRPC_MAIN = {\r\n                    damage = {\r\n                        commanders = 480,\r\n                        default = 4500,\r\n                    },\r\n                    energypershot = 2000,\r\n                    range = 2000,\r\n                    reloadtime = 2,\r\n                    turnrate = 30000,\r\n                },\r\n            },\r\n        })\r\n    end\r\nend\r\n"
        },
        {
            "path": "lua/main-defs.lua",
            "data": "-- NuttyB v1.52b Def Main\r\n-- Authors: ChrispyNut, BackBash\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\nlocal unitDefs, repulsor, pairs, tableMerge =\r\n    UnitDefs or {}, 'repulsor', pairs, table.merge\r\n\r\nfunction addWeapon(h, i, j)\r\n    unitDefs[h] = unitDefs[h] or {}\r\n    unitDefs[h].weapons = unitDefs[h].weapons or {}\r\n    unitDefs[h].weapondefs = unitDefs[h].weapondefs or {}\r\n    unitDefs[h].customparams = unitDefs[h].customparams or {}\r\n    table.insert(unitDefs[h].weapons, {\r\n        def = repulsor,\r\n        onlytargetcategory = j or '',\r\n    })\r\n    unitDefs[h].weapondefs[repulsor] = i\r\n    if i.shield and i.shield.power > 0 then\r\n        i.range = i.shield.radius\r\n        unitDefs[h].customparams = tableMerge(unitDefs[h].customparams or {}, {\r\n            off_on_stun = 'true',\r\n            shield_color_mult = 0.8,\r\n            shield_power = i.shield.power,\r\n            shield_radius = i.shield.radius,\r\n        })\r\n    end\r\nend\r\n\r\n-- Removed repulsor shields from commanders due to desync error caused by the engine\r\n-- for _, shieldedUnit in ipairs({\r\n--     'armcom',\r\n--     'armcomlvl2',\r\n--     'armcomlvl3',\r\n--     'armcomlvl4',\r\n--     'corcom',\r\n--     'corcomlvl2',\r\n--     'corcomlvl3',\r\n--     'corcomlvl4',\r\n--     'legcom',\r\n--     'legcomlvl2',\r\n--     'legcomlvl3',\r\n--     'legcomlvl4',\r\n--     'legcomlvl5',\r\n-- }) do\r\n--     addWeapon(shieldedUnit, {\r\n--         avoidfeature = false,\r\n--         craterareaofeffect = 0,\r\n--         craterboost = 0,\r\n--         cratermult = 0,\r\n--         edgeeffectiveness = 0.15,\r\n--         name = 'PlasmaRepulsor',\r\n--         range = 50,\r\n--         soundhitwet = 'sizzle',\r\n--         weapontype = 'Shield',\r\n--         damage = {\r\n--             default = 100,\r\n--         },\r\n--         shield = {\r\n--             alpha = 0.15,\r\n--             armortype = 'shields',\r\n--             energyuse = 1,\r\n--             force = 2.5,\r\n--             intercepttype = 1,\r\n--             power = 500,\r\n--             powerregen = 3,\r\n--             powerregenenergy = 3,\r\n--             radius = 100,\r\n--             repulser = true,\r\n--             smart = true,\r\n--             startingpower = 100,\r\n--             visiblerepulse = true,\r\n--             badcolor = {\r\n--                 1,\r\n--                 0.2,\r\n--                 0.2,\r\n--                 0.2,\r\n--             },\r\n--             goodcolor = {\r\n--                 0.2,\r\n--                 1,\r\n--                 0.2,\r\n--                 0.17,\r\n--             },\r\n--         },\r\n--     })\r\n-- end\r\n\r\nfor name, def in pairs(unitDefs) do\r\n    if string.sub(name, 1, 24) == 'raptor_air_fighter_basic' then\r\n        if def.weapondefs then\r\n            for _, s in pairs(def.weapondefs) do\r\n                s.name = 'Spike'\r\n                s.accuracy = 200\r\n                s.collidefriendly = 0\r\n                s.collidefeature = 0\r\n                s.avoidfeature = 0\r\n                s.avoidfriendly = 0\r\n                s.areaofeffect = 64\r\n                s.edgeeffectiveness = 0.3\r\n                s.explosiongenerator = 'custom:raptorspike-large-sparks-burn'\r\n                s.cameraShake = {}\r\n                s.dance = {}\r\n                s.interceptedbyshieldtype = 0\r\n                s.model = 'Raptors/spike.s3o'\r\n                s.reloadtime = 1.1\r\n                s.soundstart = 'talonattack'\r\n                s.startvelocity = 200\r\n                s.submissile = 1\r\n                s.smoketrail = 0\r\n                s.smokePeriod = {}\r\n                s.smoketime = {}\r\n                s.smokesize = {}\r\n                s.smokecolor = {}\r\n                s.soundhit = {}\r\n                s.texture1 = {}\r\n                s.texture2 = {}\r\n                s.tolerance = {}\r\n                s.tracks = 0\r\n                s.turnrate = 60000\r\n                s.weaponacceleration = 100\r\n                s.weapontimer = 1\r\n                s.weaponvelocity = 1000\r\n                s.weapontype = {}\r\n                s.wobble = {}\r\n            end\r\n        end\r\n    elseif name:match '^[acl][ore][rgm]com' and not name:match '_scav$' then\r\n        table.mergeInPlace(def, {\r\n            customparams = {\r\n                combatradius = 0,\r\n                fall_damage_multiplier = 0,\r\n                paratrooper = true,\r\n                wtboostunittype = {},\r\n            },\r\n            featuredefs = {\r\n                dead = {\r\n                    damage = 9999999,\r\n                    reclaimable = false,\r\n                    mass = 9999999,\r\n                },\r\n            },\r\n        })\r\n    end\r\nend\r\n\r\nlocal weaponMods = {\r\n    raptor_air_kamikaze_basic_t2_v1 = {\r\n        selfdestructas = 'raptor_empdeath_big',\r\n    },\r\n    raptor_land_swarmer_emp_t2_v1 = {\r\n        weapondefs = {\r\n            raptorparalyzersmall = {\r\n                damage = { shields = 70 },\r\n                paralyzetime = 6,\r\n            },\r\n        },\r\n    },\r\n    raptor_land_assault_emp_t2_v1 = {\r\n        weapondefs = {\r\n            raptorparalyzerbig = {\r\n                damage = { shields = 150 },\r\n                paralyzetime = 10,\r\n            },\r\n        },\r\n    },\r\n    raptor_allterrain_arty_emp_t2_v1 = {\r\n        weapondefs = {\r\n            goolauncher = {\r\n                paralyzetime = 6,\r\n            },\r\n        },\r\n    },\r\n    raptor_allterrain_arty_emp_t4_v1 = {\r\n        weapondefs = {\r\n            goolauncher = {\r\n                paralyzetime = 10,\r\n            },\r\n        },\r\n    },\r\n    raptor_air_bomber_emp_t2_v1 = {\r\n        weapondefs = {\r\n            weapon = {\r\n                damage = {\r\n                    shields = 1100,\r\n                    default = 2000,\r\n                },\r\n                paralyzetime = 10,\r\n            },\r\n        },\r\n    },\r\n    raptor_allterrain_swarmer_emp_t2_v1 = {\r\n        weapondefs = {\r\n            raptorparalyzersmall = {\r\n                damage = { shields = 70 },\r\n                paralyzetime = 6,\r\n            },\r\n        },\r\n    },\r\n    raptor_allterrain_assault_emp_t2_v1 = {\r\n        weapondefs = {\r\n            raptorparalyzerbig = {\r\n                damage = { shields = 150 },\r\n                paralyzetime = 6,\r\n            },\r\n        },\r\n    },\r\n    raptor_matriarch_electric = {\r\n        weapondefs = {\r\n            goo = { paralyzetime = 13 },\r\n            melee = { paralyzetime = 13 },\r\n            spike_emp_blob = { paralyzetime = 13 },\r\n        },\r\n    },\r\n}\r\n\r\nfor unitName, modifications in pairs(weaponMods) do\r\n    if unitDefs[unitName] then\r\n        unitDefs[unitName] = tableMerge(unitDefs[unitName], modifications)\r\n    end\r\nend\r\n\r\nfor _, raptorTurretName in pairs({\r\n    'raptor_antinuke',\r\n    'raptor_turret_acid_t2_v1',\r\n    'raptor_turret_acid_t3_v1',\r\n    'raptor_turret_acid_t4_v1',\r\n    'raptor_turret_antiair_t2_v1',\r\n    'raptor_turret_antiair_t3_v1',\r\n    'raptor_turret_antiair_t4_v1',\r\n    'raptor_turret_antinuke_t2_v1',\r\n    'raptor_turret_antinuke_t3_v1',\r\n    'raptor_turret_basic_t2_v1',\r\n    'raptor_turret_basic_t3_v1',\r\n    'raptor_turret_basic_t4_v1',\r\n    'raptor_turret_burrow_t2_v1',\r\n    'raptor_turret_emp_t2_v1',\r\n    'raptor_turret_emp_t3_v1',\r\n    'raptor_turret_emp_t4_v1',\r\n    'raptor_worm_green',\r\n}) do\r\n    local raptorTurretDef = unitDefs[raptorTurretName]\r\n    raptorTurretDef.maxthisunit = 10\r\n    raptorTurretDef.health = raptorTurretDef.health * 2\r\n    if raptorTurretDef.weapondefs then\r\n        for _, weapon in pairs(raptorTurretDef.weapondefs) do\r\n            weapon.reloadtime = weapon.reloadtime / 1.5\r\n            weapon.range = weapon.range / 2\r\n        end\r\n    end\r\nend\r\n\r\nfor _, q in pairs(unitDefs) do\r\n    if q.builder == true then\r\n        if q.canfly == true then\r\n            q.explodeas = ''\r\n            q.selfdestructas = ''\r\n        end\r\n    end\r\nend\r\n\r\nlocal bombers = {\r\n    'raptor_air_bomber_basic_t2_v1',\r\n    'raptor_air_bomber_basic_t2_v2',\r\n    'raptor_air_bomber_basic_t4_v1',\r\n    'raptor_air_bomber_basic_t4_v2',\r\n    'raptor_air_bomber_basic_t1_v1',\r\n}\r\n\r\nfor _, toChangeName in pairs(bombers) do\r\n    local def = unitDefs[toChangeName]\r\n    if def.weapondefs then\r\n        for _, weaponDef in pairs(def.weapondefs) do\r\n            weaponDef.damage.default = weaponDef.damage.default / 1.30\r\n        end\r\n    end\r\nend\r\n\r\nlocal units = { 'armrespawn', 'correspawn', 'legnanotcbase' }\r\nfor _, name in ipairs(units) do\r\n    local u = UnitDefs[name]\r\n    if u then\r\n        u.cantbetransported, u.footprintx, u.footprintz = false, 4, 4\r\n        u.customparams = u.customparams or {}\r\n        u.customparams.paratrooper = true\r\n        u.customparams.fall_damage_multiplier = 0\r\n    end\r\nend\r\n\r\n-- Hive Spawns\r\nlocal UnitDefs = UnitDefs or {}\r\n\r\nlocal function deepCopy(orig)\r\n    local copy = {}\r\n    for k, v in pairs(orig) do\r\n        copy[k] = type(v) == 'table' and deepCopy(v) or v\r\n    end\r\n    return copy\r\nend\r\n\r\nlocal function insertMissing(t, s)\r\n    for k, v in pairs(s) do\r\n        if type(v) == 'table' then\r\n            t[k] = t[k] or {}\r\n            insertMissing(t[k], v)\r\n        elseif t[k] == nil then\r\n            t[k] = v\r\n        end\r\n    end\r\nend\r\n\r\nlocal function cloneUnit(base, new, additions)\r\n    if UnitDefs[base] and not UnitDefs[new] then\r\n        local copy = deepCopy(UnitDefs[base])\r\n        insertMissing(copy, additions)\r\n        UnitDefs[new] = copy\r\n    end\r\nend\r\n\r\nlocal clones = {\r\n    {\r\n        'raptor_land_swarmer_basic_t1_v1',\r\n        'raptor_hive_swarmer_basic',\r\n        {\r\n            name = 'Hive Spawn',\r\n            customparams = {\r\n                i18n_en_humanname = 'Hive Spawn',\r\n                i18n_en_tooltip = 'Raptor spawned to defend hives from attackers.',\r\n            },\r\n        },\r\n    },\r\n    {\r\n        'raptor_land_assault_basic_t2_v1',\r\n        'raptor_hive_assault_basic',\r\n        {\r\n            name = 'Armored Assault Raptor',\r\n            customparams = {\r\n                i18n_en_humanname = 'Armored Assault Raptor',\r\n                i18n_en_tooltip = 'Heavy, slow, and unyieldingthese beasts are made to take the hits others cant.',\r\n            },\r\n        },\r\n    },\r\n    {\r\n        'raptor_land_assault_basic_t4_v1',\r\n        'raptor_hive_assault_heavy',\r\n        {\r\n            name = 'Heavy Armored Assault Raptor',\r\n            customparams = {\r\n                i18n_en_humanname = 'Heavy Armored Assault Raptor',\r\n                i18n_en_tooltip = 'Lacking speed, these armored monsters make up for it with raw, unbreakable toughness.',\r\n            },\r\n        },\r\n    },\r\n    {\r\n        'raptor_land_assault_basic_t4_v2',\r\n        'raptor_hive_assault_superheavy',\r\n        {\r\n            name = 'Super Heavy Armored Assault Raptor',\r\n            customparams = {\r\n                i18n_en_humanname = 'Super Heavy Armored Assault Raptor',\r\n                i18n_en_tooltip = 'These super-heavy armored beasts may be slow, but theyre built to take a pounding and keep rolling.',\r\n            },\r\n        },\r\n    },\r\n    {\r\n        'raptorartillery',\r\n        'raptor_evolved_motort4',\r\n        {\r\n            name = 'Evolved Lobber',\r\n            customparams = {\r\n                i18n_en_humanname = 'Evolved Lobber',\r\n                i18n_en_tooltip = 'These lobbers did not just evolvethey became deadlier than anything before them.',\r\n            },\r\n        },\r\n    },\r\n    {\r\n        'raptor_land_swarmer_basic_t1_v1',\r\n        'raptor_acidspawnling',\r\n        {\r\n            name = 'Acid Spawnling',\r\n            customparams = {\r\n                i18n_en_humanname = 'Acid Spawnling',\r\n                i18n_en_tooltip = 'This critters are so cute but can be so deadly at the same time.',\r\n            },\r\n        },\r\n    },\r\n}\r\nfor _, data in ipairs(clones) do\r\n    cloneUnit(data[1], data[2], data[3])\r\nend\r\n\r\nlocal oldUnitDef_Post = UnitDef_Post\r\nfunction UnitDef_Post(unitID, unitDef)\r\n    if oldUnitDef_Post and oldUnitDef_Post ~= UnitDef_Post then\r\n        oldUnitDef_Post(unitID, unitDef)\r\n    end\r\n\r\n    local basehp = (\r\n        UnitDefs['raptor_land_swarmer_basic_t1_v1']\r\n        and UnitDefs['raptor_land_swarmer_basic_t1_v1'].health\r\n    )\r\n\r\n    local weapon_common = {\r\n        texture1 = {},\r\n        texture2 = {},\r\n        tracks = false,\r\n        weaponvelocity = 4000,\r\n        smokePeriod = {},\r\n        smoketime = {},\r\n        smokesize = {},\r\n        smokecolor = {},\r\n        smoketrail = 0,\r\n    }\r\n\r\n    local weapon_poopoo = {\r\n        accuracy = 2048,\r\n        areaofeffect = 256,\r\n        burst = 4,\r\n        burstrate = 0.4,\r\n        flighttime = 12,\r\n        dance = 25,\r\n        craterareaofeffect = 256,\r\n        edgeeffectiveness = 0.7,\r\n        cegtag = 'blob_trail_blue',\r\n        explosiongenerator = 'custom:genericshellexplosion-huge-bomb',\r\n        impulsefactor = 0.4,\r\n        intensity = 0.3,\r\n        interceptedbyshieldtype = 1,\r\n        range = 2300,\r\n        reloadtime = 10,\r\n        rgbcolor = '0.2 0.5 0.9',\r\n        size = 8,\r\n        sizedecay = 0.09,\r\n        soundhit = 'bombsmed2',\r\n        soundstart = 'bugarty',\r\n        sprayangle = 2048,\r\n        tolerance = 60000,\r\n        turnrate = 6000,\r\n        trajectoryheight = 2,\r\n        turret = true,\r\n        weapontype = 'Cannon',\r\n        weaponvelocity = 520,\r\n        startvelocity = 140,\r\n        weaponacceleration = 125,\r\n        weapontimer = 0.2,\r\n        wobble = 14500,\r\n        highTrajectory = 1,\r\n        damage = { default = 900, shields = 600 },\r\n    }\r\n\r\n    local weapon_throwup = {\r\n        accuracy = 1024,\r\n        areaofeffect = 24,\r\n        burst = 1,\r\n        burstrate = 0.3,\r\n        cegtag = 'blob_trail_green',\r\n        edgeeffectiveness = 0.63,\r\n        explosiongenerator = 'custom:raptorspike-small-sparks-burn',\r\n        impulsefactor = 1,\r\n        intensity = 0.4,\r\n        interceptedbyshieldtype = 1,\r\n        name = 'Acid',\r\n        range = 250,\r\n        reloadtime = 1,\r\n        rgbcolor = '0.8 0.99 0.11',\r\n        size = 1,\r\n        stages = 6,\r\n        soundhit = 'bloodsplash3',\r\n        soundstart = 'alien_bombrel',\r\n        sprayangle = 128,\r\n        tolerance = 5000,\r\n        turret = true,\r\n        weapontimer = 0.1,\r\n        weapontype = 'Cannon',\r\n        weaponvelocity = 320,\r\n        damage = { default = 80 },\r\n    }\r\n\r\n    local overrides = {\r\n        raptor_hive_swarmer_basic = {\r\n            metalcost = 350,\r\n            nochasecategory = 'OBJECT',\r\n            icontype = 'raptor_land_swarmer_basic_t1_v1',\r\n        },\r\n        raptor_hive_assault_basic = {\r\n            metalcost = 3000,\r\n            health = 25000,\r\n            speed = 20.0,\r\n            nochasecategory = 'OBJECT',\r\n            icontype = 'raptor_land_assault_basic_t2_v1',\r\n            weapondefs = { aaweapon = weapon_common },\r\n        },\r\n        raptor_hive_assault_heavy = {\r\n            metalcost = 6000,\r\n            health = 30000,\r\n            speed = 17.0,\r\n            nochasecategory = 'OBJECT',\r\n            icontype = 'raptor_land_assault_basic_t4_v1',\r\n            weapondefs = { aaweapon = weapon_common },\r\n        },\r\n        raptor_hive_assault_superheavy = {\r\n            metalcost = 9000,\r\n            health = 35000,\r\n            speed = 16.0,\r\n            nochasecategory = 'OBJECT',\r\n            icontype = 'raptor_land_assault_basic_t4_v2',\r\n            weapondefs = { aaweapon = weapon_common },\r\n        },\r\n        raptor_evolved_motort4 = {\r\n            icontype = 'raptor_allterrain_arty_basic_t4_v1',\r\n            weapondefs = { poopoo = weapon_poopoo },\r\n            weapons = {\r\n                [1] = {\r\n                    badtargetcategory = 'MOBILE',\r\n                    def = 'poopoo',\r\n                    maindir = '0 0 1',\r\n                    maxangledif = 50,\r\n                    onlytargetcategory = 'NOTAIR',\r\n                },\r\n            },\r\n        },\r\n        raptor_acidspawnling = {\r\n            metalcost = 375,\r\n            energycost = 600,\r\n            health = basehp * 2,\r\n            icontype = 'raptor_land_swarmer_basic_t1_v1',\r\n            buildpic = 'raptors/raptorh1b.DDS',\r\n            objectname = 'Raptors/raptor_droneb.s3o',\r\n            weapondefs = { throwup = weapon_throwup },\r\n            weapons = {\r\n                [1] = {\r\n                    def = 'throwup',\r\n                    onlytargetcategory = 'NOTAIR',\r\n                    maindir = '0 0 1',\r\n                    maxangledif = 180,\r\n                },\r\n            },\r\n        },\r\n    }\r\n\r\n    for name, patch in pairs(overrides) do\r\n        local def = UnitDefs[name]\r\n        if def then\r\n            for k, v in pairs(patch) do\r\n                if k == 'weapondefs' then\r\n                    def.weapondefs = def.weapondefs or {}\r\n                    for w, p in pairs(v) do\r\n                        def.weapondefs[w] = def.weapondefs[w] or {}\r\n                        for a, b in pairs(p) do\r\n                            def.weapondefs[w][a] = b\r\n                        end\r\n                    end\r\n                elseif k == 'weapons' then\r\n                    def.weapons = v\r\n                else\r\n                    def[k] = v\r\n                end\r\n            end\r\n        end\r\n    end\r\nend\r\n"
        },
        {
            "path": "lua/main-units.lua",
            "data": "-- NuttyB v1.52 Units Main\r\n-- Authors: ChrispyNut, BackBash\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\n{\r\n    cortron = {\r\n        energycost = 42000,\r\n        metalcost = 3600,\r\n        buildtime = 110000,\r\n        health = 12000,\r\n        weapondefs = {\r\n            cortron_weapon = {\r\n                energypershot = 51000,\r\n                metalpershot = 600,\r\n                range = 4050,\r\n                damage = {\r\n                    default = 9000,\r\n                },\r\n            },\r\n        },\r\n    },\r\n    corfort = {\r\n        repairable = true,\r\n    },\r\n    armfort = {\r\n        repairable = true,\r\n    },\r\n    legforti = {\r\n        repairable = true,\r\n    },\r\n    armgate = {\r\n        explodeas = 'empblast',\r\n        selfdestructas = 'empblast',\r\n    },\r\n    corgate = {\r\n        explodeas = 'empblast',\r\n        selfdestructas = 'empblast',\r\n    },\r\n    legdeflector = {\r\n        explodeas = 'empblast',\r\n        selfdestructas = 'empblast',\r\n    },\r\n    corsat = {\r\n        sightdistance = 3100,\r\n        radardistance = 4080,\r\n        cruisealtitude = 3300,\r\n        energyupkeep = 1250,\r\n        category = 'OBJECT',\r\n    },\r\n    armsat = {\r\n        sightdistance = 3100,\r\n        radardistance = 4080,\r\n        cruisealtitude = 3300,\r\n        energyupkeep = 1250,\r\n        category = 'OBJECT',\r\n    },\r\n    legstarfall = {\r\n        weapondefs = {\r\n            starfire = {\r\n                energypershot = 270000,\r\n            },\r\n        },\r\n    },\r\n    armflak = {\r\n        airsightdistance = 1350,\r\n        energycost = 30000,\r\n        metalcost = 1500,\r\n        health = 4000,\r\n        weapondefs = {\r\n            armflak_gun = {\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                areaofeffect = 150,\r\n                range = 1150,\r\n                reloadtime = 0.475,\r\n                weaponvelocity = 2400,\r\n                intensity = 0.18,\r\n            },\r\n        },\r\n    },\r\n    corflak = {\r\n        airsightdistance = 1350,\r\n        energycost = 30000,\r\n        metalcost = 1500,\r\n        health = 4000,\r\n        weapondefs = {\r\n            armflak_gun = {\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                areaofeffect = 200,\r\n                range = 1350,\r\n                reloadtime = 0.56,\r\n                weaponvelocity = 2100,\r\n                intensity = 0.18,\r\n            },\r\n        },\r\n    },\r\n    legflak = {\r\n        footprintx = 4,\r\n        footprintz = 4,\r\n        airsightdistance = 1350,\r\n        energycost = 35000,\r\n        metalcost = 2100,\r\n        health = 6000,\r\n        weapondefs = {\r\n            legflak_gun = {\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                areaofeffect = 100,\r\n                burst = 3,\r\n                range = 1050,\r\n                intensity = 0.18,\r\n            },\r\n        },\r\n    },\r\n    armmercury = {\r\n        airsightdistance = 2200,\r\n        weapondefs = {\r\n            arm_advsam = {\r\n                areaofeffect = 500,\r\n                energypershot = 2000,\r\n                explosiongenerator = 'custom:flak',\r\n                flighttime = 1.5,\r\n                metalpershot = 6,\r\n                name = 'Mid-range, rapid-fire g2a guided missile launcher',\r\n                range = 2500,\r\n                reloadtime = 1.2,\r\n                smoketrail = false,\r\n                startvelocity = 1500,\r\n                weaponacceleration = 1000,\r\n                weaponvelocity = 4000,\r\n            },\r\n        },\r\n    },\r\n    corscreamer = {\r\n        airsightdistance = 2800,\r\n        weapondefs = {\r\n            cor_advsam = {\r\n                areaofeffect = 800,\r\n                energypershot = 2000,\r\n                explosiongenerator = 'custom:flak',\r\n                flighttime = 1,\r\n                metalpershot = 10,\r\n                name = 'Long-range g2a guided heavy flak missile launcher',\r\n                range = 2800,\r\n                reloadtime = 1.8,\r\n                smoketrail = false,\r\n                startvelocity = 4000,\r\n                weaponacceleration = 1000,\r\n                weaponvelocity = 8000,\r\n            },\r\n        },\r\n    },\r\n    armassistdrone = {\r\n        buildoptions = {\r\n            [31] = 'armclaw',\r\n        },\r\n    },\r\n    corassistdrone = {\r\n        buildoptions = {\r\n            [32] = 'cormaw',\r\n        },\r\n    },\r\n    legassistdrone = {\r\n        buildoptions = {\r\n            [31] = 'legdtf',\r\n            [32] = 'legdtl',\r\n            [33] = 'legdtr',\r\n        },\r\n    },\r\n    legfortt4 = {\r\n        explodeas = 'fusionExplosionSelfd',\r\n        selfdestructas = 'fusionExplosionSelfd',\r\n    },\r\n    legfort = {\r\n        explodeas = 'empblast',\r\n        selfdestructas = 'empblast',\r\n    },\r\n    raptor_hive = {\r\n        weapondefs = {\r\n            antiground = {\r\n                burst = 5,\r\n                burstrate = 0.01,\r\n                cegtag = 'arty-heavy-purple',\r\n                explosiongenerator = 'custom:dirt',\r\n                model = 'Raptors/s_raptor_white.s3o',\r\n                range = 1600,\r\n                reloadtime = 5,\r\n                rgbcolor = '0.5 0 1',\r\n                soundhit = 'smallraptorattack',\r\n                soundstart = 'bugarty',\r\n                sprayangle = 256,\r\n                turret = true,\r\n                stockpiletime = 12,\r\n                proximitypriority = nil,\r\n                damage = {\r\n                    default = 1,\r\n                    shields = 100,\r\n                },\r\n                customparams = {\r\n                    spawns_count = 15,\r\n                    spawns_expire = 11,\r\n                    spawns_mode = 'random',\r\n                    spawns_name = 'raptor_acidspawnling raptor_hive_swarmer_basic raptor_land_swarmer_basic_t1_v1 ',\r\n                    spawns_surface = 'LAND SEA',\r\n                    stockpilelimit = 10,\r\n                },\r\n            },\r\n        },\r\n    },\r\n    armapt3 = {\r\n        buildoptions = {\r\n            [58] = 'armsat',\r\n        },\r\n    },\r\n    corapt3 = {\r\n        buildoptions = {\r\n            [58] = 'corsat',\r\n        },\r\n    },\r\n    legapt3 = {\r\n        buildoptions = {\r\n            [58] = 'corsat',\r\n        },\r\n    },\r\n    armlwall = {\r\n        energycost = 25000,\r\n        metalcost = 1300,\r\n        weapondefs = {\r\n            lightning = {\r\n                energypershot = 200,\r\n                range = 430,\r\n            },\r\n        },\r\n    },\r\n    armclaw = {\r\n        collisionvolumeoffsets = '0 -2 0',\r\n        collisionvolumescales = '30 51 30',\r\n        collisionvolumetype = 'Ell',\r\n        usepiececollisionvolumes = 0,\r\n        weapondefs = {\r\n            dclaw = {\r\n                energypershot = 60,\r\n            },\r\n        },\r\n    },\r\n    legdtl = {\r\n        weapondefs = {\r\n            dclaw = {\r\n                energypershot = 60,\r\n            },\r\n        },\r\n    },\r\n    armamd = {\r\n        metalcost = 1800,\r\n        energycost = 41000,\r\n        weapondefs = {\r\n            amd_rocket = {\r\n                coverage = 2125,\r\n                stockpiletime = 70,\r\n            },\r\n        },\r\n    },\r\n    corfmd = {\r\n        metalcost = 1800,\r\n        energycost = 41000,\r\n        weapondefs = {\r\n            fmd_rocket = {\r\n                coverage = 2125,\r\n                stockpiletime = 70,\r\n            },\r\n        },\r\n    },\r\n    legabm = {\r\n        metalcost = 1800,\r\n        energycost = 41000,\r\n        weapondefs = {\r\n            fmd_rocket = {\r\n                coverage = 2125,\r\n                stockpiletime = 70,\r\n            },\r\n        },\r\n    },\r\n    corwint2 = {\r\n        metalcost = 400,\r\n    },\r\n    legwint2 = {\r\n        metalcost = 400,\r\n    },\r\n    legdtr = {\r\n        buildtime = 5250,\r\n        energycost = 5500,\r\n        metalcost = 400,\r\n        collisionvolumeoffsets = '0 -10 0',\r\n        collisionvolumescales = '39 88 39',\r\n        collisionvolumetype = 'Ell',\r\n        usepiececollisionvolumes = 0,\r\n        weapondefs = {\r\n            corlevlr_weapon = {\r\n                areaofeffect = 30,\r\n                avoidfriendly = true,\r\n                collidefriendly = false,\r\n                cegtag = 'railgun',\r\n                range = 650,\r\n                energypershot = 75,\r\n                explosiongenerator = 'custom:plasmahit-sparkonly',\r\n                rgbcolor = '0.34 0.64 0.94',\r\n                soundhit = 'mavgun3',\r\n                soundhitwet = 'splshbig',\r\n                soundstart = 'lancefire',\r\n                weaponvelocity = 1300,\r\n                damage = {\r\n                    default = 550,\r\n                },\r\n            },\r\n        },\r\n    },\r\n    armrespawn = {\r\n        blocking = false,\r\n        canresurrect = true,\r\n    },\r\n    legnanotcbase = {\r\n        blocking = false,\r\n        canresurrect = true,\r\n    },\r\n    correspawn = {\r\n        blocking = false,\r\n        canresurrect = true,\r\n    },\r\n    legrwall = {\r\n        collisionvolumeoffsets = '0 -3 0',\r\n        collisionvolumescales = '32 50 32',\r\n        collisionvolumetype = 'CylY',\r\n        energycost = 21000,\r\n        metalcost = 1400,\r\n        weapondefs = {\r\n            railgunt2 = {\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                range = 725,\r\n                reloadtime = 3,\r\n                energypershot = 200,\r\n                damage = {\r\n                    default = 1500,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                def = 'railgunt2',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n        },\r\n    },\r\n    cormwall = {\r\n        energycost = 18000,\r\n        metalcost = 1350,\r\n        weapondefs = {\r\n            exp_heavyrocket = {\r\n                areaofeffect = 70,\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                cameraShake = 0,\r\n                energypershot = 125,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                burst = 1,\r\n                burstrate = 0,\r\n                colormap = '0.75 0.73 0.67 0.024   0.37 0.4 0.30 0.021   0.22 0.21 0.14 0.018  0.024 0.014 0.009 0.03   0.0 0.0 0.0 0.008',\r\n                craterareaofeffect = 0,\r\n                explosiongenerator = 'custom:burnblack',\r\n                flamegfxtime = 1,\r\n                flighttime = 1.05,\r\n                name = 'Raptor Boomer',\r\n                reloadtime = 1.5,\r\n                rgbcolor = '1 0.25 0.1',\r\n                range = 700,\r\n                size = 2,\r\n                proximitypriority = nil,\r\n                impactonly = 1,\r\n                trajectoryheight = 1,\r\n                targetmoveerror = 0.2,\r\n                tracks = true,\r\n                weaponacceleration = 660,\r\n                weaponvelocity = 950,\r\n                damage = {\r\n                    default = 1050,\r\n                },\r\n            },\r\n        },\r\n    },\r\n    cormaw = {\r\n        collisionvolumeoffsets = '0 -2 0',\r\n        collisionvolumescales = '30 51 30',\r\n        collisionvolumetype = 'Ell',\r\n        usepiececollisionvolumes = false,\r\n        metalcost = 350,\r\n        energycost = 2500,\r\n        weapondefs = {\r\n            dmaw = {\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                areaofeffect = 80,\r\n                edgeeffectiveness = 0.45,\r\n                energypershot = 50,\r\n                burst = 24,\r\n                rgbcolor = '0.051 0.129 0.871',\r\n                rgbcolor2 = '0.57 0.624 1',\r\n                sizegrowth = 0.80,\r\n                range = 450,\r\n                intensity = 0.68,\r\n                damage = {\r\n                    default = 28,\r\n                },\r\n            },\r\n        },\r\n    },\r\n    legdtf = {\r\n        collisionvolumeoffsets = '0 -24 0',\r\n        collisionvolumescales = '30 51 30',\r\n        collisionvolumetype = 'Ell',\r\n        metalcost = 350,\r\n        energycost = 2750,\r\n        weapondefs = {\r\n            dmaw = {\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                areaofeffect = 80,\r\n                edgeeffectiveness = 0.45,\r\n                energypershot = 50,\r\n                burst = 24,\r\n                sizegrowth = 2,\r\n                range = 450,\r\n                intensity = 0.38,\r\n                sprayangle = 500,\r\n                damage = {\r\n                    default = 30,\r\n                },\r\n            },\r\n        },\r\n    },\r\n    corhllllt = {\r\n        collisionvolumeoffsets = '0 -24 0',\r\n        collisionvolumescales = '30 51 30',\r\n        metalcost = 415,\r\n        energycost = 9500,\r\n        buildtime = 10000,\r\n        health = 2115,\r\n    },\r\n    corhlt = {\r\n        energycost = 5500,\r\n        metalcost = 520,\r\n        weapondefs = {\r\n            cor_laserh1 = {\r\n                range = 750,\r\n                reloadtime = 0.95,\r\n                damage = {\r\n                    default = 395,\r\n                    vtol = 35,\r\n                },\r\n            },\r\n        },\r\n    },\r\n    armhlt = {\r\n        energycost = 5700,\r\n        metalcost = 510,\r\n        weapondefs = {\r\n            arm_laserh1 = {\r\n                range = 750,\r\n                reloadtime = 1,\r\n                damage = {\r\n                    default = 405,\r\n                    vtol = 35,\r\n                },\r\n            },\r\n        },\r\n    },\r\n    armbrtha = {\r\n        explodeas = 'fusionExplosion',\r\n        energycost = 500000,\r\n        metalcost = 18500,\r\n        buildtime = 175000,\r\n        turnrate = 16000,\r\n        health = 10450,\r\n        weapondefs = {\r\n            ARMBRTHA_MAIN = {\r\n                areaofeffect = 50,\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                beamtime = 2.5,\r\n                corethickness = 0.1,\r\n                craterareaofeffect = 90,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                cameraShake = 0,\r\n                edgeeffectiveness = 0.30,\r\n                energypershot = 14000,\r\n                explosiongenerator = 'custom:laserhit-large-blue',\r\n                firestarter = 90,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                largebeamlaser = true,\r\n                laserflaresize = 1,\r\n                impactonly = 1,\r\n                name = 'Experimental Duction Beam',\r\n                noselfdamage = true,\r\n                range = 2400,\r\n                reloadtime = 13,\r\n                rgbcolor = '0.4 0.2 0.6',\r\n                scrollspeed = 13,\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'hackshotxl3',\r\n                soundtrigger = 1,\r\n                targetmoveerror = 0.3,\r\n                texture3 = 'largebeam',\r\n                thickness = 14,\r\n                tilelength = 150,\r\n                tolerance = 10000,\r\n                turret = true,\r\n                turnrate = 16000,\r\n                weapontype = 'LaserCannon',\r\n                weaponvelocity = 3100,\r\n                damage = {\r\n                    commanders = 480,\r\n                    default = 34000,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                badtargetcategory = 'VTOL GROUNDSCOUT',\r\n                def = 'ARMBRTHA_MAIN',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n        },\r\n    },\r\n    corint = {\r\n        explodeas = 'fusionExplosion',\r\n        energycost = 505000,\r\n        metalcost = 19500,\r\n        buildtime = 170000,\r\n        health = 12450,\r\n        footprintx = 6,\r\n        footprintz = 6,\r\n        weapondefs = {\r\n            CORINT_MAIN = {\r\n                areaofeffect = 70,\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                beamtime = 2.5,\r\n                corethickness = 0.1,\r\n                craterareaofeffect = 90,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                cameraShake = 0,\r\n                edgeeffectiveness = 0.30,\r\n                energypershot = 17000,\r\n                explosiongenerator = 'custom:laserhit-large-blue',\r\n                firestarter = 90,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                largebeamlaser = true,\r\n                laserflaresize = 1,\r\n                impactonly = 1,\r\n                name = 'Mini DeathStar',\r\n                noselfdamage = true,\r\n                range = 2800,\r\n                reloadtime = 15,\r\n                rgbcolor = '0 1 0',\r\n                scrollspeed = 13,\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'annigun1',\r\n                soundtrigger = 1,\r\n                targetmoveerror = 0.3,\r\n                texture3 = 'largebeam',\r\n                thickness = 14,\r\n                tilelength = 150,\r\n                tolerance = 10000,\r\n                turret = true,\r\n                turnrate = 1600,\r\n                weapontype = 'LaserCannon',\r\n                weaponvelocity = 3100,\r\n                damage = {\r\n                    commanders = 480,\r\n                    default = 50000,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                badtargetcategory = 'VTOL GROUNDSCOUT',\r\n                def = 'CORINT_MAIN',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n        },\r\n    },\r\n    leglrpc = {\r\n        explodeas = 'fusionExplosion',\r\n        energycost = 555000,\r\n        metalcost = 21000,\r\n        buildtime = 150000,\r\n        health = 11000,\r\n        footprintx = 6,\r\n        footprintz = 6,\r\n        weapondefs = {\r\n            LEGLRPC_MAIN = {\r\n                areaofeffect = 70,\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                beamtime = 0.5,\r\n                burst = 3,\r\n                burstrate = 0.4,\r\n                corethickness = 0.1,\r\n                craterareaofeffect = 90,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                cameraShake = 0,\r\n                edgeeffectiveness = 0.30,\r\n                energypershot = 10000,\r\n                explosiongenerator = 'custom:laserhit-large-red',\r\n                firestarter = 90,\r\n                impactonly = 1,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                largebeamlaser = true,\r\n                laserflaresize = 1,\r\n                name = 'The Eagle Standard',\r\n                noselfdamage = true,\r\n                range = 2150,\r\n                reloadtime = 3,\r\n                rgbcolor = '0/1/0.4',\r\n                scrollspeed = 13,\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'lasrcrw1',\r\n                soundtrigger = 1,\r\n                targetmoveerror = 0.3,\r\n                texture3 = 'largebeam',\r\n                thickness = 12,\r\n                tilelength = 150,\r\n                tolerance = 10000,\r\n                turret = true,\r\n                turnrate = 16000,\r\n                weapontype = 'LaserCannon',\r\n                weaponvelocity = 3100,\r\n                damage = {\r\n                    commanders = 480,\r\n                    default = 6000,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                badtargetcategory = 'VTOL GROUNDSCOUT',\r\n                def = 'LEGLRPC_MAIN',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n        },\r\n    },\r\n}\r\n"
        },
        {
            "path": "lua/mega-nuke.lua",
            "data": "-- NuttyB v1.52 Mega Nuke\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\ndo\r\n    local UnitDefs = UnitDefs or {}\r\n    local merge = table.mergeInPlace or table.merge\r\n\r\n    merge(UnitDefs, {\r\n        armsilo = {\r\n            energycost = 1500000,\r\n            metalcost = 98720,\r\n            buildtime = 228500,\r\n            footprintx = 12,\r\n            footprintz = 12,\r\n            maxthisunit = 1,\r\n            explodeas = 'advancedFusionExplosion',\r\n            weapondefs = {\r\n                nuclear_missile = {\r\n                    areaofeffect = 5000,\r\n                    cameraShake = 15000,\r\n                    craterboost = 55,\r\n                    cratermult = 40,\r\n                    energypershot = 390000,\r\n                    metalpershot = 3000,\r\n                    smokesize = 28,\r\n                    smokecolor = 0.85,\r\n                    soundhitwetvolume = 80,\r\n                    soundstartvolume = 50,\r\n                    stockpiletime = 160,\r\n                    weaponvelocity = 500,\r\n                    damage = {\r\n                        commanders = 500,\r\n                        default = 19500,\r\n                        raptor = 100000,\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        corsilo = {\r\n            energycost = 1500000,\r\n            metalcost = 98720,\r\n            buildtime = 228500,\r\n            footprintx = 12,\r\n            footprintz = 12,\r\n            maxthisunit = 1,\r\n            explodeas = 'advancedFusionExplosion',\r\n            weapondefs = {\r\n                nuclear_missile = {\r\n                    areaofeffect = 5000,\r\n                    cameraShake = 15000,\r\n                    craterboost = 55,\r\n                    cratermult = 40,\r\n                    energypershot = 390000,\r\n                    metalpershot = 3000,\r\n                    smokesize = 28,\r\n                    smokecolor = 0.85,\r\n                    soundhitwetvolume = 80,\r\n                    soundstartvolume = 50,\r\n                    stockpiletime = 160,\r\n                    weaponvelocity = 500,\r\n                    damage = {\r\n                        commanders = 500,\r\n                        default = 19500,\r\n                        raptor = 100000,\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        legsilo = {\r\n            energycost = 1500000,\r\n            metalcost = 98720,\r\n            buildtime = 228500,\r\n            footprintx = 12,\r\n            footprintz = 12,\r\n            maxthisunit = 1,\r\n            explodeas = 'advancedFusionExplosion',\r\n            weapondefs = {\r\n                nuclear_missile = {\r\n                    areaofeffect = 5000,\r\n                    cameraShake = 15000,\r\n                    craterboost = 55,\r\n                    cratermult = 40,\r\n                    energypershot = 390000,\r\n                    metalpershot = 3000,\r\n                    smokesize = 28,\r\n                    smokecolor = 0.85,\r\n                    soundhitwetvolume = 80,\r\n                    soundstartvolume = 50,\r\n                    stockpiletime = 160,\r\n                    weaponvelocity = 500,\r\n                    damage = {\r\n                        commanders = 500,\r\n                        default = 19500,\r\n                        raptor = 100000,\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        raptor_turret_antinuke_t3_v1 = {\r\n            maxthisunit = 0,\r\n        },\r\n        raptor_antinuke = {\r\n            maxthisunit = 0,\r\n        },\r\n        raptor_turret_antinuke_t4_v1 = {\r\n            maxthisunit = 0,\r\n        },\r\n        raptor_turret_antinuke_t2_v1 = {\r\n            maxthisunit = 0,\r\n        },\r\n    })\r\nend\r\n"
        },
        {
            "path": "lua/mini-bosses-extended.lua",
            "data": "-- Mini Bosses Extended Version\r\n-- Authors: RCore, Altwaal\r\n-- docs.google.com/spreadsheets/d/1QSVsuAAMhBrhiZdTihVfSCwPzbbZWDLCtXWP23CU0ko\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\ndo\r\n    local unitDefs, tableMerge, tableCopy, spring =\r\n        UnitDefs or {}, table.merge, table.copy, Spring\r\n    local MATRIARCH, CFX, SCBX, BRK, VO =\r\n        'raptor_matriarch_basic',\r\n        'customfusionexplo',\r\n        'ScavComBossExplo',\r\n        'berserk',\r\n        'VTOL OBJECT'\r\n\r\n    local nbQhpMult, nbHpMult = 1.3, 1.3\r\n    nbHpMult = unitDefs[MATRIARCH].health / 60000\r\n    nbQhpMult = unitDefs['raptor_queen_epic'].health / 1250000\r\n\r\n    local playerCountScale = 1\r\n    if spring.Utilities.Gametype.IsRaptors() then\r\n        playerCountScale = (#spring.GetTeamList() - 2) / 12\r\n    end\r\n\r\n    local spawnCountMult = spring.GetModOptions().raptor_spawncountmult or 3\r\n    local totalSpawnScale = playerCountScale * (spawnCountMult / 3)\r\n\r\n    local function scaledMax(base)\r\n        return math.max(1, math.ceil(base * totalSpawnScale))\r\n    end\r\n\r\n    local mqAnger = { 50, 60, 70, 80, 90, 100 }\r\n    local mqTimeMult =\r\n        math.max(1, spring.GetModOptions().raptor_queentimemult or 1.3)\r\n    local mqStart, mqLast = mqAnger[1], mqAnger[#mqAnger]\r\n    local mqFactor = (mqTimeMult * mqLast / 1.3 - mqStart) / (mqLast - mqStart)\r\n\r\n    for idx = 2, #mqAnger do\r\n        mqAnger[idx] = math.floor(mqStart + (mqAnger[idx] - mqStart) * mqFactor)\r\n    end\r\n\r\n    local mqNumQueens = spring.GetModOptions().raptor_queen_count or 1\r\n    local mqDoomAngerScale = math.min(10, nbQhpMult / 1.3 * 0.9)\r\n    local queenThreshold = 20\r\n    local baseQueenAnger = 10\r\n            * (1.06 ^ math.max(0, math.min(mqNumQueens, queenThreshold) - 8))\r\n        + math.max(0, mqNumQueens - queenThreshold)\r\n    local mqDoomAnger = math.ceil(mqDoomAngerScale * baseQueenAnger)\r\n    local mqAngerBoss = mqTimeMult * 75 + mqDoomAnger\r\n    local maxDoombringers =\r\n        math.max(3, scaledMax(math.floor((21 * mqNumQueens + 36) / 19)))\r\n\r\n    local function newUnit(src, tgt, ovr)\r\n        if unitDefs[src] and not unitDefs[tgt] then\r\n            unitDefs[tgt] = tableMerge(unitDefs[src], ovr or {})\r\n        end\r\n    end\r\n\r\n    local baseHealth = unitDefs[MATRIARCH].health\r\n\r\n    newUnit('raptor_queen_veryeasy', 'raptor_miniq_a', {\r\n        name = 'Queenling Prima',\r\n        icontype = 'raptor_queen_veryeasy',\r\n        health = baseHealth * 5,\r\n        customparams = {\r\n            i18n_en_humanname = 'Queenling Prima',\r\n            i18n_en_tooltip = 'Majestic and bold, ruler of the hunt.',\r\n        },\r\n    })\r\n\r\n    newUnit('raptor_queen_easy', 'raptor_miniq_b', {\r\n        name = 'Queenling Secunda',\r\n        icontype = 'raptor_queen_easy',\r\n        health = baseHealth * 6,\r\n        customparams = {\r\n            i18n_en_humanname = 'Queenling Secunda',\r\n            i18n_en_tooltip = 'Swift and sharp, a noble among raptors.',\r\n        },\r\n    })\r\n\r\n    newUnit('raptor_queen_normal', 'raptor_miniq_c', {\r\n        name = 'Queenling Tertia',\r\n        icontype = 'raptor_queen_normal',\r\n        health = baseHealth * 7,\r\n        customparams = {\r\n            i18n_en_humanname = 'Queenling Tertia',\r\n            i18n_en_tooltip = 'Refined tastes. Likes her prey rare.',\r\n        },\r\n    })\r\n\r\n    newUnit('armcomboss', 'raptor_armcomboss', {\r\n        name = 'Arm Com Boss',\r\n        icontype = 'armcomboss',\r\n        health = baseHealth * 5,\r\n        customparams = {\r\n            i18n_en_humanname = 'Arm Com Boss',\r\n            i18n_en_tooltip = 'Swift and sharp, a noble among raptors.',\r\n        },\r\n    })\r\n\r\n    newUnit('corcomboss', 'raptor_corcomboss', {\r\n        name = 'Cor Com Boss',\r\n        icontype = 'corcomboss',\r\n        health = baseHealth * 6,\r\n        customparams = {\r\n            i18n_en_humanname = 'Cor Com Boss',\r\n            i18n_en_tooltip = 'Relentless and brutal, a boss among raptors.',\r\n        },\r\n    })\r\n\r\n    newUnit('legcomlvl10', 'raptor_legcomboss', {\r\n        name = 'Legion Com Boss',\r\n        icontype = 'legcomlvl10',\r\n        speed = unitDefs.legcomlvl10.speed * 1.5,\r\n        health = unitDefs.legcomlvl10.health * 3,\r\n        customparams = {\r\n            i18n_en_humanname = 'Legion Com Boss',\r\n            i18n_en_tooltip = 'Fast and resilient, a terror of the swarm.',\r\n        },\r\n    })\r\n\r\n    if unitDefs.raptor_legcomboss and unitDefs.raptor_legcomboss.weapondefs then\r\n        unitDefs.raptor_legcomboss.weapondefs.disintegrator = nil\r\n        if unitDefs.raptor_legcomboss.weapons then\r\n            local i = #unitDefs.raptor_legcomboss.weapons\r\n            while i > 0 do\r\n                local w = unitDefs.raptor_legcomboss.weapons[i]\r\n                if w and w.def == 'disintegrator' then\r\n                    table.remove(unitDefs.raptor_legcomboss.weapons, i)\r\n                end\r\n                i = i - 1\r\n            end\r\n        end\r\n    end\r\n\r\n    unitDefs.raptor_miniq_b.weapondefs.acidgoo =\r\n        tableCopy(unitDefs['raptor_matriarch_acid'].weapondefs.acidgoo)\r\n    unitDefs.raptor_miniq_c.weapondefs.empgoo =\r\n        tableCopy(unitDefs['raptor_matriarch_electric'].weapondefs.goo)\r\n\r\n    for _, d in ipairs {\r\n        {\r\n            'raptor_matriarch_basic',\r\n            'raptor_mama_ba',\r\n            'Matrona',\r\n            'Claws charged with vengeance.',\r\n        },\r\n        {\r\n            'raptor_matriarch_fire',\r\n            'raptor_mama_fi',\r\n            'Pyro Matrona',\r\n            'A firestorm of maternal wrath.',\r\n        },\r\n        {\r\n            'raptor_matriarch_electric',\r\n            'raptor_mama_el',\r\n            'Paralyzing Matrona',\r\n            'Crackling with rage, ready to strike.',\r\n        },\r\n        {\r\n            'raptor_matriarch_acid',\r\n            'raptor_mama_ac',\r\n            'Acid Matrona',\r\n            'Acid-fueled, melting everything in sight.',\r\n        },\r\n    } do\r\n        newUnit(d[1], d[2], {\r\n            name = d[3],\r\n            icontype = d[1],\r\n            health = baseHealth * 1.5,\r\n            customparams = { i18n_en_humanname = d[3], i18n_en_tooltip = d[4] },\r\n        })\r\n    end\r\n\r\n    newUnit('critter_penguinking', 'raptor_consort', {\r\n        name = 'Raptor Consort',\r\n        icontype = 'corkorg',\r\n        health = baseHealth * 3,\r\n        mass = 100000,\r\n        nochasecategory = 'MOBILE VTOL OBJECT',\r\n        sonarstealth = false,\r\n        stealth = false,\r\n        speed = 67.5,\r\n        customparams = {\r\n            i18n_en_humanname = 'Raptor Consort',\r\n            i18n_en_tooltip = 'Sneaky powerful little terror.',\r\n        },\r\n    })\r\n\r\n    unitDefs.raptor_consort.weapondefs.goo =\r\n        tableCopy(unitDefs['raptor_queen_epic'].weapondefs.goo)\r\n\r\n    newUnit('raptor_consort', 'raptor_doombringer', {\r\n        name = 'Doombringer',\r\n        icontype = 'armafust3',\r\n        health = baseHealth * 10,\r\n        speed = 50,\r\n        customparams = {\r\n            i18n_en_humanname = 'Doombringer',\r\n            i18n_en_tooltip = 'Your time is up. The Queens called for backup.',\r\n        },\r\n    })\r\n\r\n    local function pveSquad(minA, maxA, bhv, rar, amt, wgt)\r\n        return {\r\n            raptorcustomsquad = true,\r\n            raptorsquadunitsamount = amt or 1,\r\n            raptorsquadminanger = minA,\r\n            raptorsquadmaxanger = maxA,\r\n            raptorsquadweight = wgt or 5,\r\n            raptorsquadrarity = rar or 'basic',\r\n            raptorsquadbehavior = bhv,\r\n            raptorsquadbehaviordistance = 500,\r\n            raptorsquadbehaviorchance = 0.75,\r\n        }\r\n    end\r\n\r\n    local miniQueenCommon = {\r\n        selfdestructas = CFX,\r\n        explodeas = CFX,\r\n        weapondefs = {\r\n            yellow_missile = { damage = { default = 1, vtol = 1000 } },\r\n        },\r\n    }\r\n\r\n    local comBossWeapons = {\r\n        weapondefs = {\r\n            armcomlaserboss = {\r\n                name = 'Laser Boss',\r\n                reloadtime = 4,\r\n                rgbcolor = '0.3 1 0',\r\n                range = 1250,\r\n                speed = 25,\r\n                damage = { default = 4800, commanders = 2400, shield = 5000 },\r\n            },\r\n            armcomsealaserboss = {\r\n                name = 'Sea Laser Boss',\r\n                damage = { default = 5000 },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = { def = 'armcomlaserboss', badtargetcategory = VO },\r\n            [2] = {\r\n                def = 'armcomsealaserboss',\r\n                maindir = '0 0 1',\r\n                maxangledif = 180,\r\n                badtargetcategory = VO,\r\n            },\r\n        },\r\n    }\r\n\r\n    local comBossBase = tableMerge({\r\n        explodeas = SCBX,\r\n        maxthisunit = 4,\r\n        customparams = pveSquad(75, 100, BRK),\r\n    }, comBossWeapons)\r\n\r\n    for unitName, unitConfig in pairs {\r\n        raptor_miniq_a = tableMerge(miniQueenCommon, {\r\n            maxthisunit = scaledMax(2),\r\n            customparams = pveSquad(60, 100, BRK),\r\n            weapondefs = {\r\n                goo = { damage = { default = 750 } },\r\n                melee = { damage = { default = 4000 } },\r\n            },\r\n        }),\r\n        raptor_miniq_b = tableMerge(miniQueenCommon, {\r\n            maxthisunit = scaledMax(3),\r\n            customparams = pveSquad(mqAnger[3], 100, BRK),\r\n            weapondefs = {\r\n                acidgoo = {\r\n                    burst = 8,\r\n                    reloadtime = 10,\r\n                    sprayangle = 4096,\r\n                    damage = { default = 1500, shields = 1500 },\r\n                },\r\n                melee = { damage = { default = 5000 } },\r\n            },\r\n            weapons = {\r\n                [1] = { def = 'MELEE', maindir = '0 0 1', maxangledif = 155 },\r\n                [2] = { onlytargetcategory = 'VTOL', def = 'yellow_missile' },\r\n                [3] = { onlytargetcategory = 'VTOL', def = 'yellow_missile' },\r\n                [4] = { onlytargetcategory = 'VTOL', def = 'yellow_missile' },\r\n                [5] = { def = 'acidgoo', maindir = '0 0 1', maxangledif = 180 },\r\n            },\r\n        }),\r\n        raptor_miniq_c = tableMerge(miniQueenCommon, {\r\n            maxthisunit = scaledMax(4),\r\n            customparams = pveSquad(mqAnger[5], 100, BRK),\r\n            weapondefs = {\r\n                empgoo = {\r\n                    burst = 10,\r\n                    reloadtime = 10,\r\n                    sprayangle = 4096,\r\n                    damage = { default = 2000, shields = 2000 },\r\n                },\r\n                melee = { damage = { default = 6000 } },\r\n            },\r\n            weapons = {\r\n                [1] = { def = 'MELEE', maindir = '0 0 1', maxangledif = 155 },\r\n                [2] = { onlytargetcategory = 'VTOL', def = 'yellow_missile' },\r\n                [3] = { onlytargetcategory = 'VTOL', def = 'yellow_missile' },\r\n                [4] = { onlytargetcategory = 'VTOL', def = 'yellow_missile' },\r\n                [5] = { def = 'empgoo', maindir = '0 0 1', maxangledif = 180 },\r\n            },\r\n        }),\r\n        raptor_consort = {\r\n            explodeas = 'raptor_empdeath_big',\r\n            maxthisunit = scaledMax(6),\r\n            customparams = pveSquad(mqAnger[3], 100, BRK),\r\n            weapondefs = {\r\n                eyelaser = {\r\n                    name = 'Angry Eyes',\r\n                    reloadtime = 3,\r\n                    rgbcolor = '1 0 0.3',\r\n                    range = 500,\r\n                    damage = { default = 6000, commanders = 6000 },\r\n                },\r\n                goo = {\r\n                    name = 'Snowball Barrage',\r\n                    soundstart = 'penbray2',\r\n                    soundStartVolume = 2,\r\n                    cegtag = 'blob_trail_blue',\r\n                    burst = 8,\r\n                    sprayangle = 2048,\r\n                    weaponvelocity = 600,\r\n                    reloadtime = 4,\r\n                    range = 1000,\r\n                    hightrajectory = 1,\r\n                    rgbcolor = '0.7 0.85 1.0',\r\n                    damage = { default = 1000 },\r\n                },\r\n            },\r\n            weapons = {\r\n                [1] = { def = 'eyelaser', badtargetcategory = VO },\r\n                [2] = {\r\n                    def = 'goo',\r\n                    maindir = '0 0 1',\r\n                    maxangledif = 180,\r\n                    badtargetcategory = VO,\r\n                },\r\n            },\r\n        },\r\n        raptor_doombringer = {\r\n            explodeas = SCBX,\r\n            maxthisunit = maxDoombringers,\r\n            customparams = pveSquad(95, 100, BRK, nil, 1, 99),\r\n            weapondefs = {\r\n                eyelaser = {\r\n                    name = 'Eyes of Doom',\r\n                    reloadtime = 3,\r\n                    rgbcolor = '0.3 1 0',\r\n                    range = 500,\r\n                    damage = { default = 48000, commanders = 24000 },\r\n                },\r\n                goo = {\r\n                    name = 'Amber Hailstorm',\r\n                    soundstart = 'penbray1',\r\n                    soundStartVolume = 2,\r\n                    cegtag = 'blob_trail_red',\r\n                    burst = 15,\r\n                    sprayangle = 3072,\r\n                    weaponvelocity = 600,\r\n                    reloadtime = 5,\r\n                    rgbcolor = '0.7 0.85 1.0',\r\n                    hightrajectory = 1,\r\n                    damage = { default = 5000 },\r\n                },\r\n            },\r\n            weapons = {\r\n                [1] = { def = 'eyelaser', badtargetcategory = VO },\r\n                [2] = {\r\n                    def = 'goo',\r\n                    maindir = '0 0 1',\r\n                    maxangledif = 180,\r\n                    badtargetcategory = VO,\r\n                },\r\n            },\r\n        },\r\n        raptor_armcomboss = comBossBase,\r\n        raptor_corcomboss = comBossBase,\r\n        raptor_legcomboss = {\r\n            explodeas = SCBX,\r\n            maxthisunit = 1,\r\n            customparams = pveSquad(mqAnger[1], 100, BRK),\r\n            weapondefs = {\r\n                armmg_weapon = {\r\n                    accuracy = 100,\r\n                    areaofeffect = 110,\r\n                    avoidfeature = false,\r\n                    burnblow = true,\r\n                    burst = 2,\r\n                    burstrate = 0.15,\r\n                    craterareaofeffect = 0,\r\n                    craterboost = 0,\r\n                    cratermult = 0,\r\n                    edgeeffectiveness = 0.15,\r\n                    explosiongenerator = 'custom:genericshellexplosion-small-t2',\r\n                    gravityaffected = 'true',\r\n                    impulsefactor = 1.8,\r\n                    name = 'Rapid-Fire Plasma Cannon',\r\n                    noselfdamage = true,\r\n                    range = 500,\r\n                    reloadtime = 0.3,\r\n                    soundhit = 'xplomed2',\r\n                    soundhitwet = 'splssml',\r\n                    soundstart = 'cannon3',\r\n                    sprayangle = 500,\r\n                    turret = true,\r\n                    weapontype = 'Cannon',\r\n                    weaponvelocity = 600,\r\n                    damage = { default = 500, vtol = 250 },\r\n                },\r\n                torpedo = {\r\n                    areaofeffect = 75,\r\n                    avoidfeature = false,\r\n                    avoidfriendly = true,\r\n                    burnblow = true,\r\n                    burst = 4,\r\n                    burstrate = 0.15,\r\n                    cegtag = 'torpedotrail-tiny',\r\n                    collidefriendly = true,\r\n                    craterareaofeffect = 0,\r\n                    craterboost = 0,\r\n                    cratermult = 0,\r\n                    edgeeffectiveness = 0.55,\r\n                    explosiongenerator = 'custom:genericshellexplosion-small-uw',\r\n                    flighttime = 1.8,\r\n                    impulsefactor = 0.123,\r\n                    model = 'legtorpedo.s3o',\r\n                    name = 'MK-X Torpedo Launcher',\r\n                    noselfdamage = true,\r\n                    predictboost = 1,\r\n                    range = 600,\r\n                    reloadtime = 0.8,\r\n                    soundhit = 'xplodep2',\r\n                    soundstart = 'torpedo1',\r\n                    startvelocity = 230,\r\n                    tracks = false,\r\n                    turnrate = 2500,\r\n                    turret = true,\r\n                    waterweapon = true,\r\n                    weaponacceleration = 50,\r\n                    weapontimer = 3,\r\n                    weapontype = 'TorpedoLauncher',\r\n                    weaponvelocity = 425,\r\n                    damage = { default = 400, subs = 200 },\r\n                },\r\n                railgunt2 = {\r\n                    areaofeffect = 16,\r\n                    avoidfeature = false,\r\n                    burnblow = false,\r\n                    burst = 4,\r\n                    burstrate = 0.12,\r\n                    cegtag = 'railgun',\r\n                    collidefriendly = false,\r\n                    craterareaofeffect = 0,\r\n                    craterboost = 0,\r\n                    cratermult = 0,\r\n                    duration = 0.12,\r\n                    edgeeffectiveness = 0.85,\r\n                    explosiongenerator = 'custom:plasmahit-sparkonly',\r\n                    fallOffRate = 0.2,\r\n                    firestarter = 0,\r\n                    impulsefactor = 1,\r\n                    intensity = 0.8,\r\n                    minintensity = 1,\r\n                    name = 'Railgun',\r\n                    noselfdamage = true,\r\n                    ownerExpAccWeight = 4.0,\r\n                    proximitypriority = 1,\r\n                    range = 950,\r\n                    reloadtime = 2,\r\n                    rgbcolor = '0.74 0.64 0.94',\r\n                    soundhit = 'mavgun3',\r\n                    soundhitwet = 'splshbig',\r\n                    soundstart = 'lancefire',\r\n                    soundstartvolume = 26,\r\n                    thickness = 3,\r\n                    tolerance = 6000,\r\n                    turret = true,\r\n                    weapontype = 'LaserCannon',\r\n                    weaponvelocity = 3000,\r\n                    damage = { default = 500 },\r\n                },\r\n                botcannon = {\r\n                    accuracy = 0.2,\r\n                    areaofeffect = 10,\r\n                    avoidfeature = false,\r\n                    avoidfriendly = false,\r\n                    burst = 9,\r\n                    burstrate = 0.025,\r\n                    collidefriendly = false,\r\n                    craterareaofeffect = 116,\r\n                    craterboost = 0.1,\r\n                    cratermult = 0.1,\r\n                    edgeeffectiveness = 0.15,\r\n                    energypershot = 5400,\r\n                    explosiongenerator = 'custom:botrailspawn',\r\n                    gravityaffected = 'true',\r\n                    heightboostfactor = 8,\r\n                    hightrajectory = 1,\r\n                    impulsefactor = 0.5,\r\n                    leadbonus = 0,\r\n                    model = 'LegionUnitCapsule.s3o',\r\n                    movingaccuracy = 600,\r\n                    mygravity = 4.8,\r\n                    name = 'Long range bot cannon',\r\n                    noselfdamage = true,\r\n                    projectiles = 2,\r\n                    range = 700,\r\n                    reloadtime = 0.9,\r\n                    sprayangle = 2800,\r\n                    stockpile = true,\r\n                    stockpiletime = 10,\r\n                    soundhit = 'xplonuk1xs',\r\n                    soundhitwet = 'splshbig',\r\n                    soundstart = 'lrpcshot3',\r\n                    soundstartvolume = 50,\r\n                    turret = true,\r\n                    trajectoryheight = 1,\r\n                    waterbounce = true,\r\n                    bounceSlip = 0.74,\r\n                    bouncerebound = 0.5,\r\n                    numbounce = 10,\r\n                    weapontype = 'Cannon',\r\n                    weaponvelocity = 2000,\r\n                    damage = { default = 0, shields = 250 },\r\n                    customparams = {\r\n                        spawns_name = 'raptor_allterrain_assault_basic_t4_v2 raptor_allterrain_assault_acid_t2_v1',\r\n                        spawns_expire = 15,\r\n                        spawns_surface = 'LAND',\r\n                        spawns_mode = 'random',\r\n                        stockpilelimit = 2,\r\n                    },\r\n                },\r\n            },\r\n            weapons = {\r\n                [1] = {\r\n                    def = 'armmg_weapon',\r\n                    onlytargetcategory = 'NOTSUB',\r\n                    fastautoretargeting = true,\r\n                },\r\n                [2] = {\r\n                    badtargetcategory = 'VTOL',\r\n                    def = 'torpedo',\r\n                    onlytargetcategory = 'NOTAIR',\r\n                },\r\n                [3] = {\r\n                    badtargetcategory = 'NOTAIR GROUNDSCOUT',\r\n                    def = 'railgunt2',\r\n                    onlytargetcategory = 'NOTSUB',\r\n                },\r\n                [4] = {\r\n                    badtargetcategory = 'VTOL GROUNDSCOUT SHIP',\r\n                    def = 'botcannon',\r\n                    onlytargetcategory = 'NOTSHIP',\r\n                },\r\n            },\r\n        },\r\n        raptor_mama_ba = {\r\n            maxthisunit = scaledMax(4),\r\n            customparams = pveSquad(55, 100, BRK),\r\n            weapondefs = {\r\n                goo = { damage = { default = 750 } },\r\n                melee = { damage = { default = 750 } },\r\n            },\r\n        },\r\n        raptor_mama_fi = {\r\n            explodeas = 'raptor_empdeath_big',\r\n            maxthisunit = scaledMax(4),\r\n            customparams = pveSquad(55, 100, BRK),\r\n            weapondefs = {\r\n                flamethrowerspike = { damage = { default = 80 } },\r\n                flamethrowermain = { damage = { default = 160 } },\r\n            },\r\n        },\r\n        raptor_mama_el = {\r\n            maxthisunit = scaledMax(4),\r\n            customparams = pveSquad(65, 100, BRK),\r\n        },\r\n        raptor_mama_ac = {\r\n            maxthisunit = scaledMax(4),\r\n            customparams = pveSquad(60, 100, BRK),\r\n            weapondefs = { melee = { damage = { default = 750 } } },\r\n        },\r\n        raptor_land_assault_basic_t4_v2 = {\r\n            maxthisunit = scaledMax(8),\r\n            customparams = pveSquad(33, 100, 'raider'),\r\n        },\r\n        raptor_land_assault_basic_t4_v1 = {\r\n            maxthisunit = scaledMax(12),\r\n            customparams = pveSquad(51, 100, 'raider', 'basic', 2),\r\n        },\r\n    } do\r\n        unitDefs[unitName] = unitDefs[unitName] or {}\r\n        table.mergeInPlace(unitDefs[unitName], unitConfig, true)\r\n    end\r\n\r\n    local newCosts = {\r\n        raptor_mama_ba = 36000,\r\n        raptor_mama_fi = 36000,\r\n        raptor_mama_el = 36000,\r\n        raptor_mama_ac = 36000,\r\n        raptor_consort = 45000,\r\n        raptor_doombringer = 90000,\r\n        raptor_armcomboss = 45000,\r\n        raptor_corcomboss = 45000,\r\n        raptor_legcomboss = 45000,\r\n    }\r\n\r\n    local oldUnitDef_Post = UnitDef_Post\r\n    function UnitDef_Post(unitID, unitDef)\r\n        if oldUnitDef_Post then\r\n            oldUnitDef_Post(unitID, unitDef)\r\n        end\r\n        local nbHpScale = nbHpMult > 1.3 and nbHpMult / 1.3 or 1\r\n        for unitName, baseCost in pairs(newCosts) do\r\n            if UnitDefs[unitName] then\r\n                UnitDefs[unitName].metalcost = math.floor(baseCost * nbHpScale)\r\n            end\r\n        end\r\n    end\r\nend\r\n"
        },
        {
            "path": "lua/mini-bosses.lua",
            "data": "-- Mini Bosses v2g\r\n-- Authors: RCore\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\ndo\r\n    local unitDefs, tableMerge, tableCopy, raptor_matriarch_basic, customfusionexplo, spring =\r\n        UnitDefs or {},\r\n        table.merge,\r\n        table.copy,\r\n        'raptor_matriarch_basic',\r\n        'customfusionexplo',\r\n        Spring\r\n\r\n    local nbQhpMult, nbHpMult = 1.3, 1.3\r\n\r\n    nbHpMult = unitDefs[raptor_matriarch_basic].health / 60000\r\n    nbQhpMult = unitDefs['raptor_queen_epic'].health / 1250000\r\n\r\n    local playerCountScale = 1\r\n    local isRaptors = spring.Utilities.Gametype.IsRaptors()\r\n    if isRaptors or spring.Utilities.Gametype.IsScavengers() then\r\n        playerCountScale = (#spring.GetTeamList() - 2) / 12\r\n    end\r\n\r\n    local spawnCountMult = spring.GetModOptions().raptor_spawncountmult or 3\r\n    local totalSpawnScale = playerCountScale * (spawnCountMult / 3)\r\n\r\n    local function scaledMax(base)\r\n        return math.max(1, math.ceil(base * totalSpawnScale))\r\n    end\r\n\r\n    local mqAnger = { 70, 85, 90, 105, 110, 125 }\r\n    local mqTimeMult =\r\n        math.max(1, spring.GetModOptions().raptor_queentimemult or 1.3)\r\n    local mqStart, mqLast = mqAnger[1], mqAnger[#mqAnger]\r\n    local mqTargetLast = mqTimeMult * mqAnger[#mqAnger] / 1.3\r\n    local mqFactor = (mqTargetLast - mqStart) / (mqLast - mqStart)\r\n\r\n    for i = 2, #mqAnger do\r\n        mqAnger[i] = math.floor(mqStart + (mqAnger[i] - mqStart) * mqFactor)\r\n    end\r\n\r\n    local mqNumQueens = spring.GetModOptions().raptor_queen_count or 1\r\n    local mqDoomAngerScale = 1\r\n    mqDoomAngerScale = math.min(10, nbQhpMult / 1.3 * 0.9)\r\n\r\n    -- Compact logic for hybrid exponential/linear growth\r\n    local queenThreshold = 20\r\n    local exponentialPart = 10\r\n        * (1.06 ^ math.max(0, math.min(mqNumQueens, queenThreshold) - 8))\r\n    local x = math.max(0, mqNumQueens - queenThreshold)\r\n    local linearPart = (x <= 80) and (0.6 * x - x * x / 270)\r\n        or (24.3 + (x - 80) * 0.15)\r\n    local baseQueenAnger = exponentialPart + linearPart\r\n\r\n    local mqDoomAnger = math.ceil(mqDoomAngerScale * baseQueenAnger)\r\n    local mqAngerBoss = mqTimeMult * 100 + mqDoomAnger\r\n    local maxDoombringers =\r\n        math.max(3, scaledMax(math.floor((21 * mqNumQueens + 36) / 19)))\r\n\r\n    local function newUnit(old, new, data)\r\n        if unitDefs[old] and not unitDefs[new] then\r\n            unitDefs[new] = tableMerge(unitDefs[old], data or {})\r\n        end\r\n    end\r\n\r\n    local raptor_matriarch_basic_health =\r\n        unitDefs[raptor_matriarch_basic].health\r\n\r\n    newUnit('raptor_queen_veryeasy', 'raptor_miniq_a', {\r\n        name = 'Queenling Prima',\r\n        icontype = 'raptor_queen_veryeasy',\r\n        health = raptor_matriarch_basic_health * 5,\r\n        customparams = {\r\n            i18n_en_humanname = 'Queenling Prima',\r\n            i18n_en_tooltip = 'Majestic and bold, ruler of the hunt.',\r\n        },\r\n    })\r\n\r\n    newUnit('raptor_queen_easy', 'raptor_miniq_b', {\r\n        name = 'Queenling Secunda',\r\n        icontype = 'raptor_queen_easy',\r\n        health = raptor_matriarch_basic_health * 6,\r\n        customparams = {\r\n            i18n_en_humanname = 'Queenling Secunda',\r\n            i18n_en_tooltip = 'Swift and sharp, a noble among raptors.',\r\n        },\r\n    })\r\n\r\n    newUnit('raptor_queen_normal', 'raptor_miniq_c', {\r\n        name = 'Queenling Tertia',\r\n        icontype = 'raptor_queen_normal',\r\n        health = raptor_matriarch_basic_health * 7,\r\n        customparams = {\r\n            i18n_en_humanname = 'Queenling Tertia',\r\n            i18n_en_tooltip = 'Refined tastes. Likes her prey rare.',\r\n        },\r\n    })\r\n\r\n    unitDefs.raptor_miniq_b.weapondefs.acidgoo =\r\n        tableCopy(unitDefs['raptor_matriarch_acid'].weapondefs.acidgoo)\r\n    unitDefs.raptor_miniq_c.weapondefs.empgoo =\r\n        tableCopy(unitDefs['raptor_matriarch_electric'].weapondefs.goo)\r\n\r\n    for _, l in ipairs {\r\n        {\r\n            'raptor_matriarch_basic',\r\n            'raptor_mama_ba',\r\n            'Matrona',\r\n            'Claws charged with vengeance.',\r\n        },\r\n        {\r\n            'raptor_matriarch_fire',\r\n            'raptor_mama_fi',\r\n            'Pyro Matrona',\r\n            'A firestorm of maternal wrath.',\r\n        },\r\n        {\r\n            'raptor_matriarch_electric',\r\n            'raptor_mama_el',\r\n            'Paralyzing Matrona',\r\n            'Crackling with rage, ready to strike.',\r\n        },\r\n        {\r\n            'raptor_matriarch_acid',\r\n            'raptor_mama_ac',\r\n            'Acid Matrona',\r\n            'Acid-fueled, melting everything in sight.',\r\n        },\r\n    } do\r\n        newUnit(l[1], l[2], {\r\n            name = l[3],\r\n            icontype = l[1],\r\n            health = raptor_matriarch_basic_health * 1.5,\r\n            customparams = {\r\n                i18n_en_humanname = l[3],\r\n                i18n_en_tooltip = l[4],\r\n            },\r\n        })\r\n    end\r\n\r\n    newUnit('critter_penguinking', 'raptor_consort', {\r\n        name = 'Raptor Consort',\r\n        icontype = 'corkorg',\r\n        health = raptor_matriarch_basic_health * 4,\r\n        mass = 100000,\r\n        nochasecategory = 'MOBILE VTOL OBJECT',\r\n        sonarstealth = false,\r\n        stealth = false,\r\n        speed = 67.5,\r\n        customparams = {\r\n            i18n_en_humanname = 'Raptor Consort',\r\n            i18n_en_tooltip = 'Sneaky powerful little terror.',\r\n        },\r\n    })\r\n\r\n    unitDefs.raptor_consort.weapondefs.goo =\r\n        tableCopy(unitDefs['raptor_queen_epic'].weapondefs.goo)\r\n\r\n    newUnit('raptor_consort', 'raptor_doombringer', {\r\n        name = 'Doombringer',\r\n        icontype = 'armafust3',\r\n        health = raptor_matriarch_basic_health * 12,\r\n        speed = 50,\r\n        customparams = {\r\n            i18n_en_humanname = 'Doombringer',\r\n            i18n_en_tooltip = 'Your time is up. The Queens called for backup.',\r\n        },\r\n    })\r\n\r\n    local function pveSquad(p, q, e, r, s, t)\r\n        local mode_prefix = isRaptors and 'raptor' or 'scav'\r\n        return {\r\n            [mode_prefix .. 'customsquad'] = true,\r\n            [mode_prefix .. 'squadunitsamount'] = s or 1,\r\n            [mode_prefix .. 'squadminanger'] = p,\r\n            [mode_prefix .. 'squadmaxanger'] = q,\r\n            [mode_prefix .. 'squadweight'] = t or 5,\r\n            [mode_prefix .. 'squadrarity'] = r or 'basic',\r\n            [mode_prefix .. 'squadbehavior'] = e,\r\n            [mode_prefix .. 'squadbehaviordistance'] = 500,\r\n            [mode_prefix .. 'squadbehaviorchance'] = 0.75,\r\n        }\r\n    end\r\n\r\n    local miniQueenCommon = {\r\n        selfdestructas = customfusionexplo,\r\n        explodeas = customfusionexplo,\r\n        weapondefs = {\r\n            yellow_missile = { damage = { default = 1, vtol = 1000 } },\r\n        },\r\n    }\r\n\r\n    for f, u in pairs {\r\n        raptor_miniq_a = tableMerge(miniQueenCommon, {\r\n            maxthisunit = scaledMax(2),\r\n            customparams = pveSquad(mqAnger[1], mqAnger[2], 'berserk'),\r\n            weapondefs = {\r\n                goo = { damage = { default = 750 } },\r\n                melee = { damage = { default = 4000 } },\r\n            },\r\n        }),\r\n        raptor_miniq_b = tableMerge(miniQueenCommon, {\r\n            maxthisunit = scaledMax(3),\r\n            customparams = pveSquad(mqAnger[3], mqAnger[4], 'berserk'),\r\n            weapondefs = {\r\n                acidgoo = {\r\n                    burst = 8,\r\n                    reloadtime = 10,\r\n                    sprayangle = 4096,\r\n                    damage = { default = 1500, shields = 1500 },\r\n                },\r\n                melee = { damage = { default = 5000 } },\r\n            },\r\n            weapons = {\r\n                [1] = {\r\n                    def = 'MELEE',\r\n                    maindir = '0 0 1',\r\n                    maxangledif = 155,\r\n                },\r\n                [2] = {\r\n                    onlytargetcategory = 'VTOL',\r\n                    def = 'yellow_missile',\r\n                },\r\n                [3] = {\r\n                    onlytargetcategory = 'VTOL',\r\n                    def = 'yellow_missile',\r\n                },\r\n                [4] = {\r\n                    onlytargetcategory = 'VTOL',\r\n                    def = 'yellow_missile',\r\n                },\r\n                [5] = {\r\n                    def = 'acidgoo',\r\n                    maindir = '0 0 1',\r\n                    maxangledif = 180,\r\n                },\r\n            },\r\n        }),\r\n        raptor_miniq_c = tableMerge(miniQueenCommon, {\r\n            maxthisunit = scaledMax(4),\r\n            customparams = pveSquad(mqAnger[5], mqAnger[6], 'berserk'),\r\n            weapondefs = {\r\n                empgoo = {\r\n                    burst = 10,\r\n                    reloadtime = 10,\r\n                    sprayangle = 4096,\r\n                    damage = { default = 2000, shields = 2000 },\r\n                },\r\n                melee = { damage = { default = 6000 } },\r\n            },\r\n            weapons = {\r\n                [1] = {\r\n                    def = 'MELEE',\r\n                    maindir = '0 0 1',\r\n                    maxangledif = 155,\r\n                },\r\n                [2] = {\r\n                    onlytargetcategory = 'VTOL',\r\n                    def = 'yellow_missile',\r\n                },\r\n                [3] = {\r\n                    onlytargetcategory = 'VTOL',\r\n                    def = 'yellow_missile',\r\n                },\r\n                [4] = {\r\n                    onlytargetcategory = 'VTOL',\r\n                    def = 'yellow_missile',\r\n                },\r\n                [5] = {\r\n                    def = 'empgoo',\r\n                    maindir = '0 0 1',\r\n                    maxangledif = 180,\r\n                },\r\n            },\r\n        }),\r\n        raptor_consort = {\r\n            explodeas = 'raptor_empdeath_big',\r\n            maxthisunit = scaledMax(6),\r\n            customparams = pveSquad(mqAnger[2], 1000, 'berserk'),\r\n            weapondefs = {\r\n                eyelaser = {\r\n                    name = 'Angry Eyes',\r\n                    reloadtime = 3,\r\n                    rgbcolor = '1 0 0.3',\r\n                    range = 500,\r\n                    damage = { default = 6000, commanders = 6000 },\r\n                },\r\n                goo = {\r\n                    name = 'Snowball Barrage',\r\n                    soundstart = 'penbray2',\r\n                    soundStartVolume = 2,\r\n                    cegtag = 'blob_trail_blue',\r\n                    burst = 8,\r\n                    sprayangle = 2048,\r\n                    weaponvelocity = 600,\r\n                    reloadtime = 4,\r\n                    range = 1000,\r\n                    hightrajectory = 1,\r\n                    rgbcolor = '0.7 0.85 1.0',\r\n                    damage = { default = 1000 },\r\n                },\r\n            },\r\n            weapons = {\r\n                [1] = {\r\n                    def = 'eyelaser',\r\n                    badtargetcategory = 'VTOL OBJECT',\r\n                },\r\n                [2] = {\r\n                    def = 'goo',\r\n                    maindir = '0 0 1',\r\n                    maxangledif = 180,\r\n                    badtargetcategory = 'VTOL OBJECT',\r\n                },\r\n            },\r\n        },\r\n\r\n        raptor_doombringer = {\r\n            explodeas = 'ScavComBossExplo',\r\n            maxthisunit = maxDoombringers,\r\n            customparams = pveSquad(mqAngerBoss, 1000, 'berserk', nil, 1, 99),\r\n            weapondefs = {\r\n                eyelaser = {\r\n                    name = 'Eyes of Doom',\r\n                    reloadtime = 3,\r\n                    rgbcolor = '0.3 1 0',\r\n                    range = 500,\r\n                    damage = { default = 48000, commanders = 24000 },\r\n                },\r\n                goo = {\r\n                    name = 'Amber Hailstorm',\r\n                    soundstart = 'penbray1',\r\n                    soundStartVolume = 2,\r\n                    cegtag = 'blob_trail_red',\r\n                    burst = 15,\r\n                    sprayangle = 3072,\r\n                    weaponvelocity = 600,\r\n                    reloadtime = 5,\r\n                    rgbcolor = '0.7 0.85 1.0',\r\n                    hightrajectory = 1,\r\n                    damage = { default = 5000 },\r\n                },\r\n            },\r\n            weapons = {\r\n                [1] = {\r\n                    def = 'eyelaser',\r\n                    badtargetcategory = 'VTOL OBJECT',\r\n                },\r\n                [2] = {\r\n                    def = 'goo',\r\n                    maindir = '0 0 1',\r\n                    maxangledif = 180,\r\n                    badtargetcategory = 'VTOL OBJECT',\r\n                },\r\n            },\r\n        },\r\n\r\n        raptor_mama_ba = {\r\n            maxthisunit = scaledMax(4),\r\n            customparams = pveSquad(55, mqAnger[3] - 1, 'berserk'),\r\n            weapondefs = {\r\n                goo = { damage = { default = 750 } },\r\n                melee = { damage = { default = 750 } },\r\n            },\r\n        },\r\n        raptor_mama_fi = {\r\n            explodeas = 'raptor_empdeath_big',\r\n            maxthisunit = scaledMax(4),\r\n            customparams = pveSquad(55, mqAnger[3] - 1, 'berserk'),\r\n            weapondefs = {\r\n                flamethrowerspike = { damage = { default = 80 } },\r\n                flamethrowermain = { damage = { default = 160 } },\r\n            },\r\n        },\r\n        raptor_mama_el = {\r\n            maxthisunit = scaledMax(4),\r\n            customparams = pveSquad(65, 1000, 'berserk'),\r\n        },\r\n        raptor_mama_ac = {\r\n            maxthisunit = scaledMax(4),\r\n            customparams = pveSquad(60, 1000, 'berserk'),\r\n            weapondefs = {\r\n                melee = { damage = { default = 750 } },\r\n            },\r\n        },\r\n        raptor_land_assault_basic_t4_v2 = {\r\n            maxthisunit = scaledMax(8),\r\n            customparams = pveSquad(33, 50, 'raider'),\r\n        },\r\n        raptor_land_assault_basic_t4_v1 = {\r\n            maxthisunit = scaledMax(12),\r\n            customparams = pveSquad(51, 64, 'raider', 'basic', 2),\r\n        },\r\n    } do\r\n        unitDefs[f] = unitDefs[f] or {}\r\n        table.mergeInPlace(unitDefs[f], u, true)\r\n    end\r\n\r\n    local newCosts = {\r\n        raptor_mama_ba = 36000,\r\n        raptor_mama_fi = 36000,\r\n        raptor_mama_el = 36000,\r\n        raptor_mama_ac = 36000,\r\n        raptor_consort = 45000,\r\n        raptor_doombringer = 90000,\r\n    }\r\n\r\n    local H = UnitDef_Post\r\n\r\n    function UnitDef_Post(p, I)\r\n        if H then\r\n            H(p, I)\r\n        end\r\n\r\n        local nbHpScale = 1\r\n\r\n        if nbHpMult > 1.3 then\r\n            nbHpScale = nbHpMult / 1.3\r\n        end\r\n\r\n        for unitName, baseCost in pairs(newCosts) do\r\n            if UnitDefs[unitName] then\r\n                local finalCost = math.floor(baseCost * nbHpScale)\r\n                UnitDefs[unitName].metalcost = finalCost\r\n            end\r\n        end\r\n    end\r\nend\r\n"
        },
        {
            "path": "lua/misc/all_coms_inherit_xp.lua",
            "data": "-- Evo Commander XP Inheritance\r\nfor name, ud in pairs(UnitDefs) do\r\n\tif string.match(name, 'comlvl%d') or string.match(name, 'armcom') or string.match(name, 'corcom') or string.match(name, 'legcom') then\r\n\t\tud.customparams = ud.customparams or {}\r\n\t\tud.customparams.inheritxpratemultiplier = 0.5\r\n\t\tud.customparams.childreninheritxp = 'TURRET MOBILEBUILT'\r\n\t\tud.customparams.parentsinheritxp = 'TURRET MOBILEBUILT'\r\n\tend\r\nend\r\n"
        },
        {
            "path": "lua/misc/auto-evolve.lua",
            "data": "--Auto Unit Evolution\r\nlocal a = {\r\n\tarm = {\r\n\t\t{from = 'armwin', fromDesc = 'Wind Turbine', to = 'armsolar', toDesc = 'Solar Collector', timer = 60},\r\n\t\t{from = 'armsolar', fromDesc = 'Solar Collector', to = 'armadvsol', toDesc = 'Advanced Solar Collector', timer = 120},\r\n\t\t{\r\n\t\t\tfrom = 'armadvsol',\r\n\t\t\tfromDesc = 'Advanced Solar Collector',\r\n\t\t\tto = 'armwint2',\r\n\t\t\ttoDesc = 'Advanced Wind Turbine',\r\n\t\t\ttimer = 240\r\n\t\t},\r\n\t\t{from = 'armwint2', fromDesc = 'Fusion Reactor', to = 'armfus', toDesc = 'Advanced Fusion Reactor', timer = 360},\r\n\t\t{from = 'armfus', fromDesc = 'Fusion Reactor', to = 'armafus', toDesc = 'Advanced Fusion Reactor', timer = 360},\r\n\t\t{\r\n\t\t\tfrom = 'armgeo',\r\n\t\t\tfromDesc = 'Geothermal Powerplant',\r\n\t\t\tto = 'armfakegeo',\r\n\t\t\ttoDesc = '-Workaround Fake Geo-',\r\n\t\t\ttimer = 360\r\n\t\t},\r\n\t\t{\r\n\t\t\tfrom = 'armfakegeo',\r\n\t\t\tfromDesc = '-Workaround Fake Geo-',\r\n\t\t\tto = 'armageo',\r\n\t\t\ttoDesc = 'Advanced Geothermal Powerplant',\r\n\t\t\ttimer = 2\r\n\t\t},\r\n\t\t{from = 'armtide', fromDesc = 'Tidal Generator', to = 'armuwfus', toDesc = 'Naval Fusion Reactor', timer = 300},\r\n\t\t{from = 'armmex', fromDesc = 'Metal Extractor', to = 'armfakemex', toDesc = '-Workaround Fake Mex-', timer = 360},\r\n\t\t{\r\n\t\t\tfrom = 'armfakemex',\r\n\t\t\tfromDesc = '-Workaround Fake Mex-',\r\n\t\t\tto = 'armmoho',\r\n\t\t\ttoDesc = 'Advanced Metal Extractor',\r\n\t\t\ttimer = 2\r\n\t\t},\r\n\t\t{from = 'armdrag', fromDesc = \"Dragon's Teeth\", to = 'armfort', toDesc = 'Fortification Wall', timer = 360},\r\n\t\t{\r\n\t\t\tfrom = 'armnanotc',\r\n\t\t\tfromDesc = 'Construction Turret',\r\n\t\t\tto = 'armnanotct2',\r\n\t\t\ttoDesc = 'Advanced Construction Turret',\r\n\t\t\ttimer = 120\r\n\t\t},\r\n\t\t{\r\n\t\t\tfrom = 'armnanotcplat',\r\n\t\t\tfromDesc = 'Naval Construction Turret',\r\n\t\t\tto = 'armnanotc2plat',\r\n\t\t\ttoDesc = 'Advanced Naval Construction Turret',\r\n\t\t\ttimer = 120\r\n\t\t},\r\n\t\t{\r\n\t\t\tfrom = 'armfasp',\r\n\t\t\tfromDesc = 'Water Air Repair Pad',\r\n\t\t\tto = 'mission_command_tower',\r\n\t\t\ttoDesc = 'Mission Command Tower',\r\n\t\t\ttimer = 60,\r\n\t\t\tannounce = true,\r\n\t\t\tanSize = 25\r\n\t\t}\r\n\t},\r\n\tcor = {\r\n\t\t{from = 'corwin', fromDesc = 'Wind Turbine', to = 'corsolar', toDesc = 'Solar Collector', timer = 60},\r\n\t\t{from = 'corsolar', fromDesc = 'Solar Collector', to = 'coradvsol', toDesc = 'Advanced Solar Collector', timer = 120},\r\n\t\t{\r\n\t\t\tfrom = 'coradvsol',\r\n\t\t\tfromDesc = 'Advanced Solar Collector',\r\n\t\t\tto = 'corwint2',\r\n\t\t\ttoDesc = 'Advanced Wind Turbine',\r\n\t\t\ttimer = 240\r\n\t\t},\r\n\t\t{from = 'corwint2', fromDesc = 'Advanced Wind Turbine', to = 'corfus', toDesc = 'Fusion Reactor', timer = 300},\r\n\t\t{from = 'corfus', fromDesc = 'Fusion Reactor', to = 'corafus', toDesc = 'Advanced Fusion Reactor', timer = 360},\r\n\t\t{\r\n\t\t\tfrom = 'corgeo',\r\n\t\t\tfromDesc = 'Geothermal Powerplant',\r\n\t\t\tto = 'corfakegeo',\r\n\t\t\ttoDesc = '-Workaround Fake Geo-',\r\n\t\t\ttimer = 360\r\n\t\t},\r\n\t\t{\r\n\t\t\tfrom = 'corfakegeo',\r\n\t\t\tfromDesc = '-Workaround Fake Geo-',\r\n\t\t\tto = 'corageo',\r\n\t\t\ttoDesc = 'Advanced Geothermal Powerplant',\r\n\t\t\ttimer = 2\r\n\t\t},\r\n\t\t{from = 'cortide', fromDesc = 'Tidal Generator', to = 'coruwfus', toDesc = 'Naval Fusion Reactor', timer = 300},\r\n\t\t{from = 'cormex', fromDesc = 'Metal Extractor', to = 'corfakemex', toDesc = '-Workaround Fake Mex-', timer = 360},\r\n\t\t{\r\n\t\t\tfrom = 'corfakemex',\r\n\t\t\tfromDesc = '-Workaround Fake Mex-',\r\n\t\t\tto = 'cormoho',\r\n\t\t\ttoDesc = 'Advanced Metal Extractor',\r\n\t\t\ttimer = 2\r\n\t\t},\r\n\t\t{from = 'cordrag', fromDesc = \"Dragon's Teeth\", to = 'corfort', toDesc = 'Fortification Wall', timer = 360},\r\n\t\t{\r\n\t\t\tfrom = 'cornanotc',\r\n\t\t\tfromDesc = 'Construction Turret',\r\n\t\t\tto = 'cornanotct2',\r\n\t\t\ttoDesc = 'Advanced Construction Turret',\r\n\t\t\ttimer = 120\r\n\t\t},\r\n\t\t{\r\n\t\t\tfrom = 'cornanotcplat',\r\n\t\t\tfromDesc = 'Naval Construction Turret',\r\n\t\t\tto = 'cornanotc2plat',\r\n\t\t\ttoDesc = 'Advanced Naval Construction Turret',\r\n\t\t\ttimer = 120\r\n\t\t},\r\n\t\t{\r\n\t\t\tfrom = 'corfasp',\r\n\t\t\tfromDesc = 'Water Air Repair Pad',\r\n\t\t\tto = 'mission_command_tower',\r\n\t\t\ttoDesc = 'Mission Command Tower',\r\n\t\t\ttimer = 60,\r\n\t\t\tannounce = true,\r\n\t\t\tanSize = 25\r\n\t\t}\r\n\t},\r\n\tleg = {\r\n\t\t{from = 'legwin', fromDesc = 'Wind Turbine', to = 'legsolar', toDesc = 'Solar Collector', timer = 60},\r\n\t\t{from = 'legsolar', fromDesc = 'Solar Collector', to = 'legadvsol', toDesc = 'Advanced Solar Collector', timer = 120},\r\n\t\t{\r\n\t\t\tfrom = 'legadvsol',\r\n\t\t\tfromDesc = 'Advanced Solar Collector',\r\n\t\t\tto = 'corwint2',\r\n\t\t\ttoDesc = 'Advanced Wind Turbine',\r\n\t\t\ttimer = 240\r\n\t\t},\r\n\t\t{from = 'legtide', fromDesc = 'Tidal Generator', to = 'coruwfus', toDesc = 'Naval Fusion Reactor', timer = 300},\r\n\t\t{from = 'legmex', fromDesc = 'Metal Extractor', to = 'legfakemex', toDesc = '-Workaround Fake Mex-', timer = 360},\r\n\t\t{\r\n\t\t\tfrom = 'legfakemex',\r\n\t\t\tfromDesc = '-Workaround Fake Mex-',\r\n\t\t\tto = 'legmoho',\r\n\t\t\ttoDesc = 'Advanced Metal Extractor',\r\n\t\t\ttimer = 2\r\n\t\t},\r\n\t\t{from = 'legdrag', fromDesc = \"Dragon's Teeth\", to = 'corfort', toDesc = 'Fortification Wall', timer = 360}\r\n\t}\r\n}\r\nUnitDefs['armfakemex'] = table.copy(UnitDefs['armmex'])\r\nUnitDefs['armfakemex'].extractsmetal = 0\r\nUnitDefs['armfakegeo'] = table.copy(UnitDefs['armgeo'])\r\nUnitDefs['armfakegeo'].customparams.geothermal = nil\r\nUnitDefs['corfakemex'] = table.copy(UnitDefs['cormex'])\r\nUnitDefs['corfakemex'].extractsmetal = 0\r\nUnitDefs['corfakegeo'] = table.copy(UnitDefs['corgeo'])\r\nUnitDefs['corfakegeo'].customparams.geothermal = nil\r\nif UnitDefs['legmex'] then\r\n\tUnitDefs['legfakemex'] = table.copy(UnitDefs['legmex'])\r\n\tUnitDefs['legfakemex'].extractsmetal = 0\r\nend\r\nfor b, c in pairs(UnitDefs) do\r\n\tfaction = string.sub(b, 1, 3)\r\n\tfor d, e in pairs(a) do\r\n\t\tif faction == d then\r\n\t\t\tfor e, f in ipairs(a[d]) do\r\n\t\t\t\tif b == f.from then\r\n\t\t\t\t\tif f.announce == nil then\r\n\t\t\t\t\t\tf.announce = false\r\n\t\t\t\t\tend\r\n\t\t\t\t\tc.customparams = c.customparams or {}\r\n\t\t\t\t\tc.customparams.evolution_target = f.to\r\n\t\t\t\t\tif f.announce == true then\r\n\t\t\t\t\t\tc.customparams.evolution_announcement = string.format('%s evolved to %s!', f.fromDesc, f.toDesc)\r\n\t\t\t\t\t\tc.customparams.evolution_announcement_size = f.anSize or 12.5\r\n\t\t\t\t\tend\r\n\t\t\t\t\tc.customparams.evolution_condition = 'timer'\r\n\t\t\t\t\tc.customparams.evolution_timer = f.timer or 120\r\n\t\t\t\t\tc.customparams.evolution_health_transfer = 'flat'\r\n\t\t\t\tend\r\n\t\t\tend\r\n\t\tend\r\n\tend\r\n\tif b == 'mission_command_tower' then\r\n\t\tc.weapondefs = c.weapondefs or {}\r\n\t\tc.weapondefs['repulsor'] = {\r\n\t\t\tavoidfeature = false,\r\n\t\t\ttexture1 = 'Flame',\r\n\t\t\tcraterareaofeffect = 0,\r\n\t\t\tcraterboost = 0,\r\n\t\t\tcratermult = 0,\r\n\t\t\tedgeeffectiveness = c.health / 12000 + 0.04,\r\n\t\t\tname = 'PlasmaRepulsor',\r\n\t\t\trange = 777,\r\n\t\t\tsoundhitwet = 'sizzle',\r\n\t\t\tweapontype = 'Shield',\r\n\t\t\tdamage = {default = 420},\r\n\t\t\tshield = {\r\n\t\t\t\talpha = 0.2,\r\n\t\t\t\tarmortype = 'shields',\r\n\t\t\t\tforce = c.health / 4200 + 0.42,\r\n\t\t\t\tintercepttype = 128,\r\n\t\t\t\tpower = c.health * 0.35 + 420,\r\n\t\t\t\tpowerregen = 117526.5,\r\n\t\t\t\tpowerregenenergy = 500,\r\n\t\t\t\tradius = 777,\r\n\t\t\t\trepulser = true,\r\n\t\t\t\tsmart = true,\r\n\t\t\t\tstartingpower = c.health * 0.21,\r\n\t\t\t\tvisible = true,\r\n\t\t\t\tvisiblerepulse = true,\r\n\t\t\t\tbadcolor = {[1] = 0.7, [2] = 0.1, [3] = 0.1, [4] = 0.2},\r\n\t\t\t\tgoodcolor = {[1] = 1.1, [2] = 1.1, [3] = 1.1, [4] = 1}\r\n\t\t\t}\r\n\t\t}\r\n\t\tc.weapons = c.weapons or {}\r\n\t\tc.weapons[#c.weapons + 1] = {def = 'REPULSOR', onlytargetcategory = 'NOTSUB'}\r\n\tend\r\nend\r\n"
        },
        {
            "path": "lua/misc/disarm-queen.lua",
            "data": "--Disarm queen\r\nfor _, name in pairs(\r\n\t{\r\n\t\t'raptor_queen_veryeasy',\r\n\t\t'raptor_queen_easy',\r\n\t\t'raptor_queen_normal',\r\n\t\t'raptor_queen_hard',\r\n\t\t'raptor_queen_veryhard',\r\n\t\t'raptor_queen_epic'\r\n\t}\r\n) do\r\n\tUnitDefs[name].weapons = {}\r\nend\r\n"
        },
        {
            "path": "lua/misc/epic-ragnarok-calamity-starfall.lua",
            "data": "--Epic Ragnarok, Calamity, Starfall, & Bastion\r\n--Authors: Altwaal\r\n\r\nlocal unitDefs,tableMerge,epic_ragnarok,\r\nepic_calamity,epic_starfall,epic_bastion,epic_sentinel=UnitDefs or{},table.merge,'epic_ragnarok',\r\n'epic_calamity','epic_starfall','epic_bastion','epic_sentinel'\r\n\r\nunitDefs.epic_ragnarok=tableMerge(unitDefs['armvulc'],{\r\n  name='Epic Ragnarok',\r\n  description='Advanced Armada artillery engineering. Unleashes powerful plasma barrages across the battlefield.',\r\n  buildtime=900000,\r\n  health=140000,\r\n  metalcost=180000,\r\n  energycost=2600000,\r\n  icontype=\"armvulc\",\r\n  customparams={\r\n    i18n_en_humanname='Epic Ragnarok',\r\n    i18n_en_tooltip='Devastating single-shot plasma beam. Destroys everything in range.',\r\n    techlevel=4\r\n  },\r\n  sfxtypes={\r\n    explosiongenerators={\r\n      [1]='custom:tachyonshot'\r\n    }\r\n  },\r\n  weapondefs={\r\n    apocalypse_plasma_cannon={\r\n      collidefriendly=0,\r\n      collidefeature=0,\r\n      avoidfeature=0,\r\n      avoidfriendly=0,\r\n      name='Apocalypse Plasma Cannon',\r\n      weapontype='BeamLaser',\r\n      rgbcolor='1 0 0',\r\n      reloadtime=8,\r\n      accuracy=0,\r\n      areaofeffect=160,\r\n      range=3080,\r\n      energypershot=25000,\r\n      turret=true,\r\n      soundstart='annigun1',\r\n      soundhitdry='',\r\n      soundhitwet='sizzle',\r\n      soundtrigger=1,\r\n      size=8,\r\n      impulsefactor=0,\r\n      weaponvelocity=3100,\r\n      beamtime=1.5,\r\n      corethickness=0.3,\r\n      thickness=4.5,\r\n      laserflaresize=6.5,\r\n      largebeamlaser=true,\r\n      scrollspeed=5,\r\n      texture3=\"largebeam\",\r\n      tilelength=150,\r\n      tolerance=10000,\r\n      camerashake=0,\r\n      explosiongenerator='custom:tachyonshot',\r\n      craterboost=0,\r\n      cratermult=0,\r\n      craterareaofeffect=0,\r\n      edgeeffectiveness=0.15,\r\n      impactonly=1,\r\n      noselfdamage=true,\r\n      firestarter=90,\r\n      damage={\r\n        commanders=100000,\r\n        default=200000,\r\n        shields=50000,\r\n        subs=10000\r\n      },\r\n      allowNonBlockingAim=true\r\n    }\r\n  },\r\n  weapons={\r\n    [1]={\r\n      badtargetcategory='VTOL GROUNDSCOUT',\r\n      def='apocalypse_plasma_cannon',\r\n      onlytargetcategory='SURFACE'\r\n    }\r\n  }\r\n})\r\n\r\nunitDefs[epic_calamity]=tableMerge(unitDefs['corbuzz'],{\r\n  name='Epic Calamity',\r\n  description='Advanced Cortex siege technology. Fires large plasma shells that devastate formations with each impact.',\r\n  buildtime=920000,\r\n  health=145000,\r\n  metalcost=165000,\r\n  energycost=2700000,\r\n  icontype=\"corbuzz\",\r\n  customparams={\r\n    i18n_en_humanname='Epic Calamity',\r\n    i18n_en_tooltip='Large single-shot plasma artillery. Each shell causes major destruction.',\r\n    techlevel=4\r\n  },\r\n  weapondefs={\r\n    cataclysm_plasma_howitzer={\r\n      collidefriendly=0,\r\n      collidefeature=0,\r\n      avoidfeature=0,\r\n      avoidfriendly=0,\r\n      impactonly=1,\r\n      name='Cataclysm Plasma Howitzer',\r\n      weapontype='Cannon',\r\n      rgbcolor='0.15 0.6 0.5',\r\n      camerashake=0,\r\n      reloadtime=0.25,\r\n      accuracy=300,\r\n      areaofeffect=220,\r\n      range=3150,\r\n      energypershot=4600,\r\n      turret=true,\r\n      soundstart='lrpcshot3',\r\n      soundhit='rflrpcexplo',\r\n      soundhitvolume=50,\r\n      size=12,\r\n      impulsefactor=2.0,\r\n      weaponvelocity=2500,\r\n      footprintx=14,\r\n      footprintz=14,\r\n      turnrate=20000,\r\n      thickness=18,\r\n      laserflaresize=8,\r\n      texture3=\"largebeam\",\r\n      tilelength=200,\r\n      tolerance=10000,\r\n      explosiongenerator='custom:tachyonshot',\r\n      craterboost=0.25,\r\n      cratermult=0.25,\r\n      edgeeffectiveness=0.35,\r\n      damage={\r\n        default=3720,\r\n        shields=2268,\r\n        subs=972\r\n      },\r\n      allowNonBlockingAim=true\r\n    }\r\n  },\r\n  weapons={\r\n    [1]={\r\n      badtargetcategory='MOBILE',\r\n      def='cataclysm_plasma_howitzer',\r\n      onlytargetcategory='SURFACE'\r\n    }\r\n  }\r\n})\r\n\r\nunitDefs[epic_starfall]=tableMerge(unitDefs['legstarfall'],{\r\n  name='Epic Starfall',\r\n  description='Advanced Legion siege technology. Unleashes a devastating apocalyptic beam that obliterates everything in range.',\r\n  buildtime=180000,\r\n  health=145000,\r\n  metalcost=180000,\r\n  energycost=3400000,\r\n  maxthisunit=3,\r\n  collisionvolumescales='61 128 61',\r\n  footprintx=6,\r\n  footprintz=6,\r\n  collisionvolumetype=\"CylY\",\r\n  yardmap = \"oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo\",\r\n  icontype=\"legstarfall\",\r\n  customparams={\r\n    i18n_en_humanname='Epic Starfall',\r\n    i18n_en_tooltip='Apocalyptic single-shot beam weapon. 60 second cooldown. Max 3 units.',\r\n    techlevel=4,\r\n    modelradius=150\r\n  },\r\n  weapondefs={\r\n    epic_mega_beam={\r\n      collidefriendly=0,\r\n      collidefeature=0,\r\n      avoidfeature=0,\r\n      avoidfriendly=0,\r\n      name='Epic Apocalypse Beam',\r\n      weapontype='BeamLaser',\r\n      rgbcolor='0.7 0.3 1.0',\r\n      reloadtime=60,\r\n      accuracy=0,\r\n      areaofeffect=400,\r\n      range=3300,\r\n      energypershot=2000000,\r\n      turret=true,\r\n      soundstart='lrpcshot',\r\n      soundhit='rflrpcexplo',\r\n      soundhitvolume=50,\r\n      soundhitwet='splshbig',\r\n      soundtrigger=1,\r\n      impulsefactor=2.0,\r\n      weaponvelocity=3100,\r\n      thickness=25,\r\n      laserflaresize=18,\r\n      texture3=\"largebeam\",\r\n      tilelength=250,\r\n      tolerance=10000,\r\n      beamtime=0.3,\r\n      corethickness=0.8,\r\n      camerashake=0,\r\n      explosiongenerator='custom:tachyonshot',\r\n      craterboost=0.5,\r\n      cratermult=0.5,\r\n      edgeeffectiveness=0.95,\r\n      impactonly=1,\r\n      noselfdamage=true,\r\n      damage={\r\n        default=1000000,\r\n        shields=400000,\r\n        subs=50000\r\n      },\r\n      allowNonBlockingAim=true\r\n    }\r\n  },\r\n  weapons={\r\n    [1]={\r\n      badtargetcategory='MOBILE',\r\n      def='epic_mega_beam',\r\n      onlytargetcategory='SURFACE'\r\n    }\r\n  }\r\n})\r\n\r\nunitDefs[epic_bastion]=tableMerge(unitDefs['legbastion'],{\r\n  name='Epic Bastion',\r\n  description='Advanced Legion defensive flamethrower tower. Unleashes devastating long-range flames that incinerate swarms.',\r\n  buildtime=150000,\r\n  health=16000,\r\n  metalcost=22000,\r\n  energycost=460000,\r\n  icontype=\"legbastion\",\r\n  customparams={\r\n    i18n_en_humanname='Epic Bastion',\r\n    i18n_en_tooltip='Heavy long-range anti-swarm flamethrower tower.',\r\n    techlevel=3\r\n  },\r\n  weapondefs={\r\n    dmaw={\r\n      areaofeffect=164,\r\n      avoidfeature=false,\r\n      burst=16,\r\n      burstrate=0.05,\r\n      collidefriendly=false,\r\n      cegtag='burnflame-anim',\r\n      colormap='1 0.95 0.82 0.03   0.65 0.4 0.35 0.030   0.44 0.25 0.20 0.028   0.033 0.018 0.012 0.03   0.0 0.0 0.0 0.01',\r\n      craterareaofeffect=0,\r\n      craterboost=0,\r\n      cratermult=0,\r\n      edgeeffectiveness=0.15,\r\n      explosiongenerator='custom:burnblack',\r\n      firestarter=100,\r\n      flamegfxtime=1,\r\n      impulsefactor=0,\r\n      intensity=0.68,\r\n      name='Epic Anti-swarm Flamethrower',\r\n      noselfdamage=true,\r\n      proximitypriority=1,\r\n      range=1200,\r\n      reloadtime=1.1,\r\n      energypershot=500,\r\n      impactonly=1,\r\n      rgbcolor='1 0.94 0.88',\r\n      rgbcolor2='0.9 0.84 0.8',\r\n      sizegrowth=0.5,\r\n      soundhitdry='flamhit1',\r\n      soundhitvolume=7.5,\r\n      soundhitwet='sizzle',\r\n      soundstart='Flamhvy1',\r\n      soundstartvolume=5.3,\r\n      soundtrigger=false,\r\n      sprayangle=300,\r\n      targetmoveerror=0.001,\r\n      texture1='flame',\r\n      tolerance=2500,\r\n      turret=true,\r\n      weapontimer=1,\r\n      weapontype='Flame',\r\n      weaponvelocity=600,\r\n      customparams={\r\n        exclude_preaim=true\r\n      },\r\n      damage={\r\n        commanders=925,\r\n        default=210,\r\n        subs=300\r\n      }\r\n    }\r\n  },\r\n  weapons={\r\n    [1]={\r\n      def='dmaw',\r\n      fastautoretargeting=true,\r\n      onlytargetcategory='SURFACE'\r\n    }\r\n  }\r\n})\r\n\r\nunitDefs[epic_sentinel]=tableMerge(unitDefs['leggatet3'],{\r\n  name='Epic Sentinel',\r\n  description='Ultimate Legion shield technology. Projects an impenetrable energy barrier.',\r\n  activatewhenbuilt=true,\r\n  buildtime=450000,\r\n  canattack=false,\r\n  health=35000,\r\n  metalcost=95000,\r\n  energycost=1800000,\r\n  maxthisunit=3,\r\n  energystorage=25000,\r\n  damagemodifier=0.25,\r\n  footprintx=6,\r\n  footprintz=6,\r\n  noautofire=true,\r\n  onoffable=false,\r\n  icontype=\"leggatet3\",\r\n  customparams={\r\n    i18n_en_humanname='Epic Sentinel',\r\n    i18n_en_tooltip='Massive shield generator. Max 3 units.',\r\n    shield_color_mult=30,\r\n    shield_power=180000,\r\n    shield_radius=1600,\r\n    techlevel=4\r\n  },\r\n  weapondefs={\r\n    repulsor={\r\n      avoidfeature=false,\r\n      craterareaofeffect=0,\r\n      craterboost=0,\r\n      cratermult=0,\r\n      edgeeffectiveness=0.15,\r\n      name=\"Epic Shield\",\r\n      range=1600,\r\n      soundhitwet=\"sizzle\",\r\n      weapontype=\"Shield\",\r\n      damage={\r\n        default=100\r\n      },\r\n      shield={\r\n        alpha=0.20,\r\n        armortype=\"shields\",\r\n        energyupkeep=0,\r\n        force=3.0,\r\n        intercepttype=1015,\r\n        power=180000,\r\n        powerregen=2800,\r\n        powerregenenergy=10000,\r\n        radius=1600,\r\n        repulser=true,\r\n        smart=true,\r\n        startingpower=60000,\r\n        visiblerepulse=true,\r\n        badcolor={\r\n          [1]=1,\r\n          [2]=0.2,\r\n          [3]=0.2,\r\n          [4]=0.25\r\n        },\r\n        goodcolor={\r\n          [1]=0.2,\r\n          [2]=1,\r\n          [3]=0.2,\r\n          [4]=0.20\r\n        }\r\n      }\r\n    }\r\n  },\r\n  weapons={\r\n    [1]={\r\n      def='repulsor',\r\n      onlytargetcategory='NOTSUB'\r\n    }\r\n  }\r\n})\r\n\r\nlocal builders={'armaca','armack','armacsub','armacv','coraca','corack','coracsub','coracv','legaca','legack','legacv','legcomt2com'}\r\n\r\nfor _,j in pairs{'arm','cor','leg'}do\r\n  for k=3,10 do\r\n    table.insert(builders ,j..'comlvl'..k)\r\n  end\r\n  table.insert(builders,j..'t3airaide')\r\nend\r\n\r\nfor _,builder in pairs(builders)do\r\n  if unitDefs[builder]then\r\n    local faction = string.sub(builder,1,3)\r\n    if faction=='arm' then\r\n      table.insert(unitDefs[builder].buildoptions,epic_ragnarok)\r\n    elseif faction=='cor' then\r\n      table.insert(unitDefs[builder].buildoptions,epic_calamity)\r\n    elseif faction=='leg' then\r\n      table.insert(unitDefs[builder].buildoptions,epic_starfall)\r\n      table.insert(unitDefs[builder].buildoptions,epic_bastion)\r\n      table.insert(unitDefs[builder].buildoptions,epic_sentinel)\r\n    end\r\n  end\r\nend\r\n"
        },
        {
            "path": "lua/misc/raptor-build.lua",
            "data": "-- Raptor Build 1.1 Skrip\r\n-- Constructors can be built from the t1 factories\r\n-- Toggle to allow commanders to build raptor buildings.\r\nlocal includeCommanders = false\r\n\r\nlocal unitDefs = UnitDefs or {}\r\n-- Maps faction prefix to their builder units\r\nlocal factionBuilders = {\r\n\tarm = { 'armaca', 'armack', 'armacv', 'armcom' },\r\n\tcor = { 'coraca', 'corack', 'coracv', 'corcom' },\r\n\tleg = { 'legaca', 'legack', 'legacv', 'legcom' },\r\n}\r\n\r\n-- Adds a building to the buildoptions of each builder in the faction\r\nfunction addBuildingToFaction(buildingID, factionKey, category)\r\n\tlocal targetFactions = {}\r\n\r\n\tif factionKey and factionBuilders[factionKey] then\r\n\t\ttargetFactions[factionKey] = factionBuilders[factionKey]\r\n\telse\r\n\t\ttargetFactions = factionBuilders -- all factions\r\n\tend\r\n\r\n\tfor _, builders in pairs(targetFactions) do\r\n\t\tfor _, builder in ipairs(builders) do\r\n\t\t\tlocal isCommander = builder:match('com$')\r\n\r\n\t\t\t-- Add to base builder\r\n\t\t\tif (includeCommanders or not isCommander) and unitDefs[builder] then\r\n\t\t\t\tunitDefs[builder].buildoptions = unitDefs[builder].buildoptions or {}\r\n\t\t\t\ttable.insert(unitDefs[builder].buildoptions, buildingID)\r\n\t\t\t\tSpring.Echo('Added ' .. buildingID .. ' to ' .. builder)\r\n\t\t\tend\r\n\r\n\t\t\t-- Add to all commander levels\r\n\t\t\tif includeCommanders and isCommander then\r\n\t\t\t\tfor lvl = 2, 10 do\r\n\t\t\t\t\tlocal levelBuilder = builder .. 'lvl' .. lvl\r\n\t\t\t\t\tif unitDefs[levelBuilder] then\r\n\t\t\t\t\t\tunitDefs[levelBuilder].buildoptions = unitDefs[levelBuilder].buildoptions or {}\r\n\t\t\t\t\t\ttable.insert(unitDefs[levelBuilder].buildoptions, buildingID)\r\n\t\t\t\t\t\tSpring.Echo('Added ' .. buildingID .. ' to ' .. levelBuilder)\r\n\t\t\t\t\tend\r\n\t\t\t\tend\r\n\t\t\tend\r\n\t\tend\r\n\tend\r\n\r\n\tif category and unitDefs[buildingID] then\r\n\t\tunitDefs[buildingID].customparams = unitDefs[buildingID].customparams or {}\r\n\t\tunitDefs[buildingID].customparams.unitgroup = category\r\n\t\tSpring.Echo('Set unitgroup for ' .. buildingID .. ' to ' .. category)\r\n\tend\r\nend\r\n\r\n-- Clones an existing building and creates a new one\r\nfunction cloneUnit(sourceUnitID, newUnitID, humanName, tooltip)\r\n\tif unitDefs[sourceUnitID] and not unitDefs[newUnitID] then\r\n\t\tlocal base = table.copy(unitDefs[sourceUnitID])\r\n\t\tunitDefs[newUnitID] = base\r\n\r\n\t\tlocal def = unitDefs[newUnitID]\r\n\t\tdef.unitname = newUnitID\r\n\t\tdef.buildoptions = {}\r\n\r\n\t\tdef.customparams = def.customparams or {}\r\n\t\tdef.customparams.i18n_en_humanname = humanName\r\n\t\tdef.customparams.i18n_en_tooltip = tooltip\r\n\t\tdef.customparams.unitgroup = 'builder'\r\n\r\n\t\tdef.buildpic = def.buildpic or 'factory.dds'\r\n\r\n\t\tSpring.Echo('Cloned: ' .. newUnitID .. ' from ' .. sourceUnitID)\r\n\tend\r\nend\r\n\r\n-- Picks highest version units given prefixes\r\nfunction selectBestUnits(prefixes, threshold, direction)\r\n\tlocal bestUnits = {}\r\n\r\n\tfor unitName, _ in pairs(unitDefs) do\r\n\t\tfor _, prefix in ipairs(prefixes) do\r\n\t\t\tif unitName:match('^' .. prefix) then\r\n\t\t\t\tlocal metalCost = unitDefs[unitName].metalcost\r\n\t\t\t\tlocal passesFilter = true\r\n\r\n\t\t\t\tif threshold and direction then\r\n\t\t\t\t\tif direction == '>' then\r\n\t\t\t\t\t\tpassesFilter = metalCost > threshold\r\n\t\t\t\t\telseif direction == '<' then\r\n\t\t\t\t\t\tpassesFilter = metalCost < threshold\r\n\t\t\t\t\tend\r\n\t\t\t\tend\r\n\r\n\t\t\t\tif passesFilter then\r\n\t\t\t\t\tlocal baseName, version = unitName:match('^(.-)_v(%d+)$')\r\n\r\n\t\t\t\t\tif baseName and version then\r\n\t\t\t\t\t\tversion = tonumber(version)\r\n\t\t\t\t\t\tif not bestUnits[baseName] or version > bestUnits[baseName].version then\r\n\t\t\t\t\t\t\tbestUnits[baseName] = { name = unitName, version = version }\r\n\t\t\t\t\t\tend\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tif not bestUnits[unitName] then\r\n\t\t\t\t\t\t\tbestUnits[unitName] = { name = unitName, version = 0 }\r\n\t\t\t\t\t\tend\r\n\t\t\t\t\tend\r\n\t\t\t\tend\r\n\t\t\tend\r\n\t\tend\r\n\tend\r\n\r\n\treturn bestUnits\r\nend\r\n\r\nfunction selectUnits(prefixes)\r\n\tlocal unitList = {}\r\n\r\n\tfor unitName, _ in pairs(unitDefs) do\r\n\t\tfor _, prefix in ipairs(prefixes) do\r\n\t\t\tif unitName:match('^' .. prefix) then\r\n\t\t\t\tif not unitList[unitName] then\r\n\t\t\t\t\tunitList[unitName] = { name = unitName }\r\n\t\t\t\tend\r\n\t\t\tend\r\n\t\tend\r\n\tend\r\n\r\n\treturn unitList\r\nend\r\n\r\n-- Adds selected units to a buildings buildoptions\r\nfunction addUnitsToBuilding(buildingName, unitInput, category)\r\n\tif not unitDefs[buildingName] then\r\n\t\treturn\r\n\tend\r\n\tunitDefs[buildingName].buildoptions = unitDefs[buildingName].buildoptions or {}\r\n\r\n\tif type(unitInput) == 'table' then\r\n\t\tfor _, unitInfo in pairs(unitInput) do\r\n\t\t\t-- Check if table is {name=...} (from selectUnits), or simple list\r\n\t\t\tlocal unitName = unitInfo.name or unitInfo\r\n\t\t\ttable.insert(unitDefs[buildingName].buildoptions, unitName)\r\n\t\t\tSpring.Echo('Added ' .. unitName .. ' to ' .. buildingName)\r\n\r\n\t\t\t-- Category assignment (optional)\r\n\t\t\tif category and unitDefs[unitName] then\r\n\t\t\t\tunitDefs[unitName].customparams = unitDefs[unitName].customparams or {}\r\n\t\t\t\tunitDefs[unitName].customparams.unitgroup = category\r\n\t\t\t\tSpring.Echo('Set unitgroup for ' .. unitName .. ' to ' .. category)\r\n\t\t\tend\r\n\t\tend\r\n\telseif type(unitInput) == 'string' then\r\n\t\t-- Single unit string\r\n\t\ttable.insert(unitDefs[buildingName].buildoptions, unitInput)\r\n\t\tSpring.Echo('Added ' .. unitInput .. ' to ' .. buildingName)\r\n\tend\r\nend\r\n\r\n---------------------------------------------------------------\r\n-- Correct unitdefs\r\n---------------------------------------------------------------\r\nif unitDefs['raptor_turret_basic_t4_v1'] and unitDefs['raptor_turret_burrow_t2_v1'] then\r\n\tlocal def = unitDefs['raptor_turret_burrow_t2_v1']\r\n\r\n\tdef.buildpic = 'raptors/raptor_turrets.DDS'\r\n\tdef.metalcost = (unitDefs['raptor_turret_basic_t4_v1'].metalcost * 2 or 1600)\r\n\tdef.energycost = (unitDefs['raptor_turret_basic_t4_v1'].energycost * 2 or 1600)\r\nend\r\n\r\n---------------------------------------------------------------\r\n-- Raptor Gantries Setup\r\n---------------------------------------------------------------\r\n--, \"raptor_allterrain_\", \"raptor_matriarch_\", \"raptor_queen_\"\r\n-- Create Raptor Land Gantry t1\r\ncloneUnit('legvp', 'sk_raptorhatchery_t1', 'Raptor Hatchery', 'Specialized factory for land-based Raptor units')\r\nlocal bestLandUnits = selectBestUnits({ 'raptor_land_' }, 999, '<')\r\naddUnitsToBuilding('sk_raptorhatchery_t1', bestLandUnits)\r\n-- addBuildingToFaction(\"sk_raptorhatchery\", nil, \"builder\")\r\n\r\n-- Create Raptor Land Gantry t2\r\ncloneUnit('leggant', 'sk_raptorhatchery_t2', 'Giant Raptor Hatchery', 'Specialized factory for land-based Raptor units')\r\nlocal bestLandUnits = selectBestUnits({ 'raptor_land_', 'raptor_allterrain_', 'raptor_matriarch_', 'raptor_queen_' }, 1000, '>')\r\naddUnitsToBuilding('sk_raptorhatchery_t2', bestLandUnits)\r\n\r\n-- Create Raptor Air Gantry\r\ncloneUnit('legaap', 'sk_raptorairhatchery', 'Raptor Air Hatchery', 'Specialized factory for air-based Raptor units')\r\nlocal bestAirUnits = selectBestUnits({ 'raptor_air_' })\r\naddUnitsToBuilding('sk_raptorairhatchery', bestAirUnits)\r\n-- addBuildingToFaction(\"sk_raptorairhatchery\", nil, \"builder\")\r\n\r\n-- -- Add buildings\r\n-- addBuildingToFaction(\"raptor_turret_acid_t3_v1\", nil, \"weapon\")\r\n-- addBuildingToFaction(\"raptor_turret_acid_t4_v1\", nil, \"weapon\")\r\n-- addBuildingToFaction(\"raptor_turret_antiair_t3_v1\", nil, \"weapon\")\r\n-- addBuildingToFaction(\"raptor_turret_antiair_t4_v1\", nil, \"weapon\")\r\n-- addBuildingToFaction(\"raptor_turret_antinuke_t3_v1\", nil, \"weapon\")\r\n-- addBuildingToFaction(\"raptor_turret_antinuke_t4_v1\", nil, \"weapon\")\r\n-- addBuildingToFaction(\"raptor_turret_basic_t3_v1\", nil, \"weapon\")\r\n-- addBuildingToFaction(\"raptor_turret_basic_t4_v1\", nil, \"weapon\")\r\n-- addBuildingToFaction(\"raptor_turret_emp_t3_v1\", nil, \"weapon\")\r\n-- addBuildingToFaction(\"raptor_turret_emp_t4_v1\", nil, \"weapon\")\r\n-- addBuildingToFaction(\"raptor_turret_meteor_t3_v1\", nil, \"weapon\")\r\n-- addBuildingToFaction(\"raptor_turret_meteor_t4_v1\", nil, \"weapon\")\r\n\r\n-- Create raptor builder\r\ncloneUnit('armacv', 'sk_raptorbuilder', 'Raptor Construction Vehicle', 'Builds Raptor Hatcheries')\r\n\r\nif unitDefs['sk_raptorbuilder'] then\r\n\tlocal def = unitDefs['sk_raptorbuilder']\r\n\r\n\t-- Change model and visuals\r\n\r\n\t--def.objectname = \"Raptors/raptor1d.s3o\"\r\n\t-- def.script = \"Raptors/raptor1d.cob\"\r\n\tdef.buildpic = 'raptors/raptor1d.DDS'\r\n\r\n\t-- -- Cost adjustments\r\n\t-- def.energycost = 500\r\n\t-- def.metalcost = 250\r\n\t-- def.buildtime = 8000\r\n\r\n\t-- -- Resource generation (optional)\r\n\t-- def.energymake = 10\r\n\t-- def.metalmake = 1\r\n\r\n\t-- Clean up factory stuff\r\n\tdef.customparams.techlevel = 2\r\n\tdef.customparams.unitgroup = 'builder'\r\n\r\n\t-- Wipe any old build options, set to only Hatcheries\r\n\tdef.buildoptions = {}\r\n\tdef.buildoptions = {\r\n\t\t'sk_raptorhatchery_t1',\r\n\t\t'sk_raptorhatchery_t2',\r\n\t\t--, \"sk_raptorairhatchery\"\r\n\t}\r\nend\r\n\r\naddUnitsToBuilding('sk_raptorbuilder', selectBestUnits({ 'raptor_turret_' }), 'weapon')\r\n\r\naddUnitsToBuilding('armvp', 'sk_raptorbuilder')\r\naddUnitsToBuilding('armlab', 'sk_raptorbuilder')\r\n\r\n-- Create raptor builder\r\ncloneUnit('armaca', 'sk_raptorairbuilder', 'Raptor Air Construction Vehicle', 'Builds Raptor Air Hatcheries')\r\n\r\nif unitDefs['sk_raptorairbuilder'] then\r\n\tlocal def = unitDefs['sk_raptorairbuilder']\r\n\r\n\t-- Change model and visuals\r\n\t--def.objectname = \"Raptors/raptorairscout1.s3o\"\r\n\t-- def.script = \"Raptors/raptorairscout.cob\"\r\n\tdef.buildpic = 'raptors/raptorairscout.DDS'\r\n\r\n\t-- -- Cost adjustments\r\n\t-- def.energycost = 500\r\n\t-- def.metalcost = 250\r\n\t-- def.buildtime = 8000\r\n\r\n\t-- -- Resource generation (optional)\r\n\t-- def.energymake = 10\r\n\t-- def.metalmake = 1\r\n\r\n\t-- Clean up factory stuff\r\n\tdef.customparams.techlevel = 2\r\n\tdef.customparams.unitgroup = 'builder'\r\n\r\n\t-- Wipe any old build options, set to only Hatcheries\r\n\tdef.buildoptions = {}\r\n\tdef.buildoptions = {\r\n\t\t--\"sk_raptorhatchery\"\r\n\t\t'sk_raptorairhatchery',\r\n\t}\r\nend\r\n\r\naddUnitsToBuilding('sk_raptorairbuilder', selectBestUnits({ 'raptor_turret_' }), 'weapon')\r\n\r\n-- Add the Raptor Builder to Vehicle Factory\r\naddUnitsToBuilding('armap', 'sk_raptorairbuilder')\r\naddUnitsToBuilding('corvp', 'sk_raptorbuilder')\r\naddUnitsToBuilding('corlab', 'sk_raptorbuilder')\r\naddUnitsToBuilding('legvp', 'sk_raptorbuilder')\r\naddUnitsToBuilding('leglab', 'sk_raptorbuilder')\r\naddUnitsToBuilding('corap', 'sk_raptorairbuilder')\r\naddUnitsToBuilding('legap', 'sk_raptorairbuilder')\r\n"
        },
        {
            "path": "lua/misc/skateboard-t3-builders.lua",
            "data": "--WIP T3 builder v2\r\n-- Authors: TetrisCo\r\n-- docs.google.com/spreadsheets/d/1QSVsuAAMhBrhiZdTihVfSCwPzbbZWDLCtXWP23CU0ko\r\nlocal unitDefs, unitDefName, factions, apt3 = UnitDefs or {}, 't3con', {'arm', 'cor', 'leg'}, 'apt3'\r\nfor _, faction in pairs(factions) do\r\n\tunitDefs[faction .. unitDefName] =\r\n\t\ttable.merge(\r\n\t\tunitDefs['armaca'],\r\n\t\t{\r\n\t\t\tblocking = false,\r\n\t\t\tbuilddistance = 500,\r\n\t\t\tbuildpic = 'ARMDRONECARRY.DDS',\r\n\t\t\tbuildtime = 140000,\r\n\t\t\tcruisealtitude = 130,\r\n\t\t\tenergycost = 320000,\r\n\t\t\tenergyupkeep = 2000,\r\n\t\t\thealth = 3000,\r\n\t\t\thoverattack = true,\r\n\t\t\tidleautoheal = 5,\r\n\t\t\tidletime = 1800,\r\n\t\t\tmaxthisunit = 2,\r\n\t\t\tmetalcost = 20000,\r\n\t\t\tobjectname = 'Units/ARMDRONECARRY.s3o',\r\n\t\t\tscript = 'Units/ARMDRONECARRY.cob',\r\n\t\t\tspeed = 50,\r\n\t\t\tterraformspeed = 3000,\r\n\t\t\tturninplaceanglelimit = 360,\r\n\t\t\tturnrate = 240,\r\n\t\t\tworkertime = 15000,\r\n\t\t\tcustomparams = {\r\n\t\t\t\tsubfolder = 'ArmAircraft/T3',\r\n\t\t\t\ttechlevel = 3,\r\n\t\t\t\tunitgroup = 'buildert3'\r\n\t\t\t}\r\n\t\t}\r\n\t)\r\n\tunitDefs[faction .. unitDefName].buildoptions = {\r\n\t\tfaction == 'leg' and 'legadveconvt3' or faction .. 'mmkrt3',\r\n\t\tfaction .. 'afust3',\r\n\t\tfaction .. 'nanotct2'\r\n\t}\r\nend\r\n\r\nfor _, faction in pairs(factions) do\r\n\ttable.insert(unitDefs[faction .. apt3].buildoptions, faction .. unitDefName)\r\nend\r\n"
        },
        {
            "path": "lua/misc/SkilledSniper1-player-raptors.lua",
            "data": "--Player Raptors [SS1]\r\n-- Authors: SkilledSniper1, Skrip\r\n-- docs.google.com/spreadsheets/d/1QSVsuAAMhBrhiZdTihVfSCwPzbbZWDLCtXWP23CU0ko\r\n-- Credits to Skrip for starting the mod with Raptor Buildings v1! Check them out here: https://discord.com/channels/549281623154229250/1365417045147258971\r\nlocal pairs_, ipairs_, string_, tableInsert, unitDefs = pairs, ipairs, string, table.insert, UnitDefs\r\n\r\nlocal function setupMeta(unitName, unitDef)\r\n\tlocal customparams = unitDef.customparams or {}\r\n\tlocal aName = unitName\r\n\tlocal _, _, v = string_.find(unitName, '_v(%d+)')\r\n\tif v then\r\n\t\tv = tonumber(v) or 0\r\n\tend\r\n\taName = aName:gsub('_v(%d+)', '') --actual_name\r\n\tlocal _, _, tierData = string_.find(unitName, '_t(%d+)')\r\n\tif tierData then\r\n\t\ttierData = tonumber(tierData)\r\n\tend\r\n\tlocal gName = aName:gsub('_t(%d+)', '') --general_name\r\n\tlocal isR = string_.find(unitName, '_queen') or string_.find(unitName, '_matriarch') or unitName == 'raptorh5'\r\n\tif isR then\r\n\t\ttierData = 5\r\n\tend\r\n\tif tierData then\r\n\t\tcustomparams.techlevel = tierData\r\n\tend\r\n\tlocal isT\r\n\tif unitDef.yardmap or unitDef.speed == 0.0 then\r\n\t\tisT = unitDef.yardmap or ''\r\n\tend\r\n\tif isT then\r\n\t\tcustomparams.unitgroup = 'weapon'\r\n\tend\r\n\tlocal isH = string_.find(unitName, '_heal') or unitName == 'raptorh5'\r\n\tif isH then\r\n\t\tcustomparams.unitgroup = 'builder'\r\n\tend\r\n\tcustomparams.raptorbuildmeta = {\r\n\t\taName = aName,\r\n\t\tgName = gName,\r\n\t\tv = v,\r\n\t\tisRoyal = isR,\r\n\t\tisT = isT,\r\n\t\tisH = isH,\r\n\t}\r\n\tunitDef.customparams = customparams\r\n\treturn true\r\nend\r\n\r\nlocal function clone(unitName, newName, newDef)\r\n\tunitDefs[newName] = newDef\r\n\tnewDef.unitname = newName\r\n\tnewDef.icontype = unitName\r\n\tnewDef.maxthisunit = nil\r\n\tnewDef.buildoptions = {}\r\n\tlocal custom = newDef.customparams or {}\r\n\tcustom.i18nfromunit = unitName\r\n\tcustom.subfolder = 'other/raptors'\r\n\tnewDef.customparams = custom\r\n\treturn custom\r\nend\r\n\r\nlocal ref = {}\r\nfor unitName, unitDef in pairs_(unitDefs) do\r\n\tif (unitDef.category == 'RAPTOR') and not string_.find(unitName, 'custraptorunit') then\r\n\t\tsetupMeta(unitName, unitDef)\r\n\t\tref[unitName] = unitDef\r\n\tend\r\nend\r\n\r\nlocal pref = { 'Juvenile', 'Common', 'Mature', 'Apex', 'Royal' }\r\nlocal function fyn(t, n)\r\n\treturn 'custchickenunit_t' .. t .. n\r\nend\r\n\r\nlocal function cpLab(name, list)\r\n\tlocal o\r\n\tfor t, unitName in ipairs_(list) do\r\n\t\tlocal pre = pref[t]\r\n\t\tlocal n = fyn(t, '_' .. string_.lower(name))\r\n\t\tlocal u = table.copy(unitDefs[unitName])\r\n\t\tlocal c = clone(unitName, n, u)\r\n\t\tu.icontype = 'raptor_hive'\r\n\t\tc.i18nfromunit = nil\r\n\t\tc.i18n_en_humanname = pre .. ' Raptor ' .. name\r\n\t\tc.i18n_en_tooltip = 'Produces ' .. pre .. ' Raptors (T' .. t .. ')'\r\n\t\tc.normalmaps = true\r\n\t\tc.normaltex = 'unittextures/chicken_l_normals.png'\r\n\t\tc.areadamageresistance = '_RAPTORACID_'\r\n\t\tlocal b = {\r\n\t\t\taName = n,\r\n\t\t\tgName = n:gsub('_t(%d+)', ''),\r\n\t\t\tv = 1,\r\n\t\t\tisRoyal = t == 5,\r\n\t\t\tisT = true,\r\n\t\t\tisH = true,\r\n\t\t}\r\n\t\tc.raptorbuildmeta = b\r\n\t\to = u\r\n\tend\r\n\treturn o\r\nend\r\nlocal fmt = cpLab('Hatchery', { 'leglab', 'leghp', 'legalab', 'leggant', 'leggant' })\r\nfmt.energycost = fmt.energycost * 5\r\nfmt.metalcost = fmt.metalcost * 5\r\nfmt.buildtime = fmt.buildtime * 5\r\nfmt.health = fmt.health * 2.5\r\ncpLab('Nest', { 'legap', 'legaap', 'legaap', 'legapt3' })\r\n\r\nlocal everything, flying, healer = {}, {}, {}\r\nfor uName0, uDef0 in pairs_(ref) do\r\n\tlocal uName, uDef = uName0:gsub('raptor', 'custraptorunit'), table.copy(uDef0)\r\n\tlocal c = clone(uName0, uName, uDef)\r\n\tlocal t, m = c.techlevel or 0, c.raptorbuildmeta\r\n\tm.uName = uName\r\n\tlocal itr, bo = m.isT, m.isH\r\n\tif bo and pref[t] then\r\n\t\tuDef.canreclaim = 1\r\n\t\tuDef.reclaimspeed = uDef.workertime\r\n\t\tif t == 5 and string_.find(uName, '_matriarch') then\r\n\t\t\tbo, m.isH = nil, nil\r\n\t\telse\r\n\t\t\tc.i18nfromunit, c.i18n_en_humanname, c.i18n_en_tooltip = nil, pref[t] .. ' Constructor Raptor', 'Tech ' .. t .. ' Constructor'\r\n\t\tend\r\n\tend\r\n\tlocal q\r\n\tif uDef.canfly then\r\n\t\tflying[t] = flying[t] or {}\r\n\t\tq = flying[t]\r\n\telse\r\n\t\teverything[t] = everything[t] or {}\r\n\t\tq = everything[t]\r\n\tend\r\n\tlocal i = q[m.gName]\r\n\tif (not i or (i.v or 0) < (m.v or 0)) and not (bo and itr) then\r\n\t\tq[m.gName] = m\r\n\t\tif bo and not itr then\r\n\t\t\thealer[m.aName] = uDef\r\n\t\tend\r\n\tend\r\n\tif itr then\r\n\t\tuDef.maxSlope = uDef.maxSlope or 255\r\n\tend\r\n\tlocal qind = string_.find(uName, '_queen')\r\n\tif qind then\r\n\t\tlocal d = string_.sub(uName, qind + 7):gsub('very', 'very ')\r\n\t\tc.i18nfromunit = nil\r\n\t\tc.i18n_en_humanname = '[' .. d .. '] Raptor Queen'\r\n\t\tc.i18n_en_tooltip = 'The Mother of ALL ' .. string_.upper(d) .. ' RAPTORS!'\r\n\tend\r\n\tif type(uDef.weapondefs) == 'table' then\r\n\t\tfor wn, wd in pairs_(uDef.weapondefs) do\r\n\t\t\tif string_.find(uName, '_air_bomber_basic') then\r\n\t\t\t\twd.reloadtime = 6\r\n\t\t\tend\r\n\t\t\tif wn == 'spawnmeteor' then\r\n\t\t\t\twd.damage = { default = 1 }\r\n\t\t\tend\r\n\t\t\tif type(wd.explosiongenerator) == 'string' and string_.find(wd.explosiongenerator, 'acid-explosion', 1, true) then\r\n\t\t\t\tlocal s, wdc = 1.5, wd.customparams\r\n\t\t\t\tif not wdc then\r\n\t\t\t\t\twdc = {}\r\n\t\t\t\t\twd.customparams = wdc\r\n\t\t\t\tend\r\n\t\t\t\tif string_.find(wd.explosiongenerator, 'small') then\r\n\t\t\t\t\ts = 1\r\n\t\t\t\tend\r\n\t\t\t\tif string_.find(wd.explosiongenerator, 'xl') then\r\n\t\t\t\t\ts = 2\r\n\t\t\t\tend\r\n\t\t\t\tif wdc.area_onhit_damageCeg then\r\n\t\t\t\t\twdc.area_onhit_damageceg = wdc.area_onhit_damageCeg\r\n\t\t\t\tend\r\n\t\t\t\tif not wdc.area_onhit_damageceg then\r\n\t\t\t\t\twdc.area_onhit_damageceg = 'acid-damage-gen'\r\n\t\t\t\tend\r\n\t\t\t\tif not wdc.area_onhit_ceg then\r\n\t\t\t\t\twdc.area_onhit_ceg = 'acid-area-' .. (s * 75) .. '-repeat'\r\n\t\t\t\tend\r\n\t\t\t\tif not wdc.area_onhit_time then\r\n\t\t\t\t\twdc.area_onhit_time = 10\r\n\t\t\t\tend\r\n\t\t\t\tif not wdc.area_onhit_damage then\r\n\t\t\t\t\twdc.area_onhit_damage = 20 * (t + 1)\r\n\t\t\t\tend\r\n\t\t\t\tif not wdc.area_onhit_range then\r\n\t\t\t\t\twdc.area_onhit_range = s * 75\r\n\t\t\t\tend\r\n\t\t\t\tif not wdc.area_onhit_resistance then\r\n\t\t\t\t\twdc.area_onhit_resistance = '_RAPTORACID_'\r\n\t\t\t\tend\r\n\t\t\tend\r\n\t\tend\r\n\tend\r\nend\r\n\r\n-- all turrets\r\nlocal af, atr = {}, {}\r\nfor t, _ in ipairs_(pref) do\r\n\tlocal tierHealer, tierFlyers, tierEverything = {}, {}, {}\r\n\tfor gName, m in pairs_(everything[t]) do\r\n\t\tif not m.isT then\r\n\t\t\ttierHealer[m.uName] = healer[m.aName]\r\n\t\t\ttableInsert(tierEverything, m.uName)\r\n\t\telse\r\n\t\t\tatr[gName] = m.uName\r\n\t\tend\r\n\tend\r\n\tif t == 5 then\r\n\t\tfor gName, m in pairs_(everything[0] or {}) do\r\n\t\t\tif not m.isT then\r\n\t\t\t\ttierHealer[m.uName] = healer[m.aName]\r\n\t\t\t\ttableInsert(tierEverything, m.uName)\r\n\t\t\telse\r\n\t\t\t\tatr[gName] = m.uName\r\n\t\t\tend\r\n\t\tend\r\n\tend\r\n\tfor gName, m in pairs_(flying[t] or {}) do\r\n\t\ttierHealer[m.uName] = healer[m.aName]\r\n\t\taf[gName] = m.uName\r\n\tend\r\n\tif t == 4 then\r\n\t\tfor gName, m in pairs_(flying[0] or {}) do\r\n\t\t\ttierHealer[m.uName] = healer[m.aName]\r\n\t\t\taf[gName] = m.uName\r\n\t\tend\r\n\tend\r\n\tfor _, uName in pairs_(af) do\r\n\t\ttableInsert(tierFlyers, uName)\r\n\tend\r\n\tlocal lfy, afy = fyn(t, '_hatchery'), fyn(t, '_nest')\r\n\tlocal lfyDef, afyDef = unitDefs[lfy], unitDefs[afy] or {}\r\n\tlfyDef.buildoptions, afyDef.buildoptions = tierEverything, tierFlyers\r\n\tlocal thb, nPre = { lfy, afy }, pref[t + 1]\r\n\tif t == 1 then\r\n\t\tfor _, fy in ipairs_(thb) do\r\n\t\t\tfor _, cm in ipairs_({ 'armcom', 'corcom', 'legcom' }) do\r\n\t\t\t\ttableInsert(((unitDefs[cm] or {}).buildoptions or {}), fy)\r\n\t\t\t\tfor lvl = 2, 10 do\r\n\t\t\t\t\ttableInsert(((unitDefs[cm .. 'lvl' .. lvl] or {}).buildoptions or {}), fy)\r\n\t\t\t\tend\r\n\t\t\tend\r\n\t\tend\r\n\telseif t == 5 then\r\n\t\ttableInsert(thb, fyn(t - 1, '_hatchery'))\r\n\t\ttableInsert(thb, fyn(t - 1, '_nest'))\r\n\tend\r\n\tif nPre then\r\n\t\ttableInsert(thb, fyn(t + 1, '_hatchery'))\r\n\tend\r\n\tfor _, uName in pairs_(atr) do\r\n\t\ttableInsert(thb, uName)\r\n\tend\r\n\tfor _, uDef in pairs_(tierHealer) do\r\n\t\tuDef.buildoptions = thb\r\n\tend\r\nend\r\n"
        },
        {
            "path": "lua/misc/slow-raptors-player-raptors.lua",
            "data": "--Slow playable raptors/scav\r\n-- bar-nuttyb-collective.github.io/configurator/\r\nlocal unitDefs = UnitDefs or {}\r\nfor unit, unitDef in pairs(unitDefs) do\r\n\tif unit.name:find('raptor') or unit.name:find('_scav') then\r\n\t\tunitDef.speed = unitDef.speed * 0.5\r\n\tend\r\nend\r\n"
        },
        {
            "path": "lua/misc/standalone-faction-drones.lua",
            "data": "--Faction Drones\r\n-- docs.google.com/spreadsheets/d/1QSVsuAAMhBrhiZdTihVfSCwPzbbZWDLCtXWP23CU0ko\r\nlocal unitDefs = UnitDefs or {}\r\nlocal armassistdrone = 'armassistdrone'\r\nlocal corassistdrone = 'corassistdrone'\r\nlocal legassistdrone = 'legassistdrone'\r\nlocal corsat = 'corsat'\r\n\r\nunitDefs[armassistdrone].energycost = 2000\r\nunitDefs[armassistdrone].metalcost = 100\r\nunitDefs[corassistdrone].energycost = 2000\r\nunitDefs[corassistdrone].metalcost = 100\r\nunitDefs[legassistdrone].energycost = 2000\r\nunitDefs[legassistdrone].metalcost = 100\r\n\r\nunitDefs[corsat].sightdistance = 3100\r\nunitDefs[corsat].radardistance = 4080\r\nunitDefs[corsat].cruisealtitude = 3300\r\nunitDefs[corsat].energyupkeep = 1250\r\n\r\nlocal builderNames = {\r\n\t'armapt3',\r\n\t'corapt3',\r\n\t'legapt3',\r\n\t'armshltx',\r\n\t'corgant',\r\n\t'leggant',\r\n\t'armshltxuw',\r\n\t'corgantuw',\r\n\t'leggantuw'\r\n}\r\n\r\nfor i = 1, #builderNames do\r\n\tlocal builderName = builderNames[i]\r\n\tlocal nBuildOptions = #unitDefs[builderName].buildoptions\r\n\tunitDefs[builderName].buildoptions[nBuildOptions + 1] = armassistdrone\r\n\tunitDefs[builderName].buildoptions[nBuildOptions + 2] = corassistdrone\r\n\tunitDefs[builderName].buildoptions[nBuildOptions + 3] = legassistdrone\r\n\tunitDefs[builderName].buildoptions[nBuildOptions + 4] = corsat\r\nend\r\n"
        },
        {
            "path": "lua/queen-hp-template.lua",
            "data": "-- NuttyB v1.52 $HP_MULTIPLIER$X QHP\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\nfor b, c in pairs(UnitDefs) do\r\n    if b:match('^raptor_queen_.*') then\r\n        c.repairable = 0\r\n        c.canbehealed = 0\r\n        c.buildtime = 9999999\r\n        c.autoheal = 2\r\n        c.canSelfRepair = 0\r\n        c.health = c.health * $HP_MULTIPLIER$\r\n    end\r\nend\r\n"
        },
        {
            "path": "lua/raptor-hp-template.lua",
            "data": "-- NuttyB v1.52 $HP_MULTIPLIER$X HP\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\nfor unitName, unitDef in pairs(UnitDefs) do\r\n    if string.sub(unitName, 1, 24) == 'raptor_land_swarmer_heal' then\r\n        unitDef.reclaimspeed = 100\r\n        unitDef.stealth = false\r\n        unitDef.builder = false\r\n        unitDef.workertime = unitDef.workertime * 0.5\r\n        unitDef.canassist = false\r\n        unitDef.maxthisunit = 0\r\n    end\r\n\r\n    if\r\n        unitDef.customparams\r\n        and unitDef.customparams.subfolder == 'other/raptors'\r\n        and unitDef.health\r\n        and not unitName:match('^raptor_queen_.*')\r\n    then\r\n        unitDef.health = unitDef.health * $HP_MULTIPLIER$\r\n        unitDef.sfxtypes = {}\r\n        unitDef.explodas = unitDef.explodas\r\n    end\r\nend\r\n\r\nlocal oldUnitDef_Post = UnitDef_Post\r\nfunction UnitDef_Post(unitID, unitDef)\r\n    if oldUnitDef_Post and oldUnitDef_Post ~= UnitDef_Post then\r\n        oldUnitDef_Post(unitID, unitDef)\r\n    end\r\n\r\n    if\r\n        unitDef.customparams\r\n        and unitDef.customparams.subfolder == 'other/raptors'\r\n    then\r\n        unitDef.nochasecategory = 'OBJECT'\r\n        if unitDef.metalcost and unitDef.health then\r\n            unitDef.metalcost = math.floor(unitDef.health * 0.75 / $HP_MULTIPLIER$)\r\n        end\r\n    end\r\nend\r\n"
        },
        {
            "path": "lua/rflrpc-rebalance.lua",
            "data": "-- Balance on T4 RFLRPC\r\n-- Authors: Altwaal\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\n{\r\n    armvulc = {\r\n        explodeas = 'fusionExplosion',\r\n        energycost = 1500000,\r\n        metalcost = 55000,\r\n        buildtime = 180000,\r\n        health = 52000,\r\n        footprintx = 6,\r\n        footprintz = 6,\r\n        weapondefs = {\r\n            ARMVULC_MAIN = {\r\n                areaofeffect = 120,\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                beamtime = 0.5,\r\n                burst = 1,\r\n                corethickness = 0.1,\r\n                craterareaofeffect = 90,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                cameraShake = 0,\r\n                edgeeffectiveness = 0.30,\r\n                energypershot = 3200,\r\n                explosiongenerator = 'custom:laserhit-large-red',\r\n                firestarter = 90,\r\n                impactonly = 1,\r\n                impulseboost = 0,\r\n                impulsefactor = 0,\r\n                largebeamlaser = true,\r\n                laserflaresize = 1,\r\n                name = 'The Eagle Standard',\r\n                noselfdamage = true,\r\n                range = 2900,\r\n                reloadtime = 0.3,\r\n                rgbcolor = '0/1/0.4',\r\n                scrollspeed = 13,\r\n                soundhitdry = '',\r\n                soundhitwet = 'sizzle',\r\n                soundstart = 'lasrcrw1',\r\n                soundtrigger = 1,\r\n                targetmoveerror = 0.3,\r\n                texture3 = 'largebeam',\r\n                thickness = 12,\r\n                tilelength = 150,\r\n                tolerance = 10000,\r\n                turret = true,\r\n                turnrate = 16000,\r\n                weapontype = 'LaserCannon',\r\n                weaponvelocity = 3100,\r\n                damage = {\r\n                    commanders = 480,\r\n                    default = 2550,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                badtargetcategory = 'VTOL GROUNDSCOUT',\r\n                def = 'ARMVULC_MAIN',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n        },\r\n    },\r\n\r\n    corbuzz = {\r\n        explodeas = 'fusionExplosion',\r\n        energycost = 1500000,\r\n        metalcost = 58000,\r\n        buildtime = 190000,\r\n        health = 54000,\r\n        footprintx = 6,\r\n        footprintz = 6,\r\n        weapondefs = {\r\n            CORBUZZ_MAIN = {\r\n                areaofeffect = 220,\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                burst = 1,\r\n                craterareaofeffect = 140,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                cameraShake = 0,\r\n                edgeeffectiveness = 0.45,\r\n                energypershot = 2500,\r\n                explosiongenerator = 'custom:plasmahit-large-blue',\r\n                firestarter = 85,\r\n                impactonly = 1,\r\n                impulseboost = 0,\r\n                impulsefactor = 0.8,\r\n                name = 'Cortex Devastator',\r\n                noselfdamage = true,\r\n                range = 2800,\r\n                reloadtime = 0.167,\r\n                rgbcolor = '0.2/0.8/1.0',\r\n                soundhitdry = 'xplomed2',\r\n                soundhitwet = 'splshbig',\r\n                soundstart = 'cannhvy5',\r\n                soundtrigger = 1,\r\n                targetmoveerror = 0.25,\r\n                thickness = 8,\r\n                tolerance = 8000,\r\n                turret = true,\r\n                turnrate = 14000,\r\n                weapontype = 'Cannon',\r\n                weaponvelocity = 2800,\r\n                damage = {\r\n                    commanders = 480,\r\n                    default = 1333,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                badtargetcategory = 'VTOL GROUNDSCOUT',\r\n                def = 'CORBUZZ_MAIN',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n        },\r\n    },\r\n\r\n    legstarfall = {\r\n        explodeas = 'fusionExplosion',\r\n        energycost = 1500000,\r\n        metalcost = 52000,\r\n        buildtime = 175000,\r\n        health = 48000,\r\n        footprintx = 6,\r\n        footprintz = 6,\r\n        weapondefs = {\r\n            LEGSTARFALL_MAIN = {\r\n                accuracy = 0,\r\n                areaofeffect = 220,\r\n                avoidfeature = false,\r\n                avoidfriendly = false,\r\n                avoidground = false,\r\n                burst = 20,\r\n                burstrate = 0.015,\r\n                sprayangle = 120,\r\n                highTrajectory = 0,\r\n                cegtag = 'starfire',\r\n                collidefriendly = false,\r\n                craterboost = 0.1,\r\n                impactonly = 1,\r\n                cratermult = 0.1,\r\n                edgeeffectiveness = 0.75,\r\n                energypershot = 4480,\r\n                fireTolerance = 200,\r\n                tolerance = 200,\r\n                explosiongenerator = 'custom:plasmahit-medium-purple',\r\n                gravityaffected = false,\r\n                impulsefactor = 0.4,\r\n                name = 'Legion Meteor Storm',\r\n                noselfdamage = true,\r\n                range = 2950,\r\n                reloadtime = 1.5,\r\n                cameraShake = 0,\r\n                rgbcolor = '0.7 0.3 1.0',\r\n                soundhit = 'xplomed4',\r\n                soundhitwet = 'splshbig',\r\n                soundstart = 'mortarhvy1',\r\n                soundhitvolume = 35,\r\n                turret = true,\r\n                weapontimer = 3,\r\n                weapontype = 'Cannon',\r\n                weaponvelocity = 1200,\r\n                damage = {\r\n                    commanders = 480,\r\n                    default = 650,\r\n                    shields = 200,\r\n                    sub = 60,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                badtargetcategory = 'VTOL GROUNDSCOUT',\r\n                def = 'LEGSTARFALL_MAIN',\r\n                onlytargetcategory = 'SURFACE',\r\n                burstControlWhenOutOfArc = 1,\r\n                maindir = '0 0 1',\r\n            },\r\n        },\r\n    },\r\n}\r\n"
        },
        {
            "path": "lua/rflrpc-t4.lua",
            "data": "-- Epic Ragnarok, Calamity, Starfall\r\n-- Authors: Altwaal\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\ndo\r\n    local unitDefs, tableMerge = UnitDefs or {}, table.merge\r\n\r\n    local function ensureBuildOption(builderName, optionName)\r\n        local builder = unitDefs[builderName]\r\n        local optionDef = optionName and unitDefs[optionName]\r\n        if not builder or not optionDef then\r\n            return\r\n        end\r\n\r\n        builder.buildoptions = builder.buildoptions or {}\r\n        for i = 1, #builder.buildoptions do\r\n            if builder.buildoptions[i] == optionName then\r\n                return\r\n            end\r\n        end\r\n\r\n        builder.buildoptions[#builder.buildoptions + 1] = optionName\r\n    end\r\n\r\n    -- Epic unit names\r\n    local EPIC_RAGNAROK = 'epic_ragnarok'\r\n    local EPIC_CALAMITY = 'epic_calamity'\r\n    local EPIC_STARFALL = 'epic_starfall'\r\n\r\n    unitDefs[EPIC_RAGNAROK] = tableMerge(unitDefs['armvulc'], {\r\n        name = 'Epic Ragnarok',\r\n        description = 'Advanced Armada artillery engineering. Unleashes powerful plasma barrages across the battlefield.',\r\n        buildtime = 900000,\r\n        health = 140000,\r\n        metalcost = 180000,\r\n        energycost = 2600000,\r\n        icontype = 'armvulc',\r\n        customparams = {\r\n            i18n_en_humanname = 'Epic Ragnarok',\r\n            i18n_en_tooltip = 'Powerful burst-fire plasma artillery. Destroys everything in range.',\r\n            techlevel = 4,\r\n        },\r\n        weapondefs = {\r\n            apocalypse_plasma_cannon = {\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                name = 'Apocalypse Plasma Cannon',\r\n                weapontype = 'BeamLaser',\r\n                rgbcolor = '1.0 0.2 0.1',\r\n                burst = 4,\r\n                burstrate = 0.25,\r\n                reloadtime = 6,\r\n                accuracy = 500,\r\n                areaofeffect = 160,\r\n                range = 3080,\r\n                energypershot = 88750,\r\n                turret = true,\r\n                soundstart = 'lrpcshot3',\r\n                soundhit = 'rflrpcexplo',\r\n                soundhitvolume = 40,\r\n                size = 8,\r\n                impulsefactor = 1.3,\r\n                weaponvelocity = 3100,\r\n                thickness = 12,\r\n                laserflaresize = 8,\r\n                texture3 = 'largebeam',\r\n                tilelength = 150,\r\n                tolerance = 10000,\r\n                beamtime = 0.12,\r\n                corethickness = 0.4,\r\n                explosiongenerator = 'custom:tachyonshot',\r\n                craterboost = 0.15,\r\n                cratermult = 0.15,\r\n                edgeeffectiveness = 0.25,\r\n                impactonly = 1,\r\n                noselfdamage = true,\r\n                soundtrigger = 1,\r\n                damage = {\r\n                    default = 22701,\r\n                    shields = 2673,\r\n                    subs = 1338,\r\n                },\r\n                allowNonBlockingAim = true,\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                badtargetcategory = 'MOBILE',\r\n                def = 'apocalypse_plasma_cannon',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n        },\r\n    })\r\n\r\n    unitDefs[EPIC_CALAMITY] = tableMerge(unitDefs['corbuzz'], {\r\n        name = 'Epic Calamity',\r\n        description = 'Advanced Cortex siege technology. Fires large plasma shells that devastate formations with each impact.',\r\n        buildtime = 920000,\r\n        health = 145000,\r\n        metalcost = 165000,\r\n        energycost = 2700000,\r\n        icontype = 'corbuzz',\r\n        customparams = {\r\n            i18n_en_humanname = 'Epic Calamity',\r\n            i18n_en_tooltip = 'Large single-shot plasma artillery. Each shell causes major destruction.',\r\n            techlevel = 4,\r\n        },\r\n        weapondefs = {\r\n            cataclysm_plasma_howitzer = {\r\n                collidefriendly = 0,\r\n                collidefeature = 0,\r\n                avoidfeature = 0,\r\n                avoidfriendly = 0,\r\n                impactonly = 1,\r\n                name = 'Cataclysm Plasma Howitzer',\r\n                weapontype = 'Cannon',\r\n                rgbcolor = '0.15 0.6 0.5',\r\n                camerashake = 0,\r\n                reloadtime = 0.3,\r\n                accuracy = 300,\r\n                areaofeffect = 220,\r\n                range = 3150,\r\n                energypershot = 4600,\r\n                turret = true,\r\n                soundstart = 'lrpcshot3',\r\n                soundhit = 'rflrpcexplo',\r\n                soundhitvolume = 50,\r\n                size = 12,\r\n                impulsefactor = 2.0,\r\n                weaponvelocity = 2500,\r\n                footprintx = 14,\r\n                footprintz = 14,\r\n                turnrate = 20000,\r\n                thickness = 18,\r\n                laserflaresize = 8,\r\n                texture3 = 'largebeam',\r\n                tilelength = 200,\r\n                tolerance = 10000,\r\n                explosiongenerator = 'custom:tachyonshot',\r\n                craterboost = 0.25,\r\n                cratermult = 0.25,\r\n                edgeeffectiveness = 0.35,\r\n                damage = {\r\n                    default = 3720,\r\n                    shields = 2268,\r\n                    subs = 972,\r\n                },\r\n                allowNonBlockingAim = true,\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                badtargetcategory = 'MOBILE',\r\n                def = 'cataclysm_plasma_howitzer',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n        },\r\n    })\r\n\r\n    unitDefs[EPIC_STARFALL] = tableMerge(unitDefs['legstarfall'], {\r\n        name = 'Epic Starfall',\r\n        description = 'Advanced Legion siege technology. Unleashes devastating rocket barrages that obliterate everything in range.',\r\n        buildtime = 180000,\r\n        health = 145000,\r\n        metalcost = 180000,\r\n        energycost = 3400000,\r\n        collisionvolumescales = '61 128 61',\r\n        footprintx = 6,\r\n        footprintz = 6,\r\n        collisionvolumetype = 'CylY',\r\n        yardmap = 'oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo',\r\n        icontype = 'legstarfall',\r\n        customparams = {\r\n            i18n_en_humanname = 'Epic Starfall',\r\n            i18n_en_tooltip = 'Massive rocket artillery. Fires devastating direct-fire rocket barrages.',\r\n            techlevel = 4,\r\n            modelradius = 150,\r\n        },\r\n        weapondefs = {\r\n            epic_rocket_barrage = {\r\n                areaofeffect = 180,\r\n                avoidfeature = false,\r\n                avoidfriendly = false,\r\n                collidefriendly = false,\r\n                castshadow = true,\r\n                cegtag = 'missiletrailviper',\r\n                craterareaofeffect = 0,\r\n                craterboost = 0,\r\n                cratermult = 0,\r\n                camerashake = 0,\r\n                edgeeffectiveness = 0.25,\r\n                explosiongenerator = 'custom:genericshellexplosion-large-bomb',\r\n                firestarter = 90,\r\n                impulsefactor = 0.5,\r\n                model = 'cormissile3fast.s3o',\r\n                name = 'Epic Rocket Barrage',\r\n                noselfdamage = true,\r\n                range = 3300,\r\n                reloadtime = 20,\r\n                energypershot = 400000,\r\n                smokecolor = 0.8,\r\n                smokeperiod = 8,\r\n                smokesize = 14,\r\n                smoketime = 40,\r\n                smoketrail = true,\r\n                smoketrailcastshadow = false,\r\n                soundhit = 'xplomed4',\r\n                soundhitwet = 'splslrg',\r\n                soundstart = 'missilelauncher',\r\n                startvelocity = 400,\r\n                targetmoveerror = 0.15,\r\n                texture1 = 'null',\r\n                texture2 = 'railguntrail',\r\n                tolerance = 8000,\r\n                tracks = true,\r\n                turnrate = 18000,\r\n                turret = true,\r\n                weaponacceleration = 200,\r\n                weapontype = 'MissileLauncher',\r\n                weaponvelocity = 800,\r\n                damage = {\r\n                    default = 25000,\r\n                    commanders = 18750,\r\n                    subs = 500,\r\n                    vtol = 2500,\r\n                },\r\n            },\r\n        },\r\n        weapons = {\r\n            [1] = {\r\n                badtargetcategory = 'MOBILE',\r\n                def = 'epic_rocket_barrage',\r\n                onlytargetcategory = 'SURFACE',\r\n            },\r\n        },\r\n    })\r\n\r\n    -- Builders that can construct epic units\r\n    local builders = {\r\n        'armaca',\r\n        'armack',\r\n        'armacsub',\r\n        'armacv',\r\n        'armt3airaide',\r\n        'armt3aide',\r\n        'coraca',\r\n        'corack',\r\n        'coracsub',\r\n        'coracv',\r\n        'cort3airaide',\r\n        'cort3aide',\r\n        'legaca',\r\n        'legack',\r\n        'legacv',\r\n        'legcomt2com',\r\n        'legt3airaide',\r\n        'legt3aide',\r\n    }\r\n\r\n    -- Add commander levels 3-10 for each faction\r\n    for _, faction in pairs({ 'arm', 'cor', 'leg' }) do\r\n        for level = 3, 10 do\r\n            table.insert(builders, faction .. 'comlvl' .. level)\r\n        end\r\n    end\r\n\r\n    -- Add epic units to builder build options based on faction\r\n    for _, builderName in pairs(builders) do\r\n        local faction = builderName:sub(1, 3)\r\n\r\n        if faction == 'arm' then\r\n            ensureBuildOption(builderName, EPIC_RAGNAROK)\r\n        elseif faction == 'cor' then\r\n            ensureBuildOption(builderName, EPIC_CALAMITY)\r\n        elseif faction == 'leg' then\r\n            ensureBuildOption(builderName, EPIC_STARFALL)\r\n        end\r\n    end\r\nend\r\n"
        },
        {
            "path": "lua/unit-launchers.lua",
            "data": "-- Meatballlunch Reloaded\r\n-- This code adds new build options to the Epic Commando unit from the Cortex Faction (T3 Gantry with required experimental units + experimental SCAV units).\r\n-- The build options currently include 18 new unit launchers.\r\n-- Many T3 units and 9 launchers for T1-3 random units for each faction.\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\ndo\r\n    local UnitDefs, armbotrail = UnitDefs or {}, 'armbotrail'\r\n    local NewUnits = {\r\n        armmeatball = {\r\n            customparams = { i18n_en_humanname = 'Meatball Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    range = 7550,\r\n                    metalpershot = 5300,\r\n                    energypershot = 96000,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'armmeatball',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        armassimilator = {\r\n            customparams = { i18n_en_humanname = 'Assimilator Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    range = 7550,\r\n                    metalpershot = 4500,\r\n                    energypershot = 80000,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'armassimilator',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        armpwt4 = {\r\n            customparams = { i18n_en_humanname = 'Epic Pawn Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    range = 7550,\r\n                    metalpershot = 14200,\r\n                    energypershot = 480000,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'armpwt4',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        legeshotgunmech = {\r\n            customparams = { i18n_en_humanname = 'Pretorian Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    range = 7550,\r\n                    metalpershot = 15000,\r\n                    energypershot = 384000,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'legeshotgunmech',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        legjav = {\r\n            customparams = { i18n_en_humanname = 'Javelin Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    range = 7550,\r\n                    metalpershot = 3000,\r\n                    energypershot = 102400,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'legjav',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        armraz = {\r\n            customparams = { i18n_en_humanname = 'Razorback Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    range = 7550,\r\n                    metalpershot = 8000,\r\n                    energypershot = 283520,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'armraz',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        corakt4 = {\r\n            customparams = { i18n_en_humanname = 'Epic Grund Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    range = 7550,\r\n                    metalpershot = 15000,\r\n                    energypershot = 384000,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'corakt4',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        cordemon = {\r\n            customparams = { i18n_en_humanname = 'Demon Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    range = 7550,\r\n                    metalpershot = 15000,\r\n                    energypershot = 384000,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'cordemon',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        armvader = {\r\n            customparams = { i18n_en_humanname = 'Tumbleweed Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    range = 7550,\r\n                    metalpershot = 115,\r\n                    energypershot = 12500,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'armvader',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        armvadert4 = {\r\n            customparams = { i18n_en_humanname = 'Epic Tumbleweed Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    range = 7550,\r\n                    metalpershot = 26600,\r\n                    energypershot = 480000,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'armvadert4',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        armt1 = {\r\n            customparams = { i18n_en_humanname = 'Armada T1 Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    stockpiletime = 0.5,\r\n                    range = 7550,\r\n                    metalpershot = 300,\r\n                    energypershot = 12500,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'armham armjeth armpw armrock armwar armah armanac armmh armsh armart armfav armflash armjanus armpincer armsam armstump armzapper',\r\n                        spawns_mode = 'random',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        armt2 = {\r\n            customparams = { i18n_en_humanname = 'Armada T2 Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    stockpiletime = 1,\r\n                    range = 7550,\r\n                    metalpershot = 1000,\r\n                    energypershot = 45000,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'armaak armamph armfast armfboy armfido armmav armsnipe armsptk armzeus armbull armcroc armgremlin armlatnk armmanni armmart armmerl armyork',\r\n                        spawns_mode = 'random',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        armt3 = {\r\n            customparams = { i18n_en_humanname = 'Armada T3 Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    stockpiletime = 2,\r\n                    range = 7550,\r\n                    metalpershot = 15000,\r\n                    energypershot = 180000,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'armbanth armlun armmar armprowl armraz armthor armvang armassimilator armlunchbox armsptkt4 armdronecarryland armrattet4',\r\n                        spawns_mode = 'random',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        cort1 = {\r\n            customparams = { i18n_en_humanname = 'Cortex T1 Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    stockpiletime = 0.5,\r\n                    range = 7550,\r\n                    metalpershot = 300,\r\n                    energypershot = 12500,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'corak corcrash corstorm corthud corah corhal cormh corsh corsnap corthovr corfav corgarp corgator corlevlr cormist corraid corwolv cortorch',\r\n                        spawns_mode = 'random',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        cort2 = {\r\n            customparams = { i18n_en_humanname = 'Cortex T2 Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    stockpiletime = 1,\r\n                    range = 7550,\r\n                    metalpershot = 1000,\r\n                    energypershot = 45000,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'coraak coramph corcan corfast corhrk cormort corpyro corroach corsktl corsumo cortermite corban corgol cormabm cormart corparrow correap corsala corseal corsent corsiegebreaker cortrem corvrad corvroc corftiger corgatreap',\r\n                        spawns_mode = 'random',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        cort3 = {\r\n            customparams = { i18n_en_humanname = 'Cortex T3 Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    stockpiletime = 2,\r\n                    range = 7550,\r\n                    metalpershot = 15000,\r\n                    energypershot = 180000,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'corcat cordemon corjugg corkarg corkorg corshiva corakt4 cordeadeye corkarganetht4 corkark corthermite corgolt4',\r\n                        spawns_mode = 'random',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        legt1 = {\r\n            customparams = { i18n_en_humanname = 'Legion T1 Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    stockpiletime = 0.5,\r\n                    range = 7550,\r\n                    metalpershot = 300,\r\n                    energypershot = 12500,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'legbal legcen leggob legkark leglob legah legcar legmh legner legsh legamphtank legbar leggat leghades leghelios legrail',\r\n                        spawns_mode = 'random',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        legt2 = {\r\n            customparams = { i18n_en_humanname = 'Legion T2 Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    stockpiletime = 1,\r\n                    range = 7550,\r\n                    metalpershot = 1000,\r\n                    energypershot = 45000,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'legamph legbart legdecom leginc legshot legsnapper legsrail legstr legaheattank legamcluster legaskirmtank legavroc legfloat leginf legmed legmrv legvcarry legvflak',\r\n                        spawns_mode = 'random',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        legt3 = {\r\n            customparams = { i18n_en_humanname = 'Legion T3 Launcher' },\r\n            weapondefs = {\r\n                arm_botrail = {\r\n                    stockpiletime = 2,\r\n                    range = 7550,\r\n                    metalpershot = 15000,\r\n                    energypershot = 180000,\r\n                    reloadtime = 0.5,\r\n                    customparams = {\r\n                        stockpilelimit = 50,\r\n                        spawns_name = 'leegmech legbunk legeheatraymech legelrpcmech legerailtank legeshotgunmech legjav legkeres leggobt3 legpede legsrailt4',\r\n                        spawns_mode = 'random',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    }\r\n\r\n    local function ensureBuildOption(builderName, optionName)\r\n        local builder = UnitDefs[builderName]\r\n        local optionDef = optionName and UnitDefs[optionName]\r\n        if not builder or not optionDef then\r\n            return\r\n        end\r\n\r\n        builder.buildoptions = builder.buildoptions or {}\r\n        for i = 1, #builder.buildoptions do\r\n            if builder.buildoptions[i] == optionName then\r\n                return\r\n            end\r\n        end\r\n\r\n        builder.buildoptions[#builder.buildoptions + 1] = optionName\r\n    end\r\n\r\n    if UnitDefs.cormandot4 then\r\n        for k, s in pairs(NewUnits) do\r\n            local nU = armbotrail .. '_' .. k\r\n            if UnitDefs[armbotrail] and not UnitDefs[nU] then\r\n                UnitDefs[nU] = table.merge(UnitDefs[armbotrail], s)\r\n                ensureBuildOption('cormandot4', nU)\r\n            end\r\n        end\r\n    end\r\nend\r\n"
        },
        {
            "path": "lua/wave-challenge.lua",
            "data": "-- NuttyB Experimental Wave Challenge\r\n-- Authors: BackBash\r\n-- https://github.com/nuttyb-community/nuttyb\r\n\r\ndo\r\n    local unitDefs = UnitDefs or {}\r\n    local merge = table.mergeInPlace or table.merge\r\n\r\n    merge(unitDefs, {\r\n        raptor_air_scout_basic_t2_v1 = {\r\n            customparams = {\r\n                raptorcustomsquad = true,\r\n                raptorsquadunitsamount = 25,\r\n                raptorsquadminanger = 20,\r\n                raptorsquadmaxanger = 26,\r\n                raptorsquadweight = 10,\r\n                raptorsquadrarity = 'basic',\r\n                raptorsquadbehavior = 'raider',\r\n                raptorsquadbehaviordistance = 500,\r\n                raptorsquadbehaviorchance = 0.75,\r\n            },\r\n        },\r\n        raptor_hive_assault_basic = {\r\n            customparams = {\r\n                raptorcustomsquad = true,\r\n                raptorsquadunitsamount = 25,\r\n                raptorsquadminanger = 0,\r\n                raptorsquadmaxanger = 40,\r\n                raptorsquadweight = 1,\r\n                raptorsquadrarity = 'basic',\r\n                raptorsquadbehavior = 'raider',\r\n                raptorsquadbehaviordistance = 500,\r\n                raptorsquadbehaviorchance = 0.75,\r\n            },\r\n        },\r\n        raptor_land_swarmer_basic_t3_v1 = {\r\n            customparams = {\r\n                raptorcustomsquad = true,\r\n                raptorsquadunitsamount = 25,\r\n                raptorsquadminanger = 0,\r\n                raptorsquadmaxanger = 40,\r\n                raptorsquadweight = 2,\r\n                raptorsquadrarity = 'basic',\r\n                raptorsquadbehavior = 'raider',\r\n                raptorsquadbehaviordistance = 500,\r\n                raptorsquadbehaviorchance = 0.75,\r\n            },\r\n        },\r\n        raptor_evolved_motort4 = {\r\n            customparams = {\r\n                raptorcustomsquad = true,\r\n                raptorsquadunitsamount = 12,\r\n                raptorsquadminanger = 50,\r\n                raptorsquadmaxanger = 300,\r\n                raptorsquadweight = 3,\r\n                raptorsquadrarity = 'special',\r\n                raptorsquadbehavior = 'artillery',\r\n                raptorsquadbehaviordistance = 2500,\r\n                raptorsquadbehaviorchance = 0.75,\r\n            },\r\n        },\r\n        raptor_hive_assault_heavy = {\r\n            customparams = {\r\n                raptorcustomsquad = true,\r\n                raptorsquadunitsamount = 25,\r\n                raptorsquadminanger = 55,\r\n                raptorsquadmaxanger = 70,\r\n                raptorsquadweight = 1,\r\n                raptorsquadrarity = 'basic',\r\n                raptorsquadbehavior = 'berserk',\r\n                raptorsquadbehaviordistance = 500,\r\n                raptorsquadbehaviorchance = 0.75,\r\n            },\r\n        },\r\n        raptor_hive_assault_superheavy = {\r\n            customparams = {\r\n                raptorcustomsquad = true,\r\n                raptorsquadunitsamount = 25,\r\n                raptorsquadminanger = 80,\r\n                raptorsquadmaxanger = 85,\r\n                raptorsquadweight = 1,\r\n                raptorsquadrarity = 'basic',\r\n                raptorsquadbehavior = 'berserk',\r\n                raptorsquadbehaviordistance = 500,\r\n                raptorsquadbehaviorchance = 0.75,\r\n            },\r\n        },\r\n        raptor_air_kamikaze_basic_t2_v1 = {\r\n            customparams = {\r\n                raptorcustomsquad = true,\r\n                raptorsquadunitsamount = 55,\r\n                raptorsquadminanger = 100,\r\n                raptorsquadmaxanger = 105,\r\n                raptorsquadweight = 2,\r\n                raptorsquadrarity = 'basic',\r\n                raptorsquadbehavior = 'berserk',\r\n                raptorsquadbehaviordistance = 500,\r\n                raptorsquadbehaviorchance = 0.75,\r\n            },\r\n        },\r\n        raptor_matriarch_fire = {\r\n            customparams = {\r\n                raptorcustomsquad = true,\r\n                raptorsquadunitsamount = 30,\r\n                raptorsquadminanger = 105,\r\n                raptorsquadmaxanger = 135,\r\n                raptorsquadweight = 3,\r\n                raptorsquadrarity = 'special',\r\n                raptorsquadbehavior = 'berserk',\r\n                raptorsquadbehaviordistance = 500,\r\n                raptorsquadbehaviorchance = 0.75,\r\n            },\r\n        },\r\n        raptor_matriarch_basic = {\r\n            customparams = {\r\n                raptorcustomsquad = true,\r\n                raptorsquadunitsamount = 30,\r\n                raptorsquadminanger = 105,\r\n                raptorsquadmaxanger = 135,\r\n                raptorsquadweight = 3,\r\n                raptorsquadrarity = 'special',\r\n                raptorsquadbehavior = 'berserk',\r\n                raptorsquadbehaviordistance = 500,\r\n                raptorsquadbehaviorchance = 0.75,\r\n            },\r\n        },\r\n        raptor_matriarch_acid = {\r\n            customparams = {\r\n                raptorcustomsquad = true,\r\n                raptorsquadunitsamount = 30,\r\n                raptorsquadminanger = 105,\r\n                raptorsquadmaxanger = 135,\r\n                raptorsquadweight = 3,\r\n                raptorsquadrarity = 'special',\r\n                raptorsquadbehavior = 'berserk',\r\n                raptorsquadbehaviordistance = 500,\r\n                raptorsquadbehaviorchance = 0.75,\r\n            },\r\n        },\r\n        raptor_matriarch_electric = {\r\n            customparams = {\r\n                raptorcustomsquad = true,\r\n                raptorsquadunitsamount = 30,\r\n                raptorsquadminanger = 105,\r\n                raptorsquadmaxanger = 135,\r\n                raptorsquadweight = 3,\r\n                raptorsquadrarity = 'special',\r\n                raptorsquadbehavior = 'berserk',\r\n                raptorsquadbehaviordistance = 500,\r\n                raptorsquadbehaviorchance = 0.75,\r\n            },\r\n            weapons = {\r\n                [5] = {\r\n                    def = '',\r\n                },\r\n            },\r\n        },\r\n        raptor_queen_veryeasy = {\r\n            selfdestructas = 'customfusionexplo',\r\n            explodeas = 'customfusionexplo',\r\n            maxthisunit = 3,\r\n            customparams = {\r\n                raptorcustomsquad = true,\r\n                i18n_en_humanname = 'Queen Degenerative',\r\n                i18n_en_tooltip = 'SHES A BIG ONE',\r\n                raptorsquadunitsamount = 2,\r\n                raptorsquadminanger = 70,\r\n                raptorsquadmaxanger = 150,\r\n                raptorsquadweight = 2,\r\n                raptorsquadrarity = 'special',\r\n                raptorsquadbehavior = 'berserk',\r\n                raptorsquadbehaviordistance = 500,\r\n                raptorsquadbehaviorchance = 0.75,\r\n            },\r\n            weapondefs = {\r\n                melee = {\r\n                    damage = {\r\n                        default = 5000,\r\n                    },\r\n                },\r\n                yellow_missile = {\r\n                    damage = {\r\n                        default = 1,\r\n                        vtol = 500,\r\n                    },\r\n                },\r\n                goo = {\r\n                    range = 500,\r\n                    damage = {\r\n                        default = 1200,\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        corcomlvl4 = {\r\n            weapondefs = {\r\n                disintegratorxl = {\r\n                    damage = {\r\n                        commanders = 0,\r\n                        default = 99999,\r\n                        scavboss = 1000,\r\n                        raptorqueen = 5000,\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    })\r\nend\r\n"
        }
    ]
}